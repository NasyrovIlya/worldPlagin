!function(){"use strict";var e={58394:function(e,t,n){e.exports=n.p+"96ee7daa029fba19294a.css"}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var o=i.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=i[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),n.b=document.baseURI||self.location.href,function(){new Set;const e="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;class t{_listeners="WeakMap"in e?new WeakMap:void 0;_observer=void 0;options;constructor(e){this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver((e=>{for(const n of e)t.entries.set(n.target,n),this._listeners.get(n.target)?.(n)})))}}t.entries="WeakMap"in e?new WeakMap:void 0;let n,i=!1;function o(e,t){e.appendChild(t)}function s(e,t,n){const i=function(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}(e);if(!i.getElementById(t)){const e=c("style");e.id=t,e.textContent=n,function(e,t){o(e.head||e,t),t.sheet}(i,e)}}function l(e,t,n){e.insertBefore(t,n||null)}function r(e){e.parentNode&&e.parentNode.removeChild(e)}function c(e){return document.createElement(e)}function a(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function u(e){return document.createTextNode(e)}function d(){return u(" ")}function p(){return u("")}function m(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function f(e){return function(t){return t.preventDefault(),e.call(this,t)}}function g(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function h(e){return function(t){t.target===this&&e.call(this,t)}}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e){return""===e?null:+e}function b(e,t){t=""+t,e.data!==t&&(e.data=t)}function w(e,t){e.value=null==t?"":t}function x(e,t,n,i){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function y(e,t,n){e.classList.toggle(t,!!n)}function k(){}function _(e){return e()}function I(){return Object.create(null)}function S(e){e.forEach(_)}function N(e){return"function"==typeof e}function M(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function C(e,...t){if(null==e){for(const e of t)e(void 0);return k}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function A(e){let t;return C(e,(e=>t=e))(),t}function j(e,t,n){e.$$.on_destroy.push(C(t,n))}function E(e,t,n,i){return e[1]&&i?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](i(t))):n.ctx}function L(e){return null==e?"":e}function T(e,t,n){return e.set(n),t}function O(e){n=e}function z(){if(!n)throw new Error("Function called outside component initialization");return n}function D(e){z().$$.on_mount.push(e)}function q(e){z().$$.on_destroy.push(e)}function F(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}new Map;const P=[],G=[];let Z=[];const Y=[],H=Promise.resolve();let U=!1;function R(){U||(U=!0,H.then(V))}function J(e){Z.push(e)}function Q(e){Y.push(e)}const W=new Set;let B=0;function V(){if(0!==B)return;const e=n;do{try{for(;B<P.length;){const e=P[B];B++,O(e),X(e.$$)}}catch(e){throw P.length=0,B=0,e}for(O(null),P.length=0,B=0;G.length;)G.pop()();for(let e=0;e<Z.length;e+=1){const t=Z[e];W.has(t)||(W.add(t),t())}Z.length=0}while(P.length);for(;Y.length;)Y.pop()();U=!1,W.clear(),O(e)}function X(e){if(null!==e.fragment){e.update(),S(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}const K=new Set;let ee,te;function ne(){ee={r:0,c:[],p:ee}}function ie(){ee.r||S(ee.c),ee=ee.p}function oe(e,t){e&&e.i&&(K.delete(e),e.i(t))}function se(e,t,n,i){if(e&&e.o){if(K.has(e))return;K.add(e),ee.c.push((()=>{K.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}else i&&i()}function le(e){return void 0!==e?.length?e:Array.from(e)}function re(e,t){e.d(1),t.delete(e.key)}function ce(e,t){se(e,1,1,(()=>{t.delete(e.key)}))}function ae(e,t,n,i,o,s,l,r,c,a,u,d){let p=e.length,m=s.length,f=p;const g={};for(;f--;)g[e[f].key]=f;const h=[],$=new Map,v=new Map,b=[];for(f=m;f--;){const e=d(o,s,f),r=n(e);let c=l.get(r);c?i&&b.push((()=>c.p(e,t))):(c=a(r,e),c.c()),$.set(r,h[f]=c),r in g&&v.set(r,Math.abs(f-g[r]))}const w=new Set,x=new Set;function y(e){oe(e,1),e.m(r,u),l.set(e.key,e),u=e.first,m--}for(;p&&m;){const t=h[m-1],n=e[p-1],i=t.key,o=n.key;t===n?(u=t.first,p--,m--):$.has(o)?!l.has(i)||w.has(i)?y(t):x.has(o)?p--:v.get(i)>v.get(o)?(x.add(i),y(t)):(w.add(o),p--):(c(n,l),p--)}for(;p--;){const t=e[p];$.has(t.key)||c(t,l)}for(;m;)y(h[m-1]);return S(b),h}function ue(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function de(e){e&&e.c()}function pe(e,t,n){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),J((()=>{const t=e.$$.on_mount.map(_).filter(N);e.$$.on_destroy?e.$$.on_destroy.push(...t):S(t),e.$$.on_mount=[]})),o.forEach(J)}function me(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];Z.forEach((i=>-1===e.indexOf(i)?t.push(i):n.push(i))),n.forEach((e=>e())),Z=t}(n.after_update),S(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function fe(e,t,o,s,l,c,a=null,u=[-1]){const d=n;O(e);const p=e.$$={fragment:null,ctx:[],props:c,update:k,not_equal:l,bound:I(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:I(),dirty:u,skip_bound:!1,root:t.target||d.$$.root};a&&a(p.root);let m=!1;if(p.ctx=o?o(e,t.props||{},((t,n,...i)=>{const o=i.length?i[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),m&&function(e,t){-1===e.$$.dirty[0]&&(P.push(e),R(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],p.update(),m=!0,S(p.before_update),p.fragment=!!s&&s(p.ctx),t.target){if(t.hydrate){i=!0;const e=(f=t.target,Array.from(f.childNodes));p.fragment&&p.fragment.l(e),e.forEach(r)}else p.fragment&&p.fragment.c();t.intro&&oe(e.$$.fragment),pe(e,t.target,t.anchor),i=!1,V()}var f;O(d)}function ge(e,t,n,i){const o=n[e]?.type;if(t="Boolean"===o&&"boolean"!=typeof t?null!=t:t,!i||!n[e])return t;if("toAttribute"===i)switch(o){case"Object":case"Array":return null==t?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return null==t?null:t;default:return t}else switch(o){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":default:return t;case"Number":return null!=t?+t:t}}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(te=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(e,t,n){super(),this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const n=this.$$c.$on(e,t);this.$$l_u.set(t,n)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const e=this.$$l_u.get(t);e&&(e(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){if(await Promise.resolve(),!this.$$cn||this.$$c)return;function e(e){return()=>{let t;return{c:function(){t=c("slot"),"default"!==e&&$(t,"name",e)},m:function(e,n){l(e,t,n)},d:function(e){e&&r(t)}}}}const t={},n=function(e){const t={};return e.childNodes.forEach((e=>{t[e.slot||"default"]=!0})),t}(this);for(const o of this.$$s)o in n&&(t[o]=[e(o)]);for(const s of this.attributes){const a=this.$$g_p(s.name);a in this.$$d||(this.$$d[a]=ge(a,s.value,this.$$p_d,"toProp"))}for(const u in this.$$p_d)u in this.$$d||void 0===this[u]||(this.$$d[u]=this[u],delete this[u]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});const i=()=>{this.$$r=!0;for(const e in this.$$p_d)if(this.$$d[e]=this.$$c.$$.ctx[this.$$c.$$.props[e]],this.$$p_d[e].reflect){const t=ge(e,this.$$d[e],this.$$p_d,"toAttribute");null==t?this.removeAttribute(this.$$p_d[e].attribute||e):this.setAttribute(this.$$p_d[e].attribute||e,t)}this.$$r=!1};this.$$c.$$.after_update.push(i),i();for(const d in this.$$l)for(const p of this.$$l[d]){const m=this.$$c.$on(d,p);this.$$l_u.set(p,m)}this.$$l={}}}attributeChangedCallback(e,t,n){this.$$r||(e=this.$$g_p(e),this.$$d[e]=ge(e,n,this.$$p_d,"toProp"),this.$$c?.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then((()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)}))}$$g_p(e){return Object.keys(this.$$p_d).find((t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e))||e}});class he{$$=void 0;$$set=void 0;$destroy(){me(this,1),this.$destroy=k}$on(e,t){if(!N(t))return k;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const $e=[];function ve(e,t=k){let n;const i=new Set;function o(t){if(M(e,t)&&(e=t,n)){const t=!$e.length;for(const t of i)t[1](),$e.push(t,e);if(t){for(let e=0;e<$e.length;e+=2)$e[e][0]($e[e+1]);$e.length=0}}}function s(t){o(t(e))}return{set:o,update:s,subscribe:function(l,r=k){const c=[l,r];return i.add(c),1===i.size&&(n=t(o,s)||k),l(e),()=>{i.delete(c),0===i.size&&n&&(n(),n=null)}}}}const be=ve({elma:{idIntegration:"",url:"",getStructureApp:"",getFieldsApp:""},amo:{url:"",token:"",id:""},cd:{url:"api-centerdoc.certit.ru"}}),we=ve("connect-settings");let xe=ve(!1),ye=ve(),ke=ve({}),_e=function(e){return e[e.string=1]="string",e[e.number=2]="number",e[e.date=3]="date",e[e.enum=4]="enum",e[e.boolean=5]="boolean",e}({});const Ie=["SYS_COLLECTION","TABLE","STATUS","SYS_USER","FULL_NAME"];function Se(e){return e}const Ne=[{id:"postTest",value:"Вставить шаблонную строку",callback:Se},{id:"constractionId",value:"Создавть условие с полем",callback:Se},{id:"modifier",value:"Выбрать модификатор",callback:Se}],Me=[{id:"Equals",value:"Равняется",type:[_e.string,_e.number,_e.date,_e.enum,_e.boolean]},{id:"NoEquals",value:"Не равняется",type:[_e.string,_e.number,_e.date,_e.enum,_e.boolean]},{id:"OneOf",value:"Хотя бы один",type:[_e.enum]},{id:"None",value:"Ни один",type:[_e.enum]},{id:"More",value:"Больше",type:[_e.number,_e.date]},{id:"Less",value:"Меньше",type:[_e.number,_e.date]},{id:"GreateOrEqual",value:"Больше или равно",type:[_e.number,_e.date]},{id:"LessOrEqual",value:"Меньше ли равно",type:[_e.number,_e.date]}],Ce=[{id:"and",value:"И"},{id:"or",value:"Или"},{id:"elif",value:"Иначе если"}],Ae=[{label:"Настройки соединения",value:"connect-settings"},{label:"Шаблонные строки из amoCRM",value:"amoCrmStrings"},{label:"Шаблонные строки из Elma",value:"elmaStrings"},{label:"Модификаторы ЦД",value:"modifiers"}];function je(e){s(e,"svelte-16suk8p",".custom-button.svelte-16suk8p{padding:10px 15px;background-color:#007bff;color:white;border:none;border-radius:5px;cursor:pointer;font-size:16px;background-repeat:no-repeat}.custom-button.svelte-16suk8p:hover{background-color:#0056b3}")}function Ee(e){let t,n,i,s;return{c(){t=c("button"),n=u(e[1]),$(t,"class","custom-button svelte-16suk8p"),$(t,"style",e[2])},m(r,c){l(r,t,c),o(t,n),i||(s=m(t,"click",(function(){N(e[0])&&e[0].apply(this,arguments)})),i=!0)},p(i,[o]){e=i,2&o&&b(n,e[1]),4&o&&$(t,"style",e[2])},i:k,o:k,d(e){e&&r(t),i=!1,s()}}}function Le(e,t,n){let{clickHandler:i=e=>{}}=t,{caption:o=""}=t,{style:s=""}=t;return e.$$set=e=>{"clickHandler"in e&&n(0,i=e.clickHandler),"caption"in e&&n(1,o=e.caption),"style"in e&&n(2,s=e.style)},[i,o,s]}var Te=class extends he{constructor(e){super(),fe(this,e,Le,Ee,M,{clickHandler:0,caption:1,style:2},je)}};function Oe(e){s(e,"svelte-gb6wft",".menu-container.svelte-gb6wft{display:flex;align-items:center;justify-content:space-between;position:relative;padding:10px 10px}.take-item-menu.svelte-gb6wft{margin-left:15px;margin-bottom:10px;font-weight:bold}.menu.svelte-gb6wft{width:250px;background-color:#f7f7f7;border:1px solid #ddd;border-radius:5px;padding:10px;box-shadow:0 2px 5px rgba(0, 0, 0, 0.1);position:absolute;top:42px;right:0;z-index:1}.option.svelte-gb6wft{padding:10px;cursor:pointer;border-radius:3px;transition:background-color 0.3s}.option.svelte-gb6wft:hover{background-color:#e0e0e0}.active.svelte-gb6wft{background-color:#d0e9ff;font-weight:bold}")}function ze(e,t,n){const i=e.slice();return i[7]=t[n],i}function De(e){let t,n=le(Ae),i=[];for(let t=0;t<n.length;t+=1)i[t]=qe(ze(e,n,t));return{c(){t=c("div");for(let e=0;e<i.length;e+=1)i[e].c();$(t,"class","menu svelte-gb6wft")},m(e,n){l(e,t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,o){if(6&o){let s;for(n=le(Ae),s=0;s<n.length;s+=1){const l=ze(e,n,s);i[s]?i[s].p(l,o):(i[s]=qe(l),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(e){e&&r(t),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(i,e)}}}function qe(e){let t,n,i,s,a,p,f=e[7].label+"";function g(){return e[5](e[7])}return{c(){t=c("div"),n=u(f),i=d(),$(t,"class",s="option "+(e[7].value===e[1]?"active":"")+" svelte-gb6wft")},m(e,s){l(e,t,s),o(t,n),o(t,i),a||(p=m(t,"click",g),a=!0)},p(n,i){e=n,2&i&&s!==(s="option "+(e[7].value===e[1]?"active":"")+" svelte-gb6wft")&&$(t,"class",s)},d(e){e&&r(t),a=!1,p()}}}function Fe(e){let t,n,i,s,a,p,m,f=Ae.find(e[4])?.label+"";a=new Te({props:{clickHandler:e[3],caption:"Меню"}});let g=e[0]&&De(e);return{c(){t=c("div"),n=c("div"),i=u(f),s=d(),de(a.$$.fragment),p=d(),g&&g.c(),$(n,"class","take-item-menu svelte-gb6wft"),$(t,"class","menu-container svelte-gb6wft")},m(e,r){l(e,t,r),o(t,n),o(n,i),o(t,s),pe(a,t,null),o(t,p),g&&g.m(t,null),m=!0},p(e,[n]){(!m||2&n)&&f!==(f=Ae.find(e[4])?.label+"")&&b(i,f),e[0]?g?g.p(e,n):(g=De(e),g.c(),g.m(t,null)):g&&(g.d(1),g=null)},i(e){m||(oe(a.$$.fragment,e),m=!0)},o(e){se(a.$$.fragment,e),m=!1},d(e){e&&r(t),me(a),g&&g.d()}}}function Pe(e,t,n){let i;j(e,we,(e=>n(1,i=e)));let o=!1;function s(e){we.set(e.value),n(0,o=!1)}function l(e){e.target.closest(".menu")||n(0,o=!1)}return D((()=>{const e=document.querySelector(".main-container");e&&(e.removeEventListener("click",l,!0),e.addEventListener("click",l,!0))})),[o,i,s,function(){n(0,o=!o)},e=>e.value===i,e=>s(e)]}var Ge=class extends he{constructor(e){super(),fe(this,e,Pe,Fe,M,{},Oe)}};function Ze(e){s(e,"svelte-30nqfm",".label.svelte-30nqfm.svelte-30nqfm{display:flex;align-items:center;cursor:pointer}.label.disabled.svelte-30nqfm.svelte-30nqfm{opacity:0.65;cursor:default}.wrap.svelte-30nqfm.svelte-30nqfm{padding:0;margin:0;margin-right:7px}.real-checkbox.svelte-30nqfm.svelte-30nqfm{position:absolute;opacity:0;width:20px;height:20px}.checkbox.svelte-30nqfm.svelte-30nqfm{position:relative;width:18px;height:18px;display:inline-flex;background-color:#fff;border:1px solid #e8e8e8;border-radius:3px;background-repeat:no-repeat}.real-checkbox.svelte-30nqfm:disabled~.wrap .checkbox.svelte-30nqfm{background-color:#f1f1f1}.real-checkbox.svelte-30nqfm:checked~.wrap .checkbox.svelte-30nqfm:not(.minus){background-image:url(data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJfeDIwMTRfX0l0ZW1fMV8iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMXB4IiB2aWV3Qm94PSIwIDAgMTIgMTEiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEyIDExIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJjaGVjay5zdmciPg0KCTxnPg0KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzJFMzY0MCIgZD0iTTExLjQ3NiwwLjE1MWMtMC4zNzctMC4yOTYtMC45OTctMC4xMzktMS4zNTksMC4zMjRMNS4xNTMsNi41Mw0KCQkJQzUuMDc3LDYuNjI0LDQuODg0LDYuNjU3LDQuNzg1LDYuNTk1TDEuNzIzLDQuNjg4QzEuMjQsNC4zNDIsMC42MjQsNC4zNjYsMC4zNDksNC43NTNjLTAuMjY4LDAuMzc4LTAuMTgsMC45OTQsMC4yMDksMS40NjQNCgkJCWwzLjUwOSw0LjIzNEM0LjM2MSwxMC44MDUsNC43NDIsMTEsNS4xNCwxMWMwLjQ2NSwwLDAuODk1LTAuMjY2LDEuMTc3LTAuNzI4bDUuMjY0LTguNjE1QzExLjkxNiwxLjEwOSwxMS44NzEsMC40NjIsMTEuNDc2LDAuMTUxDQoJCQl6Ii8+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=);background-size:70%;background-position:center}.checkbox.minus.svelte-30nqfm.svelte-30nqfm{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gDTwhLS0gR2VuZXJhdGVkIGJ5IExheWVyaGVybyBTVkcgRXhwb3J0ZXI6IGh0dHA6Ly93d3cubGF5ZXJoZXJvLmNvbS9waG90b3Nob3Atc3ZnLWV4cG9ydGVyIC0tPg08IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPg08c3ZnIHZlcnNpb249IjEuMSIgYmFzZVByb2ZpbGU9ImZ1bGwiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmV2PSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHMiIHdpZHRoPSIxMCIgaGVpZ2h0PSI0IiB2aWV3Qm94PSIwIDAgMTAgNCI+DTxnIHRyYW5zZm9ybT0ic2NhbGUoTmFOKSIgPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgIGZpbGw9InJnYiggNDYsIDU0LCA2NCApIg0gZD0iTS0wLjQ0NCwwLjExMSBDLTAuNDQ0LDAuMTExIDEuODA5LC0wLjEzOSA0LjA0NiwtMC4xMzkgQzYuMjUzLC0wLjEzOSA4LjQ0NSwwLjExMSA4LjQ0NSwwLjExMSBDOC40NDUsMC4xMTEgOC40NDUsMS41ODMgOC40NDUsMS41ODMgQzguNDQ1LDEuNTgzIDYuMzA1LDIuMDU2IDQuMTI1LDIuMDU2IEMxLjg2MiwyLjA1NiAtMC40NDQsMS41ODMgLTAuNDQ0LDEuNTgzIEMtMC40NDQsMS41ODMgLTAuNDQ0LDAuMTExIC0wLjQ0NCwwLjExMSBaIi8+DTwvZz48L3N2Zz4N);background-size:75%;background-position:75% 60%}")}function Ye(e){let t,n,i,s,a,u,p,f,g,h,v;const b=e[6].default,w=function(e,t,n){if(e){const i=E(e,t,n,null);return e[0](i)}}(b,e,e[5]);return{c(){t=c("label"),n=c("input"),i=d(),s=c("div"),a=c("span"),u=d(),p=c("div"),w&&w.c(),$(n,"class","real-checkbox svelte-30nqfm"),n.disabled=e[1],$(n,"type","checkbox"),$(a,"class","checkbox svelte-30nqfm"),y(a,"minus",e[2]),$(s,"class","wrap svelte-30nqfm"),$(t,"class",f="label "+e[3]+" svelte-30nqfm"),y(t,"disabled",e[1])},m(r,c){l(r,t,c),o(t,n),n.checked=e[0],o(t,i),o(t,s),o(s,a),o(t,u),o(t,p),w&&w.m(p,null),g=!0,h||(v=[m(n,"change",e[7]),m(n,"change",e[8]),m(n,"change",e[9])],h=!0)},p(e,[i]){(!g||2&i)&&(n.disabled=e[1]),1&i&&(n.checked=e[0]),(!g||4&i)&&y(a,"minus",e[2]),w&&w.p&&(!g||32&i)&&function(e,t,n,i,o,s){if(o){const l=E(t,n,i,s);e.p(l,o)}}(w,b,e,e[5],g?function(e,t,n,i){if(e[2]&&i){const o=e[2](i(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|o[i];return e}return t.dirty|o}return t.dirty}(b,e[5],i,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[5]),null),(!g||8&i&&f!==(f="label "+e[3]+" svelte-30nqfm"))&&$(t,"class",f),(!g||10&i)&&y(t,"disabled",e[1])},i(e){g||(oe(w,e),g=!0)},o(e){se(w,e),g=!1},d(e){e&&r(t),w&&w.d(e),h=!1,S(v)}}}function He(e,t,n){let{$$slots:i={},$$scope:o}=t,{disabled:s=!1}=t,{checked:l=!1}=t,{minus:r=!1}=t,{classes:c=""}=t,{onChange:a=null}=t;return e.$$set=e=>{"disabled"in e&&n(1,s=e.disabled),"checked"in e&&n(0,l=e.checked),"minus"in e&&n(2,r=e.minus),"classes"in e&&n(3,c=e.classes),"onChange"in e&&n(4,a=e.onChange),"$$scope"in e&&n(5,o=e.$$scope)},[l,s,r,c,a,o,i,function(t){F.call(this,e,t)},()=>a&&setTimeout((()=>a(l)),0),function(){l=this.checked,n(0,l)}]}var Ue=class extends he{constructor(e){super(),fe(this,e,He,Ye,M,{disabled:1,checked:0,minus:2,classes:3,onChange:4},Ze)}};function Re(e){s(e,"svelte-ney06a",".input-custom.svelte-ney06a{width:95%;border-radius:0.4rem;border:1px solid #d9d9d9;display:block;padding:10px;background-color:#fff;background-image:none;background-clip:padding-box;color:#252525;line-height:normal;transition:background 0.15s linear,\r\n      box-shadow 0.15s linear;outline:none;margin-bottom:5px}")}function Je(e){let t,n,i;return{c(){t=c("input"),$(t,"type","text"),$(t,"class","input-custom svelte-ney06a"),$(t,"title",e[1]),$(t,"placeholder",e[1])},m(o,s){l(o,t,s),w(t,e[0]),n||(i=[m(t,"input",e[6]),m(t,"input",(function(){N(e[2])&&e[2].apply(this,arguments)}))],n=!0)},p(n,i){e=n,2&i&&$(t,"title",e[1]),2&i&&$(t,"placeholder",e[1]),1&i&&t.value!==e[0]&&w(t,e[0])},d(e){e&&r(t),n=!1,S(i)}}}function Qe(e){let t,n,i;return{c(){t=c("input"),$(t,"type","number"),$(t,"class","input-custom svelte-ney06a"),$(t,"title",e[1]),$(t,"placeholder",e[1])},m(o,s){l(o,t,s),w(t,e[0]),n||(i=[m(t,"input",e[7]),m(t,"input",(function(){N(e[2])&&e[2].apply(this,arguments)}))],n=!0)},p(n,i){e=n,2&i&&$(t,"title",e[1]),2&i&&$(t,"placeholder",e[1]),1&i&&v(t.value)!==e[0]&&w(t,e[0])},d(e){e&&r(t),n=!1,S(i)}}}function We(e){let t,n,i;return{c(){t=c("input"),$(t,"type","date"),$(t,"class","input-custom svelte-ney06a"),$(t,"title",e[1]),$(t,"placeholder",e[1])},m(o,s){l(o,t,s),w(t,e[4]),n||(i=[m(t,"input",e[8]),m(t,"input",e[5])],n=!0)},p(e,n){2&n&&$(t,"title",e[1]),2&n&&$(t,"placeholder",e[1]),16&n&&w(t,e[4])},d(e){e&&r(t),n=!1,S(i)}}}function Be(e){let t,n,i,o,s;function c(t){e[9](t)}let a={};return void 0!==e[0]&&(a.checked=e[0]),i=new Ue({props:a}),G.push((()=>ue(i,"checked",c))),{c(){t=u(e[1]),n=d(),de(i.$$.fragment)},m(e,o){l(e,t,o),l(e,n,o),pe(i,e,o),s=!0},p(e,n){(!s||2&n)&&b(t,e[1]);const l={};!o&&1&n&&(o=!0,l.checked=e[0],Q((()=>o=!1))),i.$set(l)},i(e){s||(oe(i.$$.fragment,e),s=!0)},o(e){se(i.$$.fragment,e),s=!1},d(e){e&&(r(t),r(n)),me(i,e)}}}function Ve(e){let t,n,i,o,s,c=e[3]===_e.string&&Je(e),a=e[3]===_e.number&&Qe(e),u=e[3]===_e.date&&We(e),m=e[3]===_e.boolean&&Be(e);return{c(){c&&c.c(),t=d(),a&&a.c(),n=d(),u&&u.c(),i=d(),m&&m.c(),o=p()},m(e,r){c&&c.m(e,r),l(e,t,r),a&&a.m(e,r),l(e,n,r),u&&u.m(e,r),l(e,i,r),m&&m.m(e,r),l(e,o,r),s=!0},p(e,[s]){e[3]===_e.string?c?c.p(e,s):(c=Je(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),e[3]===_e.number?a?a.p(e,s):(a=Qe(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),e[3]===_e.date?u?u.p(e,s):(u=We(e),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null),e[3]===_e.boolean?m?(m.p(e,s),8&s&&oe(m,1)):(m=Be(e),m.c(),oe(m,1),m.m(o.parentNode,o)):m&&(ne(),se(m,1,1,(()=>{m=null})),ie())},i(e){s||(oe(m),s=!0)},o(e){se(m),s=!1},d(e){e&&(r(t),r(n),r(i),r(o)),c&&c.d(e),a&&a.d(e),u&&u.d(e),m&&m.d(e)}}}function Xe(e){if(void 0===e||""===e.trim())return"";const t=e.split("-");if(3!==t.length)return"";const[n,i,o]=t;return 4!==n.length||2!==i.length||2!==o.length?"":`${o}.${i}.${n}`}function Ke(e,t,n){let{placeholder:i=""}=t,{value:o=""}=t,{inputHndlr:s=e=>{}}=t,{typeInput:l=_e.string}=t,r=o;return e.$$set=e=>{"placeholder"in e&&n(1,i=e.placeholder),"value"in e&&n(0,o=e.value),"inputHndlr"in e&&n(2,s=e.inputHndlr),"typeInput"in e&&n(3,l=e.typeInput)},e.$$.update=()=>{25&e.$$.dirty&&l===_e.date&&""===o&&n(0,o=Xe(r))},[o,i,s,l,r,function(e){n(0,o=Xe(r)),s(e)},function(){o=this.value,n(0,o),n(3,l),n(4,r)},function(){o=v(this.value),n(0,o),n(3,l),n(4,r)},function(){r=this.value,n(4,r)},function(e){o=e,n(0,o),n(3,l),n(4,r)}]}var et=class extends he{constructor(e){super(),fe(this,e,Ke,Ve,M,{placeholder:1,value:0,inputHndlr:2,typeInput:3},Re)}};class tt{id="";name="";type="STRING";single=!0;_checked=!1;_path="";_modificators=[];constructor(e,t,n,i,o,s){this.id=e,this.name=t,this.type=n,this.single=i,this.parent=o,this.context=s}static async getFieldsFromApp(e,t,n){const i=[],{elma:o}=A(be);xe.set(!0);const s=await fetch(`${o.url}api/extensions/${o.idIntegration}/script/${o.getFieldsApp}`,{method:"POST",body:JSON.stringify({ns:e,app:t})});if(s.ok){const e=await s.json();if(e.success){const t=[...(l=[...e.body],l.filter((e=>["__id","__name","__status","__file","__createdAt"].includes(e.id)||!e.id.startsWith("__"))))];t.length>0&&t.forEach((e=>{i.push(lt(e,n))}))}}var l;return xe.set(!1),i}getModificatorStrings(){let e="",t=[];if(this._modificators.length>0)for(let e=0;e<this._modificators.length;e++){const n=this._modificators[e];if(!1===n.static&&n.arguments_description){if(n.arguments_description.filter((e=>e.required&&!e.value)).length>0)continue;let e=n.id;const i=n.arguments_description.map((e=>`'${e.name}'`)).join(", ");t.push(at(i,e,n.arguments_description.filter((e=>e.value)).map((e=>`'${e.value}'`)).join(", ")))}else t.push(n.id)}return t.length>0&&(e=`|${t.join("|")}`),e}getSampleStringElma(e=!1,t=!0,n=!0){let i=this.id,o="",s=this.parent,l="";const r=[];for(;s;){if(s){const e=st(s.id);Array.isArray(e)?(i=`${e[2]}.${i}`,r.unshift(e[2])):(i=`${s.id}.${i}`,r.unshift(s.id))}s=s.parent}return r.push(this.id),n&&(l=this.getModificatorStrings()),t?(o=`${r.join(".")}${l?`${l}`:""}`,e?o:`{{ ${o} }}`):(o=`${r.splice(1).join(".")}${l?`${l}`:""}`,e?o:`{{ ${o} }}`)}getSampleStringAmo(e=!1,t=!0,n=!0){let i="",o=this.parent,s="";const l=[],r=this.getSource();for(;o;)o&&l.unshift(o.id),o=o.parent;return l.push(this.id),n&&(s=this.getModificatorStrings()),this.single?(l.push("value"),t?(i=`${l.join(".")}${s}`,e?i:`{{ ${i} }}`):(i=`${r}.${this.id}.value${s}`,e?i:`{{ ${i} }}`)):(i=`{% for key, value in ${r}.${this.id}["values"].items() %} {{ value${s} }}{% endfor %}`,i)}getSampleString(e=!1,t=!0,n=!0){return"amoCRM"===this.parent.entity?this.getSampleStringAmo(e,t,n):this.getSampleStringElma(e,t,n)}isParentSingle(){let e=this.parent;for(;e;){if(e&&!1===e.single)return!1;e=e.parent}return!0}getId(){return"elma"===this.parent?.entity&&Array.isArray(st(this.id))?st(this.id)[2]:this.id}getSource(){let e="";const t=this.parent,n=t?.getPathToMain();if(n&&n.length>0)for(let t=1;t<n.length;t++){const i=n[t];e=i.single&&e?`${e}.${i.getId()}`:i.getId()}return e}}class nt{id="";name="";items=[];isOpen=!1;parent=void 0;entity="elma";type="SYS_COLLECTION";single=!0;level=0;_checked=!1;constructor(e,t,n,i=[],o=void 0,s="SYS_COLLECTION",l=!0,r=1){this.id=e,this.name=t,this.items=i,this.parent=o,this.entity=n,this.type=s,this.single=l,this.level=r}static allApps=[];static async getBaseStructure(e){if("elma"===e)try{const{elma:e}=A(be);nt.allApps=nt.allApps.filter((e=>"elma"!==e.entity)),xe.set(!0);const t=await fetch(`${e.url}api/extensions/${e.idIntegration}/script/${e.getStructureApp}`);if(t.ok){const e=(await t.json()).body;if(e&&e.length)for(let t=0;t<e.length;t++){const n=e[t],i=new nt(n.id,n.value,"elma");n.applications?.length>0&&n.applications.forEach((e=>{const t=new nt(e.id,e.value,"elma",[],i);t.level=i.level+1,i.items.push(t)})),nt.allApps.push(i)}}else console.error("Fetch error:",t.statusText);xe.set(!1)}catch(e){console.error("Error in getElmaStructure:",e),xe.set(!1)}else try{const{amo:e}=A(be);if(!e.id||!e.token||!e.url)return;xe.set(!0);const t=await dt({...e,essence:"leads"});await pt(500);const n=await dt({...e,essence:"contacts"});await pt(500);const i=await dt({...e,essence:"companies"}),o=new nt("amoCrm","aмо CRM","amoCRM");if(t.length>0){const e=new nt("custom_fields","Сделки","amoCRM",[],o,"SYS_COLLECTION",!0,2);o.items.push(e);for(let n=0;n<t.length;n++){const i=t[n];if("leads"===i.entity_type){const t=new tt(`${i.id}`,i.name,ut(i.type),!["multiselect","select","radiobutton"].includes(i.type),e,i.enums?i.enums.map((e=>({code:`${e.id}`,name:e.value}))):[]);e.items.push(t)}}}if(n.length>0){const e=new nt("contact","Контакты","amoCRM",[],o,"SYS_COLLECTION",!0,2),t=new nt("main_contact","Основной контакт","amoCRM",[],e,"SYS_COLLECTION",!0,3),i=new nt("contacts.contact","Контакты","amoCRM",[],e,"SYS_COLLECTION",!1,3);e.items=[i,t],o.items.push(e);for(let e=0;e<n.length;e++){const o=n[e];t.items.push(new tt(`custom_fields.${o.id}`,o.name,ut(o.type),!["multiselect","select","radiobutton"].includes(o.type),t,o.enums?o.enums.map((e=>({code:`${e.id}`,name:e.value}))):[])),i.items.push(new tt(`custom_fields.${o.id}`,o.name,ut(o.type),!["multiselect","select","radiobutton"].includes(o.type),i,o.enums?o.enums.map((e=>({code:`${e.id}`,name:e.value}))):[]))}}if(i.length>0){const e=new nt("company.custom_fields","Компании","amoCRM",[],o,"SYS_COLLECTION",!0,2);o.items.push(e);for(let t=0;t<i.length;t++){const n=i[t],o=new tt(`${n.id}`,n.name,ut(n.type),!["multiselect","select","radiobutton"].includes(n.type),e,n.enums?n.enums.map((e=>({code:`${e.id}`,name:e.value}))):[]);e.items.push(o)}}nt.allApps.push(o),xe.set(!1)}catch(e){console.error("Error in getAmoStructure:",e),xe.set(!1)}}async getItems(){if("elma"===this.entity){if(this.items.length>0)return this.items;if(this.parent){const e=st(this.id);if(3===e.length){xe.set(!0);const t=await tt.getFieldsFromApp(e[0],e[1],this);return xe.set(!1),this.items=[...t],this.items}const t=await tt.getFieldsFromApp(this.parent.id,this.id,this);return this.items=[...t],this.items}return[]}return this.items}isParentSingle(){let e=this.parent;for(;e;){if(e&&!1===e.single)return!1;e=e.parent}return!0}getId(){return"elma"===this.entity?Array.isArray(st(this.id))?st(this.id)[2]:this.id:Array.isArray(st(this.id))?st(this.id)[1]:this.id}getSampleString(){let e=this.getId(),t=this.parent;for(;t;){if(t){const n=st(t.id);e=Array.isArray(n)?`${n[2]}.${e}`:`${t.id}.${e}`}t=t.parent}return e}getPathToMain(){let e=[this];if(!this.parent)return e;let t=this.parent;for(e.unshift(t);t?.parent;)t=t.parent,e.unshift(t);return e}checked(){this._checked=this.items.filter((e=>e._checked)).length>0}getSource(e=!1){console.log(this);let t="";const n=this.parent;if("elma"===n?.entity){const e=n?.getPathToMain();if(e&&e.length>0)for(let n=1;n<e.length;n++){const i=e[n];t=i.single&&t?`${t}.${i.getId()}`:i.getId()}}return t}getStringForApp(){let e="";if("elma"===this.entity){const t=this.getSource(),n=this.getId(),i=this.items.filter((e=>e instanceof tt&&e._checked)).filter((e=>e instanceof tt)),o=this.items.filter((e=>e instanceof nt&&e.isOpen)).filter((e=>e instanceof nt));return(i?.length>0||o?.length>0)&&(this.single?(e=i.map((e=>`{{ ${t}.${n}.${e.getId()}${e.getModificatorStrings()} }}`)).join(" "),e=`${e} ${o.map((e=>e.getStringForApp())).join(" ")}`):e=` \n              {% for ${n}_value in ${t}.${n} %}\n                ${i.map((e=>`{{ ${n}_value.${e.getId()}${e.getModificatorStrings()} }}`)).join(" ")}\n                ${o.map((e=>e.getStringForApp())).join(" ")}\n              {% endfor %}`),e}{this.getSource();const t=Array.isArray(st(this.id))?st(this.id)[0]:this.id,n=this.getId(),i=this.items.filter((e=>e instanceof tt&&e._checked)).filter((e=>e instanceof tt)),o=this.items.filter((e=>e instanceof nt&&e.isOpen)).filter((e=>e instanceof nt));return(i?.length>0||o?.length>0)&&(this.single?(e=i.map((e=>`${e.getSampleString(!1,!1,!0)}`)).join(" "),e=`${e} ${o.map((e=>e.getStringForApp())).join(" ")}`):e=` \n              {% for ${n} in ${t} %}\n                ${i.map((e=>`${e.getSampleString(!1,!1,!0)}`)).join(" ")}\n                ${o.map((e=>e.getStringForApp())).join(" ")}\n              {% endfor %}`),e}}_getStringFor(){let e="";if("elma"===this.entity){const t=this.getPathToMain();console.log(t),e=t[1].getStringForApp()}else e=this.getPathToMain()[2].getStringForApp();return e}checkAll(){this.items.forEach((e=>{!1===Ie.includes(e.type)&&(e._checked=!0)}))}clearAll(){this.items.forEach((e=>{e._checked=!1}))}}const it=[{id:"STRING",value:"Строка"},{id:"ENUM",value:"Категория"},{id:"SYS_COLLECTION",value:"Приложение"},{id:"FLOAT",value:"Число"},{id:"BOOLEAN",value:"Да/Нет"},{id:"FILE",value:"Файл"},{id:"DATETIME",value:"Дата"},{id:"STATUS",value:"Статус"},{id:"SYS_USER",value:"Пользователь"},{id:"EMAIL",value:"Почта"},{id:"PHONE",value:"Телефон"},{id:"FULL_NAME",value:"ФИО"},{id:"JSON",value:"JSON"},{id:"MONEY",value:"Деньги"},{id:"TABLE",value:"Таблица"}];async function ot(e){return Word.run((async t=>{try{const n=t.document.getSelection();n.insertText(e,Word.InsertLocation.replace),n.getRange("After").select(),xe.set(!0),await t.sync(),xe.set(!1)}catch(e){console.log("Error: "+e),e instanceof OfficeExtension.Error&&console.log("Debug info: "+JSON.stringify(e.debugInfo)),xe.set(!1)}}))}function st(e){return e.includes(".")?e.split("."):e}function lt(e,t){switch(e.type){case"SYS_COLLECTION":return new nt(`${e.parents.ns}.${e.parents.code}.${e.id}`,e.name,"elma",[],t,e.type,e.single,t.level+1);case"TABLE":const n=e.context?e.context:[];if(n.length>0){const i=new nt(`${e.id}`,e.name,"elma",[],t,e.type,!1,t.level+1);for(let e=0;e<n.length;e++){const t=n[e];i.items.push(lt(t,i))}return i}return new tt(e.id,e.name,e.type,e.single,t,e.context);case"SYS_USER":const i=new nt(`${e.id}`,e.name,"elma",[],t,e.type,e.single,t.level+1);return i.items.push(new tt("name","ФИО","STRING",e.single,i,e.context)),i.items.push(new tt("positions","Должность","STRING",e.single,i,e.context)),i;case"STATUS":const o=new nt(`${e.id}`,e.name,"elma",[],t,e.type,e.single,t.level+1);return o.items.push(new tt("code","Код","STRING",e.single,o,e.context)),o.items.push(new tt("name","Имя","STRING",e.single,o,e.context)),o;default:return new tt(e.id,e.name,e.type,e.single,t,e.context)}}function rt(e=300){xe.set(!0),setTimeout((()=>{xe.set(!1)}),e)}function ct(e){rt(500),setTimeout((()=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})}),0)}function at(e,t,n){const i=t.indexOf(e);return-1!==i?t.slice(0,i)+n+t.slice(i+e.length):t}function ut(e){if(!["text","numeric","checkbox","select","multiselect","date","url","textarea","radiobutton","streetaddress","smart_address","birthday","legal_entity","date_time","tracking_data","file","monetary"].includes(e))return"STRING";switch(e){case"birthday":case"date":case"date_time":case"tracking_data":return"DATETIME";case"checkbox":return"BOOLEAN";case"file":return"FILE";case"legal_entity":case"smart_address":case"streetaddress":case"text":case"textarea":case"url":default:return"STRING";case"monetary":return"MONEY";case"multiselect":case"radiobutton":case"select":return"ENUM";case"numeric":return"FLOAT"}}async function dt(e){let t=[];if(e.id&&e.url&&e.token)try{let n="https://elma-dev.certit.ru/api/extensions/7c1dbebe-2d99-4939-965e-d1134b12b37c/script/requeststoamo";const i=await fetch(n,{method:"POST",body:JSON.stringify({id:e.id,url:`${e.url}api/v4/${e.essence}/custom_fields`,token:e.token,method:"GET",body:null})});if(i.ok){t=(await i.json()).body._embedded.custom_fields.filter((e=>!1===e.is_api_only))}}catch(e){console.log(e.message)}return t}function pt(e){return new Promise((t=>setTimeout(t,e)))}function mt(e){s(e,"svelte-15g5lt6",".setting-connect-container.svelte-15g5lt6{padding:10px}.setting-elma.svelte-15g5lt6{margin-bottom:15px}")}function ft(e){let t,n,i,s,a,u,p,m,f,g,h,v,b,w,x,y,k,_,I,S,N,M,C,A,j,E,L,T,O,z,D,q,F,P,Z,Y,H,U,R,J;function W(t){e[4](t)}let B={placeholder:"ID интеграции"};function V(t){e[5](t)}void 0!==e[0].elma.idIntegration&&(B.value=e[0].elma.idIntegration),a=new et({props:B}),G.push((()=>ue(a,"value",W)));let X={placeholder:"Ссылка (url)"};function K(t){e[6](t)}void 0!==e[0].elma.url&&(X.value=e[0].elma.url),m=new et({props:X}),G.push((()=>ue(m,"value",V)));let ee={placeholder:"Функция получения Структуры (getStructureApp)"};function te(t){e[7](t)}void 0!==e[0].elma.getStructureApp&&(ee.value=e[0].elma.getStructureApp),h=new et({props:ee}),G.push((()=>ue(h,"value",K)));let ne={placeholder:"Функция получения Полей (getFieldsApp)"};function ie(t){e[8](t)}void 0!==e[0].elma.getFieldsApp&&(ne.value=e[0].elma.getFieldsApp),w=new et({props:ne}),G.push((()=>ue(w,"value",te))),k=new Te({props:{clickHandler:e[1],caption:"Перейти"}});let le={placeholder:"ID интеграции"};function re(t){e[9](t)}void 0!==e[0].amo.id&&(le.value=e[0].amo.id),M=new et({props:le}),G.push((()=>ue(M,"value",ie)));let ce={placeholder:"Ссылка (url)"};function ae(t){e[10](t)}void 0!==e[0].amo.url&&(ce.value=e[0].amo.url),j=new et({props:ce}),G.push((()=>ue(j,"value",re)));let fe={placeholder:"Токен"};function ge(t){e[11](t)}void 0!==e[0].amo.token&&(fe.value=e[0].amo.token),T=new et({props:fe}),G.push((()=>ue(T,"value",ae))),D=new Te({props:{clickHandler:e[3],caption:"Проверить"}});let he={placeholder:"Ссылка (url)"};return void 0!==e[0].cd.url&&(he.value=e[0].cd.url),Y=new et({props:he}),G.push((()=>ue(Y,"value",ge))),R=new Te({props:{clickHandler:e[2],caption:"Проверить"}}),{c(){t=c("div"),n=c("div"),i=c("h2"),i.textContent="Настройки соединения Elma",s=d(),de(a.$$.fragment),p=d(),de(m.$$.fragment),g=d(),de(h.$$.fragment),b=d(),de(w.$$.fragment),y=d(),de(k.$$.fragment),_=d(),I=c("div"),S=c("h2"),S.textContent="Настройки соединения amoCrm",N=d(),de(M.$$.fragment),A=d(),de(j.$$.fragment),L=d(),de(T.$$.fragment),z=d(),de(D.$$.fragment),q=d(),F=c("div"),P=c("h2"),P.textContent="Настройки Центр Док",Z=d(),de(Y.$$.fragment),U=d(),de(R.$$.fragment),$(n,"class","setting-elma svelte-15g5lt6"),$(I,"class","setting-amo"),$(F,"class","setting-center-doc"),$(t,"class","setting-connect-container svelte-15g5lt6")},m(e,r){l(e,t,r),o(t,n),o(n,i),o(n,s),pe(a,n,null),o(n,p),pe(m,n,null),o(n,g),pe(h,n,null),o(n,b),pe(w,n,null),o(n,y),pe(k,n,null),o(t,_),o(t,I),o(I,S),o(I,N),pe(M,I,null),o(I,A),pe(j,I,null),o(I,L),pe(T,I,null),o(I,z),pe(D,I,null),o(t,q),o(t,F),o(F,P),o(F,Z),pe(Y,F,null),o(F,U),pe(R,F,null),J=!0},p(e,[t]){const n={};!u&&1&t&&(u=!0,n.value=e[0].elma.idIntegration,Q((()=>u=!1))),a.$set(n);const i={};!f&&1&t&&(f=!0,i.value=e[0].elma.url,Q((()=>f=!1))),m.$set(i);const o={};!v&&1&t&&(v=!0,o.value=e[0].elma.getStructureApp,Q((()=>v=!1))),h.$set(o);const s={};!x&&1&t&&(x=!0,s.value=e[0].elma.getFieldsApp,Q((()=>x=!1))),w.$set(s);const l={};!C&&1&t&&(C=!0,l.value=e[0].amo.id,Q((()=>C=!1))),M.$set(l);const r={};!E&&1&t&&(E=!0,r.value=e[0].amo.url,Q((()=>E=!1))),j.$set(r);const c={};!O&&1&t&&(O=!0,c.value=e[0].amo.token,Q((()=>O=!1))),T.$set(c);const d={};!H&&1&t&&(H=!0,d.value=e[0].cd.url,Q((()=>H=!1))),Y.$set(d)},i(e){J||(oe(a.$$.fragment,e),oe(m.$$.fragment,e),oe(h.$$.fragment,e),oe(w.$$.fragment,e),oe(k.$$.fragment,e),oe(M.$$.fragment,e),oe(j.$$.fragment,e),oe(T.$$.fragment,e),oe(D.$$.fragment,e),oe(Y.$$.fragment,e),oe(R.$$.fragment,e),J=!0)},o(e){se(a.$$.fragment,e),se(m.$$.fragment,e),se(h.$$.fragment,e),se(w.$$.fragment,e),se(k.$$.fragment,e),se(M.$$.fragment,e),se(j.$$.fragment,e),se(T.$$.fragment,e),se(D.$$.fragment,e),se(Y.$$.fragment,e),se(R.$$.fragment,e),J=!1},d(e){e&&r(t),me(a),me(m),me(h),me(w),me(k),me(M),me(j),me(T),me(D),me(Y),me(R)}}}function gt(e,t,n){let i;return j(e,be,(e=>n(0,i=e))),D((()=>{rt()})),[i,function(){T(be,i.elma.getFieldsApp="getFieldsApp",i),T(be,i.elma.getStructureApp="getStructureApp",i),we.set("elmaStrings")},async function(){we.set("modifiers")},function(){T(be,i.amo.url="https://certitdev.amocrm.ru/",i),T(be,i.amo.id="a12ef9d4-47d7-4752-b6b6-531ac9359813",i),T(be,i.amo.token="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6Ijc5NTRkNzk5N2Y3ZTA3N2QxNjY4YmM5NTAxZmUyYzNjYzM1MGNmOGEzNmY2ZGNhOTU5OTFiYWI0YTczOWVlZTEwYjIxY2JlNzkyM2NiY2YwIn0.eyJhdWQiOiJhMTJlZjlkNC00N2Q3LTQ3NTItYjZiNi01MzFhYzkzNTk4MTMiLCJqdGkiOiI3OTU0ZDc5OTdmN2UwNzdkMTY2OGJjOTUwMWZlMmMzY2MzNTBjZjhhMzZmNmRjYTk1OTkxYmFiNGE3MzllZWUxMGIyMWNiZTc5MjNjYmNmMCIsImlhdCI6MTczMTY2MTAzNSwibmJmIjoxNzMxNjYxMDM1LCJleHAiOjE3MzQyMjA4MDAsInN1YiI6IjY2NzczMSIsImdyYW50X3R5cGUiOiIiLCJhY2NvdW50X2lkIjo5OTgwNDE4LCJiYXNlX2RvbWFpbiI6ImFtb2NybS5ydSIsInZlcnNpb24iOjIsInNjb3BlcyI6WyJjcm0iLCJmaWxlcyIsImZpbGVzX2RlbGV0ZSIsIm5vdGlmaWNhdGlvbnMiLCJwdXNoX25vdGlmaWNhdGlvbnMiXSwiaGFzaF91dWlkIjoiM2IwZTc4NjAtNzRiYy00MzEzLTk2NGUtNDdmNGQxY2ZjYmIxIiwiYXBpX2RvbWFpbiI6ImFwaS1iLmFtb2NybS5ydSJ9.kPChTE884fZjWcNS4lHEO4pIJ51FVI7885jFaPCkfFMLoFZn6sEB0vpXXmaDVKPooYHVhGNnody5L9n3FxJhTT9UxNT5Al_BGlgOoWvQIPrLN_OHR-N6EQmHyJzaVB7pDmKpv-84S4jHe3h9hTqPkjnrKW_unOGQF-2gRXonLUqehMA4tzqeEt53NSxUzygsZcPdrwff87GB8JIUWh_OLb5H8lnjCadKEp-3pi6BKeREBtO_Mb6Yw2KkkloZxhyXMjpbB-vWSZ9yzJWYoL2DVqEYsIPGTj8_-0oj69bHP6XAppl_O9H1PILoJgCtGVLWoaXcFHQcxB4bFK-QcQ5pJw",i),we.set("amoCrmStrings")},function(t){e.$$.not_equal(i.elma.idIntegration,t)&&(i.elma.idIntegration=t,be.set(i))},function(t){e.$$.not_equal(i.elma.url,t)&&(i.elma.url=t,be.set(i))},function(t){e.$$.not_equal(i.elma.getStructureApp,t)&&(i.elma.getStructureApp=t,be.set(i))},function(t){e.$$.not_equal(i.elma.getFieldsApp,t)&&(i.elma.getFieldsApp=t,be.set(i))},function(t){e.$$.not_equal(i.amo.id,t)&&(i.amo.id=t,be.set(i))},function(t){e.$$.not_equal(i.amo.url,t)&&(i.amo.url=t,be.set(i))},function(t){e.$$.not_equal(i.amo.token,t)&&(i.amo.token=t,be.set(i))},function(t){e.$$.not_equal(i.cd.url,t)&&(i.cd.url=t,be.set(i))}]}var ht=class extends he{constructor(e){super(),fe(this,e,gt,ft,M,{},mt)}};class $t{constructor(e,t,n,i,o){this.path=e,this.condition=t,this.value=n,this.betweenConditions=o||"end",this.field=i||void 0}getConditionFromField(){const e=this.field?.type;switch(e){case"FLOAT":case"MONEY":return Me.filter((e=>e.type.includes(2)));case"STRING":case"EMAIL":case"PHONE":return Me.filter((e=>e.type.includes(1)));case"ENUM":return Me.filter((e=>e.type.includes(4)));case"BOOLEAN":return Me.filter((e=>e.type.includes(5)));case"DATETIME":return Me.filter((e=>e.type.includes(3)))}return[]}getNumberFromTypeField(){const e=this.field?.type;switch(e){case"FLOAT":case"MONEY":return _e.number;case"BOOLEAN":return _e.boolean;case"EMAIL":case"PHONE":case"STRING":default:return _e.string;case"DATETIME":return _e.date;case"ENUM":return _e.enum}}getContextField(){return this.field?.context.length?"elma"===this.field?.parent.entity?this.field?.context.map((e=>({id:e.name,value:e.name}))):this.field?.context.map((e=>({id:e.code,value:e.name}))):[]}clearField(){this.field=void 0,this.condition="",this.value=""}getConditionObjectElma(){const e=this.condition;let t="",n="",i="",o=`"${this.value}"`;if(this.field){const e=this.field;t=e.isParentSingle()?e.getSampleString(!0,!1,!1):`${e.getSource()}_value.${this.field.getId()}`}switch(e){case"Equals":default:n="==";break;case"GreateOrEqual":n=">=";break;case"Less":n="<";break;case"LessOrEqual":n="<=";break;case"More":n=">";break;case"NoEquals":n="!=";break;case"None":n="not in",o=`[${this.value.map((e=>`"${e}"`)).join(", ")}]`;break;case"OneOf":n="in",o=`[${this.value.map((e=>`"${e}"`)).join(", ")}]`}return i=`${t} ${n} ${o}`,{fieldPath:t,conditionIcon:n,value:this.value,betweenConditions:this.betweenConditions,conditionString:i}}getConditionObjectAmo(){const e=this.condition;let t="",n="",i="",o=`"${this.value}"`;if(this.field){const e=this.field;t=`${e.parent.getId()}.${this.field.getId()}`}switch(e){case"Equals":default:n="==",i=`${t} ${n} ${o}`;break;case"GreateOrEqual":n=">=",i=`${t} ${n} ${o}`;break;case"Less":n="<",i=`${t} ${n} ${o}`;break;case"LessOrEqual":n="<=",i=`${t} ${n} ${o}`;break;case"More":n=">",i=`${t} ${n} ${o}`;break;case"NoEquals":n="!=",i=`${t} ${n} ${o}`;break;case"None":n="not in",o=`${this.value.map((e=>`${e} ${n} ${t}['values']`)).join(" and ")}`,i=`not ${t} or (${o})`;break;case"OneOf":n="in",o=`${this.value.map((e=>`${e} ${n} ${t}['values']`)).join(" or ")}`,i=`${t} and (${o})`}return{fieldPath:t,conditionIcon:n,value:this.value,betweenConditions:this.betweenConditions,conditionString:i}}getConditionObject(){return this.field?"elma"===this.field.parent.entity?this.getConditionObjectElma():this.getConditionObjectAmo():this.getConditionObjectElma()}}class vt{static conditions=[];static getAppitems(e){return e instanceof nt?e.items.map((e=>({id:e,value:e.name}))):[]}static createNewConditions(e,t,n){const i=vt.conditions.find((t=>t.mainApp.id===e.id));i?(i.conditions.push(new $t(t,"","",n)),i.conditions.forEach(((e,t)=>{"end"===e.betweenConditions&&t!==i.conditions.length-1&&(e.betweenConditions="and")}))):vt.conditions.push({mainApp:e,conditions:[new $t(t,"","",n)]})}static deleteConditionItems(e,t){const n=vt.conditions.find((t=>t.mainApp.id===e.id));n&&(n.conditions=n?.conditions.filter(((e,n)=>n!==t&&e)),n.conditions.length&&(n.conditions[n.conditions.length-1].betweenConditions="end"))}static async selectFieldFromApp(e){return e instanceof nt&&0===e.items.length?(await e.getItems(),e.items):[]}static async getConditionString(e){let t="";const n=vt.conditions.filter((t=>t.mainApp.id===e.id));return n&&n.forEach((e=>{e.conditions.map((e=>e.getConditionObject())).forEach((e=>{t=`${t} ${e.conditionString}`,"end"!==e.betweenConditions&&(t="elif"===e.betweenConditions?`${t} %}введите свой текст{% ${e.betweenConditions}`:`${t} ${e.betweenConditions}`)}))})),`{% if ${t} %}Введите необходимый текст{% endif %}`}static validateConditions(e){let t=!0;const n=vt.conditions.filter((t=>t.mainApp.id===e.id));return n&&n.forEach((e=>{1!==e.conditions.map((e=>e.betweenConditions)).filter((e=>"end"===e)).length&&(t=!1)})),t}}function bt(e){s(e,"svelte-16o16ew",".wrapper.svelte-16o16ew{width:95%;margin:0;padding:0;position:relative;background-color:white;--border-color:#dadadb;font-size:15px;line-height:20px}input.svelte-16o16ew{border-radius:0.4rem;border:1px solid #d9d9d9;display:block;width:100%;padding:10px;background-color:#fff;background-image:none;background-clip:padding-box;color:#252525;line-height:normal;transition:background 0.15s linear,\r\n      box-shadow 0.15s linear;outline:none}.collapse-state-btn.svelte-16o16ew{position:absolute;right:15px;width:1rem;height:1rem;transform:rotate(45deg) scale(0.65);cursor:text;--collapse-state-btn-border-color:#303030}.clear-state-btn.svelte-16o16ew{position:absolute;bottom:14px;right:17px;width:1rem;height:1rem;cursor:pointer;color:red}.collapse-state-btn.opened.svelte-16o16ew{top:14px;right:0px;border-top:1px solid var(--collapse-state-btn-border-color);border-left:1px solid var(--collapse-state-btn-border-color)}.collapse-state-btn.closed.svelte-16o16ew{top:7px;right:0px;border-right:1px solid var(--collapse-state-btn-border-color);border-bottom:1px solid var(--collapse-state-btn-border-color)}.suggests-list.svelte-16o16ew{position:absolute;left:0;width:100%;border:1px solid var(--border-color);border-radius:5px;list-style:none;user-select:none;cursor:pointer;z-index:99999;background-color:white;max-height:200px;overflow:auto}.suggests-list.svelte-16o16ew::-webkit-scrollbar{width:6px;background-color:transparent}.suggests-list.svelte-16o16ew::-webkit-scrollbar-track{background-color:transparent}.suggests-list.svelte-16o16ew::-webkit-scrollbar-thumb{background-color:rgb(161, 161, 161);border-top-left-radius:5px;border-bottom-left-radius:5px}li.svelte-16o16ew{padding:5px}li.svelte-16o16ew:hover{background-color:rgb(200, 200, 200)}li.hide.svelte-16o16ew{display:none}")}function wt(e,t,n){const i=e.slice();return i[22]=t[n],i}function xt(e){let t,n,i;return{c(){t=c("div"),t.textContent="X",$(t,"class","clear-state-btn svelte-16o16ew")},m(o,s){l(o,t,s),n||(i=m(t,"click",e[9]),n=!0)},p:k,d(e){e&&r(t),n=!1,i()}}}function yt(e){let t,n=[],i=new Map,o=le(e[4]);const s=e=>e[22]._key;for(let t=0;t<o.length;t+=1){let l=wt(e,o,t),r=s(l);i.set(r,n[t]=kt(r,l))}return{c(){t=c("ul");for(let e=0;e<n.length;e+=1)n[e].c();$(t,"class","suggests-list svelte-16o16ew")},m(e,i){l(e,t,i);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,l){1040&l&&(o=le(e[4]),n=ae(n,l,s,1,e,o,i,t,re,kt,null,wt))},d(e){e&&r(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function kt(e,t){let n,i,s,a,p,f=t[22].value+"";function g(){return t[16](t[22])}return{key:e,first:null,c(){n=c("li"),i=u(f),s=d(),$(n,"class","svelte-16o16ew"),y(n,"hide",t[22]._hide),this.first=n},m(e,t){l(e,n,t),o(n,i),o(n,s),a||(p=m(n,"click",g),a=!0)},p(e,o){t=e,16&o&&f!==(f=t[22].value+"")&&b(i,f),16&o&&y(n,"hide",t[22]._hide)},d(e){e&&r(n),a=!1,p()}}}function _t(e){let t,n,i,s,a,u,p,f,g,h,v,b=e[0]&&xt(e),x=e[6]&&!e[7]&&yt(e);return{c(){t=d(),n=c("div"),i=c("input"),s=d(),b&&b.c(),a=d(),u=c("div"),f=d(),x&&x.c(),$(i,"placeholder",e[1]),i.disabled=e[3],$(i,"type","text"),$(i,"class","svelte-16o16ew"),$(u,"class",p="collapse-state-btn "+(e[6]?"opened":"closed")+" svelte-16o16ew"),$(n,"class",g="wrapper "+e[2]+" svelte-16o16ew")},m(r,c){l(r,t,c),l(r,n,c),o(n,i),w(i,e[5]),o(n,s),b&&b.m(n,null),o(n,a),o(n,u),o(n,f),x&&x.m(n,null),e[17](n),h||(v=[m(document.body,"click",e[11]),m(i,"focusin",e[12]),m(i,"input",e[15]),m(u,"click",e[12])],h=!0)},p(e,[t]){2&t&&$(i,"placeholder",e[1]),8&t&&(i.disabled=e[3]),32&t&&i.value!==e[5]&&w(i,e[5]),e[0]?b?b.p(e,t):(b=xt(e),b.c(),b.m(n,a)):b&&(b.d(1),b=null),64&t&&p!==(p="collapse-state-btn "+(e[6]?"opened":"closed")+" svelte-16o16ew")&&$(u,"class",p),e[6]&&!e[7]?x?x.p(e,t):(x=yt(e),x.c(),x.m(n,null)):x&&(x.d(1),x=null),4&t&&g!==(g="wrapper "+e[2]+" svelte-16o16ew")&&$(n,"class",g)},i:k,o:k,d(i){i&&(r(t),r(n)),b&&b.d(),x&&x.d(),e[17](null),h=!1,S(v)}}}function It(e,t,n){let i,{items:o=[]}=t,{selected:s}=t,{placeholder:l=""}=t,{classes:r=""}=t,{onSelect:c=e=>{}}=t,{disabled:a=!1}=t,u=[],d=!1,p=s?o.find((e=>e.id==s))?.value??"":"",m=p,f=!1;function g(e){n(6,d=!1),n(0,s=e._original.id),n(5,p=e.value),m=e.value,c&&"function"==typeof c&&c(e._original)}return e.$$set=e=>{"items"in e&&n(13,o=e.items),"selected"in e&&n(0,s=e.selected),"placeholder"in e&&n(1,l=e.placeholder),"classes"in e&&n(2,r=e.classes),"onSelect"in e&&n(14,c=e.onSelect),"disabled"in e&&n(3,a=e.disabled)},e.$$.update=()=>{1&e.$$.dirty&&(void 0===s?(n(5,p=""),m=""):(n(5,p=o.find((e=>e.id==s))?.value??""),m=p)),8192&e.$$.dirty&&function(e){if("string"!=typeof p)throw"Query должен быть строкой!";n(4,u=e.map((e=>({...e,_key:crypto.randomUUID(),_hide:p.length>0&&!e.value.toLowerCase().includes(p),_original:e}))))}(o),48&e.$$.dirty&&function(e){if(n(7,f=!0),"string"!=typeof e)throw"Query должен быть строкой!";u.forEach(((t,i)=>{const o=!(e.length>0)||t.value.toLowerCase().includes(e?.toLowerCase());n(7,f=f&&!o);const s=t._hide;t._hide=!o,s!==t._hide&&n(4,u[i]={...t},u)})),n(4,u=[...u])}(p)},[s,l,r,a,u,p,d,f,i,function(){n(0,s=void 0),c(s)},g,function(e){a||e.target.closest(".wrapper")!==i&&(n(5,p=m),n(6,d=!1))},function(e){i.firstChild.focus(),n(5,p=""),n(6,d=!0)},o,c,function(){p=this.value,n(5,p)},e=>g(e),function(e){G[e?"unshift":"push"]((()=>{i=e,n(8,i)}))}]}var St=class extends he{constructor(e){super(),fe(this,e,It,_t,M,{items:13,selected:0,placeholder:1,classes:2,onSelect:14,disabled:3},bt)}};function Nt(e){s(e,"svelte-1o8mkvb",".button-container.svelte-1o8mkvb{position:absolute;top:-44px;right:9px;cursor:pointer}.close.svelte-1o8mkvb{bottom:1px}.search-container.svelte-1o8mkvb{position:relative}.search-body.svelte-1o8mkvb{padding:3px;border:1px solid rgb(218, 215, 215);border-radius:3px;margin-bottom:5px}.close-panel.svelte-1o8mkvb{border:0px;padding:0px}")}function Mt(e){let t,n,i,s,u,p,f,g,h,v=e[2]&&Ct(e);return{c(){t=c("div"),n=c("div"),i=a("svg"),s=a("circle"),u=a("line"),p=d(),v&&v.c(),$(s,"cx","10"),$(s,"cy","10"),$(s,"r","7"),$(u,"x1","21"),$(u,"y1","21"),$(u,"x2","15"),$(u,"y2","15"),$(i,"xmlns","http://www.w3.org/2000/svg"),$(i,"xmlns:xlink","http://www.w3.org/1999/xlink"),$(i,"version","1.1"),$(i,"width","20"),$(i,"height","20"),$(i,"viewBox","0 0 24 24"),$(i,"fill","none"),$(i,"stroke",e[4]),$(i,"stroke-width","2"),$(i,"stroke-linecap","round"),$(i,"stroke-linejoin","round"),$(n,"class","button-container svelte-1o8mkvb"),y(n,"close",!e[2]),$(t,"class","search-container svelte-1o8mkvb"),y(t,"close-panel",!e[2])},m(r,c){l(r,t,c),o(t,n),o(n,i),o(i,s),o(i,u),o(t,p),v&&v.m(t,null),f=!0,g||(h=m(n,"click",e[5]),g=!0)},p(e,o){(!f||16&o)&&$(i,"stroke",e[4]),(!f||4&o)&&y(n,"close",!e[2]),e[2]?v?(v.p(e,o),4&o&&oe(v,1)):(v=Ct(e),v.c(),oe(v,1),v.m(t,null)):v&&(ne(),se(v,1,1,(()=>{v=null})),ie()),(!f||4&o)&&y(t,"close-panel",!e[2])},i(e){f||(oe(v),f=!0)},o(e){se(v),f=!1},d(e){e&&r(t),v&&v.d(),g=!1,h()}}}function Ct(e){let t,n,i,s,a,u=e[7]().length>1;function p(t){e[9](t)}let m={inputHndlr:e[6],placeholder:"Поиск по полям..."};void 0!==e[0]&&(m.value=e[0]),n=new et({props:m}),G.push((()=>ue(n,"value",p)));let f=u&&function(e){let t,n,i;function o(t){e[10](t)}let s={items:e[7](),onSelect:e[6],placeholder:"Выберите тип поля..."};return void 0!==e[3]&&(s.selected=e[3]),t=new St({props:s}),G.push((()=>ue(t,"selected",o))),{c(){de(t.$$.fragment)},m(e,n){pe(t,e,n),i=!0},p(e,i){const o={};!n&&8&i&&(n=!0,o.selected=e[3],Q((()=>n=!1))),t.$set(o)},i(e){i||(oe(t.$$.fragment,e),i=!0)},o(e){se(t.$$.fragment,e),i=!1},d(e){me(t,e)}}}(e);return{c(){t=c("div"),de(n.$$.fragment),s=d(),f&&f.c(),$(t,"class","search-body svelte-1o8mkvb")},m(e,i){l(e,t,i),pe(n,t,null),o(t,s),f&&f.m(t,null),a=!0},p(e,t){const o={};!i&&1&t&&(i=!0,o.value=e[0],Q((()=>i=!1))),n.$set(o),u&&f.p(e,t)},i(e){a||(oe(n.$$.fragment,e),oe(f),a=!0)},o(e){se(n.$$.fragment,e),se(f),a=!1},d(e){e&&r(t),me(n),f&&f.d()}}}function At(e){let t,n,i=e[1].length>0&&Mt(e);return{c(){i&&i.c(),t=p()},m(e,o){i&&i.m(e,o),l(e,t,o),n=!0},p(e,[n]){e[1].length>0?i?(i.p(e,n),2&n&&oe(i,1)):(i=Mt(e),i.c(),oe(i,1),i.m(t.parentNode,t)):i&&(ne(),se(i,1,1,(()=>{i=null})),ie())},i(e){n||(oe(i),n=!0)},o(e){se(i),n=!1},d(e){e&&r(t),i&&i.d(e)}}}function jt(e,t,n){let i,{input:o=[]}=t,{output:s=[]}=t,{searchString:l=""}=t,r=o.length>5,c=o.length>5?"white":"black";return D((()=>{})),e.$$set=e=>{"input"in e&&n(1,o=e.input),"output"in e&&n(8,s=e.output),"searchString"in e&&n(0,l=e.searchString)},[l,o,r,i,c,function(){n(2,r=!r),n(4,c=r?"white":"black")},async function(){let e=o;i&&(e=o.filter((e=>e.type===i))),l&&(e=e.filter((e=>e.name.toUpperCase().includes(l.toUpperCase())))),n(8,s=[]),await(R(),H),n(8,s=[...e])},function(){let e=[];const t=o.map((e=>e.type));return e=[...it.filter((e=>t.includes(e.id)))],e},s,function(e){l=e,n(0,l)},function(e){i=e,n(3,i)}]}var Et=class extends he{constructor(e){super(),fe(this,e,jt,At,M,{input:1,output:8,searchString:0},Nt)}};function Lt(e){s(e,"svelte-dhayk1",".entity_container.svelte-dhayk1{margin-left:5px;padding-bottom:5px}.app-item-container.svelte-dhayk1{margin-left:10px}.button-control-containrt.svelte-dhayk1{margin-left:10px;padding:5px 0px 5px 0px}")}function Tt(e,t,n){const i=e.slice();return i[11]=t[n],i[12]=t,i[13]=n,i}function Ot(e){let t,n,i,s,a,u;return{c(){t=c("div"),n=c("button"),n.textContent="Выбрать все",i=d(),s=c("button"),s.textContent="Убрать все",$(t,"class","button-control-containrt svelte-dhayk1")},m(r,c){l(r,t,c),o(t,n),o(t,i),o(t,s),a||(u=[m(n,"click",e[5]),m(s,"click",e[6])],a=!0)},p:k,d(e){e&&r(t),a=!1,S(u)}}}function zt(e,t){let n,i,o,s;function a(e){t[10](e,t[11],t[12],t[13])}let u={level:t[1],menuItems:t[3]};return void 0!==t[11]&&(u.appItem=t[11]),i=new on({props:u}),G.push((()=>ue(i,"appItem",a))),{key:e,first:null,c(){n=c("div"),de(i.$$.fragment),$(n,"class","app-item-container svelte-dhayk1"),this.first=n},m(e,t){l(e,n,t),pe(i,n,null),s=!0},p(e,n){t=e;const s={};2&n&&(s.level=t[1]),8&n&&(s.menuItems=t[3]),!o&&16&n&&(o=!0,s.appItem=t[11],Q((()=>o=!1))),i.$set(s)},i(e){s||(oe(i.$$.fragment,e),s=!0)},o(e){se(i.$$.fragment,e),s=!1},d(e){e&&r(n),me(i)}}}function Dt(e){let t,n,i,s,a,u,p,f;return{c(){t=c("div"),n=c("button"),n.textContent="Вставить шаблонную строку",i=d(),s=c("button"),s.textContent="Выбрать все",a=d(),u=c("button"),u.textContent="Убрать все",$(t,"class","button-control-containrt svelte-dhayk1")},m(r,c){l(r,t,c),o(t,n),o(t,i),o(t,s),o(t,a),o(t,u),p||(f=[m(n,"click",e[7]),m(s,"click",e[5]),m(u,"click",e[6])],p=!0)},p:k,d(e){e&&r(t),p=!1,S(f)}}}function qt(e){let t,n,i,s,a,u,p,m,f=!1===e[2]?.isParentSingle()||!1===e[2]?.single,g=[],h=new Map,v=!1===e[2]?.isParentSingle()||!1===e[2]?.single;function b(t){e[8](t)}function w(t){e[9](t)}let x={};void 0!==e[0]&&(x.input=e[0]),void 0!==e[4]&&(x.output=e[4]),n=new Et({props:x}),G.push((()=>ue(n,"input",b))),G.push((()=>ue(n,"output",w)));let y=f&&Ot(e),k=le(e[4]);const _=e=>e[13];for(let t=0;t<k.length;t+=1){let n=Tt(e,k,t),i=_(n);h.set(i,g[t]=zt(i,n))}let I=v&&Dt(e);return{c(){t=c("div"),de(n.$$.fragment),a=d(),y&&y.c(),u=d();for(let e=0;e<g.length;e+=1)g[e].c();p=d(),I&&I.c(),$(t,"class","entity_container svelte-dhayk1")},m(e,i){l(e,t,i),pe(n,t,null),o(t,a),y&&y.m(t,null),o(t,u);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(t,null);o(t,p),I&&I.m(t,null),m=!0},p(e,[o]){const l={};!i&&1&o&&(i=!0,l.input=e[0],Q((()=>i=!1))),!s&&16&o&&(s=!0,l.output=e[4],Q((()=>s=!1))),n.$set(l),4&o&&(f=!1===e[2]?.isParentSingle()||!1===e[2]?.single),f?y?y.p(e,o):(y=Ot(e),y.c(),y.m(t,u)):y&&(y.d(1),y=null),26&o&&(k=le(e[4]),ne(),g=ae(g,o,_,1,e,k,h,t,ce,zt,p,Tt),ie()),4&o&&(v=!1===e[2]?.isParentSingle()||!1===e[2]?.single),v?I?I.p(e,o):(I=Dt(e),I.c(),I.m(t,null)):I&&(I.d(1),I=null)},i(e){if(!m){oe(n.$$.fragment,e);for(let e=0;e<k.length;e+=1)oe(g[e]);m=!0}},o(e){se(n.$$.fragment,e);for(let e=0;e<g.length;e+=1)se(g[e]);m=!1},d(e){e&&r(t),me(n),y&&y.d();for(let e=0;e<g.length;e+=1)g[e].d();I&&I.d()}}}function Ft(e,t,n){let{mainEntity:i=[]}=t,{level:o=1}=t,{parent:s}=t,{menuItems:l=[]}=t,r=i;return e.$$set=e=>{"mainEntity"in e&&n(0,i=e.mainEntity),"level"in e&&n(1,o=e.level),"parent"in e&&n(2,s=e.parent),"menuItems"in e&&n(3,l=e.menuItems)},[i,o,s,l,r,function(){s?.checkAll(),n(4,r)},function(){s?.clearAll(),n(4,r)},async function(){const e=s?._getStringFor();e&&ot(e)},function(e){i=e,n(0,i)},function(e){r=e,n(4,r)},function(e,t,i,o){i[o]=e,n(4,r)}]}var Pt=class extends he{constructor(e){super(),fe(this,e,Ft,qt,M,{mainEntity:0,level:1,parent:2,menuItems:3},Lt)}};function Gt(e){s(e,"svelte-jh3m29",".burger.svelte-jh3m29.svelte-jh3m29{cursor:pointer;width:15px;height:13px;display:flex;flex-direction:column;justify-content:space-between;padding:5px}.menu-burger.svelte-jh3m29.svelte-jh3m29{position:absolute;right:50px;padding:5px 10px 5px 10px;background-color:#918e8e;border-radius:5px;z-index:99999}.line.svelte-jh3m29.svelte-jh3m29{background-color:#918e8e;height:3px;transition:all 0.3s ease}.open.svelte-jh3m29 .line1.svelte-jh3m29{transform:rotate(45deg) translate(5px, 5px)}.my-item-li.svelte-jh3m29.svelte-jh3m29{transition:all 0.3s ease;list-style-type:none;padding:10px 15px}.my-item-li.svelte-jh3m29.svelte-jh3m29:hover{color:white;cursor:pointer;background-color:#a59d9d}.open.svelte-jh3m29 .line2.svelte-jh3m29{opacity:0}.open.svelte-jh3m29 .line3.svelte-jh3m29{transform:rotate(-45deg) translate(5px, -5px)}")}function Zt(e,t,n){const i=e.slice();return i[7]=t[n],i[9]=n,i}function Yt(e){let t,n,i,o,s,a=e[1]&&Ht(e);return{c(){t=c("div"),t.innerHTML='<div class="line line1 svelte-jh3m29"></div> <div class="line line2 svelte-jh3m29"></div> <div class="line line3 svelte-jh3m29"></div>',n=d(),a&&a.c(),i=p(),$(t,"class","burger svelte-jh3m29"),y(t,"open",e[1])},m(r,c){l(r,t,c),l(r,n,c),a&&a.m(r,c),l(r,i,c),o||(s=m(t,"click",e[2]),o=!0)},p(e,n){2&n&&y(t,"open",e[1]),e[1]?a?a.p(e,n):(a=Ht(e),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},d(e){e&&(r(t),r(n),r(i)),a&&a.d(e),o=!1,s()}}}function Ht(e){let t,n,i=[],s=new Map,a=le(e[0]);const u=e=>e[9];for(let t=0;t<a.length;t+=1){let n=Zt(e,a,t),o=u(n);s.set(o,i[t]=Ut(o,n))}return{c(){t=c("div"),n=c("ul");for(let e=0;e<i.length;e+=1)i[e].c();$(t,"class","menu-burger svelte-jh3m29")},m(e,s){l(e,t,s),o(t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(n,null)},p(e,t){9&t&&(a=le(e[0]),i=ae(i,t,u,1,e,a,s,n,re,Ut,null,Zt))},d(e){e&&r(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function Ut(e,t){let n,i,s,a,p,f,g=t[7].value+"";function h(){return t[5](t[9])}return{key:e,first:null,c(){n=c("li"),i=c("div"),s=u(g),a=d(),$(n,"class","my-item-li svelte-jh3m29"),this.first=n},m(e,t){l(e,n,t),o(n,i),o(i,s),o(n,a),p||(f=m(i,"click",h),p=!0)},p(e,n){t=e,1&n&&g!==(g=t[7].value+"")&&b(s,g)},d(e){e&&r(n),p=!1,f()}}}function Rt(e){let t,n=e[0]?.length&&Yt(e);return{c(){n&&n.c(),t=p()},m(e,i){n&&n.m(e,i),l(e,t,i)},p(e,[i]){e[0]?.length?n?n.p(e,i):(n=Yt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:k,o:k,d(e){e&&r(t),n&&n.d(e)}}}function Jt(e,t,n){let i=!1,{menuItems:o=[]}=t,{arg:s}=t;function l(e){e.target.closest(".menu-burger")||n(1,i=!1)}function r(e){try{o[e].callback(s)}catch(e){console.log(e)}n(1,i=!1)}return D((()=>{const e=document.querySelector("#app-start");e&&(e.removeEventListener("click",l,!0),e.addEventListener("click",l,!0))})),e.$$set=e=>{"menuItems"in e&&n(0,o=e.menuItems),"arg"in e&&n(4,s=e.arg)},[o,i,function(){n(1,i=!i)},r,s,e=>{r(e)}]}var Qt=class extends he{constructor(e){super(),fe(this,e,Jt,Rt,M,{menuItems:0,arg:4},Gt)}};function Wt(e){s(e,"svelte-11umd8u",".app_item_container.svelte-11umd8u{border-radius:5px;border:1px solid rgb(226, 218, 218);margin-bottom:5px}.app_item_name.svelte-11umd8u{display:flex;align-items:center;padding:10px 15px;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:background-color 0.3s}.app_item_name.svelte-11umd8u:hover{color:white;background-color:#e0e0e0}.is-open.svelte-11umd8u{color:white;background-color:#d8caca;border-radius:3px;margin-bottom:10px}.label.svelte-11umd8u{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.custom-check.svelte-11umd8u{width:20px;height:20px;background-color:white;margin-right:5px}.white-text.svelte-11umd8u{color:white}.modificators.svelte-11umd8u{font-style:italic}")}function Bt(e){const t=e.slice(),n=t[0]instanceof tt&&t[0]._modificators.length>0?t[0]._modificators.map((e=>e.name)).join(", "):"";return t[9]=n,t}function Vt(e){let t,n,i;return{c(){t=c("input"),$(t,"type","checkbox"),$(t,"class","custom-check svelte-11umd8u")},m(o,s){l(o,t,s),t.checked=e[0]._checked,n||(i=[m(t,"change",e[6]),m(t,"change",e[5])],n=!0)},p(e,n){1&n&&(t.checked=e[0]._checked)},d(e){e&&r(t),n=!1,S(i)}}}function Xt(e){let t,n,i=e[9]+"";return{c(){t=c("span"),n=u(i),$(t,"class","modificators svelte-11umd8u")},m(e,i){l(e,t,i),o(t,n)},p(e,t){1&t&&i!==(i=e[9]+"")&&b(n,i)},d(e){e&&r(t)}}}function Kt(e){let t,n;return t=new Qt({props:{menuItems:e[2],arg:e[0]}}),{c(){de(t.$$.fragment)},m(e,i){pe(t,e,i),n=!0},p(e,n){const i={};4&n&&(i.menuItems=e[2]),1&n&&(i.arg=e[0]),t.$set(i)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){se(t.$$.fragment,e),n=!1},d(e){me(t,e)}}}function en(e){let t,n,i,o;function s(t){e[7](t)}function l(t){e[8](t)}let r={level:e[1]+10,menuItems:e[2]};return void 0!==e[0].items&&(r.mainEntity=e[0].items),void 0!==e[0]&&(r.parent=e[0]),t=new Pt({props:r}),G.push((()=>ue(t,"mainEntity",s))),G.push((()=>ue(t,"parent",l))),{c(){de(t.$$.fragment)},m(e,n){pe(t,e,n),o=!0},p(e,o){const s={};2&o&&(s.level=e[1]+10),4&o&&(s.menuItems=e[2]),!n&&1&o&&(n=!0,s.mainEntity=e[0].items,Q((()=>n=!1))),!i&&1&o&&(i=!0,s.parent=e[0],Q((()=>i=!1))),t.$set(s)},i(e){o||(oe(t.$$.fragment,e),o=!0)},o(e){se(t.$$.fragment,e),o=!1},d(e){me(t,e)}}}function tn(e){let t,n,i,s,a,p,f,g,h,v,w,x,k,_,I,S=!1===e[0].isParentSingle()&&!1===Ie.includes(e[0].type),N=e[0].name+"",M=e[4]()+"",C=S&&Vt(e),A=e[0]instanceof tt&&e[0]._modificators.length>0&&Xt(Bt(e)),j=e[0]instanceof nt==0&&Kt(e),E=e[0]instanceof nt&&e[0].isOpen&&en(e);return{c(){t=c("div"),n=c("div"),C&&C.c(),i=d(),s=c("div"),a=u(N),p=d(),f=u(M),g=d(),A&&A.c(),h=d(),j&&j.c(),x=d(),E&&E.c(),$(s,"class","label svelte-11umd8u"),y(s,"white-text",e[1]>=67),$(n,"class","app_item_name svelte-11umd8u"),$(n,"title",v=e[0].id+" "+e[4]()),$(n,"id",w=`${e[0].getSource()}.${e[0].id}`),y(n,"is-open",!!(e[0]instanceof nt&&e[0].isOpen)),$(t,"class","app_item_container svelte-11umd8u")},m(r,c){l(r,t,c),o(t,n),C&&C.m(n,null),o(n,i),o(n,s),o(s,a),o(s,p),o(s,f),o(s,g),A&&A.m(s,null),o(n,h),j&&j.m(n,null),o(t,x),E&&E.m(t,null),k=!0,_||(I=m(s,"click",e[3]),_=!0)},p(e,[o]){1&o&&(S=!1===e[0].isParentSingle()&&!1===Ie.includes(e[0].type)),S?C?C.p(e,o):(C=Vt(e),C.c(),C.m(n,i)):C&&(C.d(1),C=null),(!k||1&o)&&N!==(N=e[0].name+"")&&b(a,N),e[0]instanceof tt&&e[0]._modificators.length>0?A?A.p(Bt(e),o):(A=Xt(Bt(e)),A.c(),A.m(s,null)):A&&(A.d(1),A=null),(!k||2&o)&&y(s,"white-text",e[1]>=67),e[0]instanceof nt==0?j?(j.p(e,o),1&o&&oe(j,1)):(j=Kt(e),j.c(),oe(j,1),j.m(n,null)):j&&(ne(),se(j,1,1,(()=>{j=null})),ie()),(!k||1&o&&v!==(v=e[0].id+" "+e[4]()))&&$(n,"title",v),(!k||1&o&&w!==(w=`${e[0].getSource()}.${e[0].id}`))&&$(n,"id",w),(!k||1&o)&&y(n,"is-open",!!(e[0]instanceof nt&&e[0].isOpen)),e[0]instanceof nt&&e[0].isOpen?E?(E.p(e,o),1&o&&oe(E,1)):(E=en(e),E.c(),oe(E,1),E.m(t,null)):E&&(ne(),se(E,1,1,(()=>{E=null})),ie())},i(e){k||(oe(j),oe(E),k=!0)},o(e){se(j),se(E),k=!1},d(e){e&&r(t),C&&C.d(),A&&A.d(),j&&j.d(),E&&E.d(),_=!1,I()}}}function nn(e,t,n){let{appItem:i}=t,{level:o=1}=t,{menuItems:s=[]}=t;return D((()=>{})),e.$$set=e=>{"appItem"in e&&n(0,i=e.appItem),"level"in e&&n(1,o=e.level),"menuItems"in e&&n(2,s=e.menuItems)},[i,o,s,async function(){i instanceof nt&&(await i.getItems(),n(0,i.isOpen=!i.isOpen,i))},function(){return`(${function(e){let t=it.find((t=>t.id===e))?.value;return t||""}(i.type)})`},function(){i instanceof tt&&console.log(i.getSource()),i.parent?.checked(),console.log(i.parent)},function(){i._checked=this.checked,n(0,i)},function(t){e.$$.not_equal(i.items,t)&&(i.items=t,n(0,i))},function(e){i=e,n(0,i)}]}var on=class extends he{constructor(e){super(),fe(this,e,nn,tn,M,{appItem:0,level:1,menuItems:2},Wt)}};const{document:sn}=e;function ln(e){s(e,"svelte-100xnsd",'.wrapper.svelte-100xnsd.svelte-100xnsd{margin:0;padding:0;position:relative;background-color:white;--border-color:#dadadb;font-size:15px;line-height:20px}.front-drop-down-button.svelte-100xnsd.svelte-100xnsd,.drop-down-group.svelte-100xnsd.svelte-100xnsd{padding:10px;position:relative;border:1px solid var(--border-color);border-radius:0.4rem;user-select:none;cursor:pointer;display:flex;align-items:center;gap:5px}label.svelte-100xnsd.svelte-100xnsd{width:1.1rem;min-width:1.1rem;height:1.1rem;border:1px solid black;border-radius:3px;display:flex;justify-content:center;align-items:center;cursor:pointer}input[type="checkbox"].svelte-100xnsd.svelte-100xnsd{display:none}label.svelte-100xnsd span.some-selected.svelte-100xnsd{width:50%;outline:1px solid black}label.svelte-100xnsd span.all-selected.svelte-100xnsd{width:80%;height:80%;background-image:url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128.411 128.411"><polygon points="127.526,15.294 45.665,78.216 0.863,42.861 0,59.255 44.479,113.117 128.411,31.666 %09%09"/></svg>\');background-position:center;background-repeat:no-repeat;background-size:contain}.collapse-state-btn.svelte-100xnsd.svelte-100xnsd{position:absolute;right:0.25rem;width:1rem;height:1rem;transform:rotate(45deg) scale(0.65);cursor:pointer;--collapse-state-btn-border-color:#303030}.collapse-state-btn.opened.svelte-100xnsd.svelte-100xnsd{top:14px;right:18px;border-top:1px solid var(--collapse-state-btn-border-color);border-left:1px solid var(--collapse-state-btn-border-color)}.collapse-state-btn.closed.svelte-100xnsd.svelte-100xnsd{top:9px;right:18px;border-right:1px solid var(--collapse-state-btn-border-color);border-bottom:1px solid var(--collapse-state-btn-border-color)}.drop-down-list.svelte-100xnsd.svelte-100xnsd{position:absolute;left:0;width:100%;border:1px solid var(--border-color);border-radius:0.4rem;list-style:none;user-select:none;cursor:pointer;z-index:99999;background-color:white;max-height:200px;overflow:auto}.drop-down-list.svelte-100xnsd.svelte-100xnsd::-webkit-scrollbar{width:10px;background-color:transparent}.drop-down-list.svelte-100xnsd.svelte-100xnsd::-webkit-scrollbar-track{background-color:transparent}.drop-down-list.svelte-100xnsd.svelte-100xnsd::-webkit-scrollbar-thumb{background-color:rgb(161, 161, 161);border-top-left-radius:5px;border-bottom-left-radius:5px}.drop-down-group.svelte-100xnsd.svelte-100xnsd{border:none;border-radius:0;box-shadow:0 0px 3px 2px #cfcfcf;cursor:auto}li.svelte-100xnsd.svelte-100xnsd{padding:5px;display:flex;align-items:center;gap:5px;cursor:auto}li.svelte-100xnsd>span.svelte-100xnsd{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}li.svelte-100xnsd div.svelte-100xnsd:first-child{display:none}.hidden.svelte-100xnsd.svelte-100xnsd{display:none !important}.group-spacing.svelte-100xnsd.svelte-100xnsd{display:block !important;width:10%;max-width:20px;height:100%}')}function rn(e,t,n){const i=e.slice();return i[31]=t[n],i}function cn(e,t,n){const i=e.slice();return i[34]=t[n],i[36]=n,i}function an(e){let t,n=[],i=new Map,o=le(Object.values(e[4]));const s=e=>e[31].id;for(let t=0;t<o.length;t+=1){let l=rn(e,o,t),r=s(l);i.set(r,n[t]=pn(r,l))}return{c(){t=c("ul");for(let e=0;e<n.length;e+=1)n[e].c();$(t,"class","drop-down-list svelte-100xnsd")},m(e,i){l(e,t,i);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,l){23128&l[0]&&(o=le(Object.values(e[4])),n=ae(n,l,s,1,e,o,i,t,re,pn,null,rn))},d(e){e&&r(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function un(e){let t,n=[],i=new Map,o=le(e[3][e[31].id]);const s=e=>e[34]._key;for(let t=0;t<o.length;t+=1){let l=cn(e,o,t),r=s(l);i.set(r,n[t]=dn(r,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=p()},m(e,i){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,i);l(e,t,i)},p(e,l){4184&l[0]&&(o=le(e[3][e[31].id]),n=ae(n,l,s,1,e,o,i,t.parentNode,re,dn,t,cn))},d(e){e&&r(t);for(let t=0;t<n.length;t+=1)n[t].d(e)}}}function dn(e,t){let n,i,s,a,p,h,v,w,x,k,_,I,S,N,M=t[34].value+"";function C(){return t[20](t[34],t[31],t[36])}return{key:e,first:null,c(){n=c("li"),i=c("div"),s=d(),a=c("label"),p=c("input"),h=d(),v=c("span"),w=d(),x=c("span"),k=u(M),_=d(),$(i,"class","svelte-100xnsd"),y(i,"group-spacing",t[6]),$(p,"type","checkbox"),$(p,"class","svelte-100xnsd"),$(v,"class","svelte-100xnsd"),y(v,"all-selected",t[34]._checked),$(a,"class","svelte-100xnsd"),$(x,"class","svelte-100xnsd"),$(n,"class","drop-down-item svelte-100xnsd"),$(n,"title",I=t[34].value),this.first=n},m(e,t){l(e,n,t),o(n,i),o(n,s),o(n,a),o(a,p),o(a,h),o(a,v),o(n,w),o(n,x),o(x,k),o(n,_),S||(N=m(p,"change",g(f(C))),S=!0)},p(e,o){t=e,64&o[0]&&y(i,"group-spacing",t[6]),24&o[0]&&y(v,"all-selected",t[34]._checked),24&o[0]&&M!==(M=t[34].value+"")&&b(k,M),24&o[0]&&I!==(I=t[34].value)&&$(n,"title",I)},d(e){e&&r(n),S=!1,N()}}}function pn(e,t){let n,i,s,a,v,w,x,k,_,I,N,M,C,A,j,E,T,O=t[31].value+"";function z(){return t[18](t[31])}function D(){return t[19](t[31])}let q=t[31]._showed&&un(t);return{key:e,first:null,c(){n=c("li"),i=c("label"),s=c("input"),a=d(),v=c("span"),x=d(),k=c("span"),_=u(O),I=d(),N=c("div"),A=d(),q&&q.c(),j=p(),$(s,"type","checkbox"),$(s,"class","svelte-100xnsd"),$(v,"class",w=L(t[14](t[31]))+" svelte-100xnsd"),$(i,"class","svelte-100xnsd"),$(k,"class","svelte-100xnsd"),$(N,"class",M="collapse-state-btn "+(t[31]._showed?"opened":"closed")+" svelte-100xnsd"),$(n,"class","drop-down-group svelte-100xnsd"),$(n,"title",C=t[31].value),y(n,"hidden",!t[6]||!t[3][t[31].id].length),this.first=n},m(e,t){l(e,n,t),o(n,i),o(i,s),o(i,a),o(i,v),o(n,x),o(n,k),o(k,_),o(n,I),o(n,N),l(e,A,t),q&&q.m(e,t),l(e,j,t),E||(T=[m(s,"change",g(f(z))),m(N,"click",h(D))],E=!0)},p(e,i){t=e,16&i[0]&&w!==(w=L(t[14](t[31]))+" svelte-100xnsd")&&$(v,"class",w),16&i[0]&&O!==(O=t[31].value+"")&&b(_,O),16&i[0]&&M!==(M="collapse-state-btn "+(t[31]._showed?"opened":"closed")+" svelte-100xnsd")&&$(N,"class",M),16&i[0]&&C!==(C=t[31].value)&&$(n,"title",C),88&i[0]&&y(n,"hidden",!t[6]||!t[3][t[31].id].length),t[31]._showed?q?q.p(t,i):(q=un(t),q.c(),q.m(j.parentNode,j)):q&&(q.d(1),q=null)},d(e){e&&(r(n),r(A),r(j)),q&&q.d(e),E=!1,S(T)}}}function mn(e){let t,n,i,s,a,p,v,w,x,y,_,I,N,M,C,A,j,E,T=e[1]?"Все":`Выбрано: ${e[5].length}`,O=e[1]&&an(e);return{c(){t=d(),n=c("div"),i=c("div"),s=c("label"),a=c("input"),p=d(),v=c("span"),x=d(),y=c("span"),_=u(T),I=d(),N=c("div"),C=d(),O&&O.c(),$(a,"type","checkbox"),$(a,"class","svelte-100xnsd"),$(v,"class",w=L(e[13](e[5].length))+" svelte-100xnsd"),$(s,"class","svelte-100xnsd"),$(N,"class",M="collapse-state-btn "+(e[1]?"opened":"closed")+" svelte-100xnsd"),$(i,"class","front-drop-down-button svelte-100xnsd"),$(n,"class",A="wrapper "+e[0]+" svelte-100xnsd")},m(r,c){l(r,t,c),l(r,n,c),o(n,i),o(i,s),o(s,a),o(s,p),o(s,v),o(i,x),o(i,y),o(y,_),o(i,I),o(i,N),o(n,C),O&&O.m(n,null),e[21](n),j||(E=[m(sn.body,"click",e[8]),m(a,"change",g(f(e[10]))),m(y,"click",h(e[7])),m(N,"click",h(e[7])),m(i,"click",h(e[7]))],j=!0)},p(e,t){32&t[0]&&w!==(w=L(e[13](e[5].length))+" svelte-100xnsd")&&$(v,"class",w),34&t[0]&&T!==(T=e[1]?"Все":`Выбрано: ${e[5].length}`)&&b(_,T),2&t[0]&&M!==(M="collapse-state-btn "+(e[1]?"opened":"closed")+" svelte-100xnsd")&&$(N,"class",M),e[1]?O?O.p(e,t):(O=an(e),O.c(),O.m(n,null)):O&&(O.d(1),O=null),1&t[0]&&A!==(A="wrapper "+e[0]+" svelte-100xnsd")&&$(n,"class",A)},i:k,o:k,d(i){i&&(r(t),r(n)),O&&O.d(),e[21](null),j=!1,S(E)}}}function fn(e,t,n){let{items:i=[]}=t,{selected:o=[]}=t,{classes:s=""}=t,{onSelect:l=(e,t)=>{}}=t;const r=crypto.randomUUID();let c,a=!1,u={[r]:[]},d={[r]:{id:r,value:"Без группы",_checkedCount:0,_showed:!0}},p=[],m=!1,f=!1,g=!1;function h(){n(15,o=p.map((e=>e.id)))}function $(){n(1,a=!1)}function v(e){e._showed?e._showed=!1:e._showed=!0,n(4,d[e.id]={...e},d)}function b(e){f=!0,e._checkedCount?u[e.id].forEach(((t,n)=>{t._checked&&w(t,e,n)})):u[e.id].forEach(((t,n)=>w(t,e,n))),g||(h(),l(p)),f=!1}function w(e,t,i){e._checked?(e._checked=!1,t._checkedCount-=1,n(5,p=p.filter((t=>t!==e._original)))):(e._checked=!0,t._checkedCount+=1,n(5,p=[...p,e._original])),n(3,u[t.id][i]={...e},u),n(4,d[t.id]={...t},d),f||(h(),l(p,e._original))}return e.$$set=e=>{"items"in e&&n(16,i=e.items),"selected"in e&&n(15,o=e.selected),"classes"in e&&n(0,s=e.classes),"onSelect"in e&&n(17,l=e.onSelect)},e.$$.update=()=>{98304&e.$$.dirty[0]&&n(5,p=o.map((e=>i.find((t=>{let n=!0;return t.id!=e&&(n=!1),n})))).filter((e=>e))),98304&e.$$.dirty[0]&&(n(3,u={[r]:[]}),n(4,d={[r]:{id:r,value:"Без группы",_checkedCount:0,_showed:!0}}),i.forEach((e=>{e.group&&!d[e.group.id]&&(n(4,d[e.group.id]={...e.group,_checkedCount:0,_showed:!0},d),n(3,u[e.group.id]=[],u))})),n(6,m=Object.keys(u).length>1),i.forEach((e=>{const t=e.group?d[e.group.id]:d[r],i=p.includes(e),o={...e,group:t,_key:crypto.randomUUID(),_original:e,_checked:i};u[o.group.id].push(o),n(4,d[o.group.id]._checkedCount+=Number(i),d)})))},[s,a,c,u,d,p,m,function(){a?$():n(1,a=!0)},function e(t){if(!document.body.contains(c))return document.body.removeEventListener("click",e),!0;c.contains(t.target)||$()},v,function(e){g=!0,p.length?Object.values(d).forEach((e=>{e._checkedCount&&b(e)})):Object.values(d).forEach((e=>b(e))),h(),l(p),g=!1},b,w,function(e){return 0===e?"":e<i.length?"some-selected":"all-selected"},function(e){return 0===e._checkedCount?"":e._checkedCount<u[e.id].length?"some-selected":"all-selected"},o,i,l,e=>b(e),e=>v(e),(e,t,n)=>w(e,t,n),function(e){G[e?"unshift":"push"]((()=>{c=e,n(2,c)}))}]}var gn=class extends he{constructor(e){super(),fe(this,e,fn,mn,M,{items:16,selected:15,classes:0,onSelect:17},ln,[-1,-1])}};function hn(e){s(e,"svelte-h17tq8",".field-name.svelte-h17tq8{font-weight:bold;font-size:medium}.start-condition.svelte-h17tq8{padding-top:10px;padding-bottom:10px}")}function $n(e){const t=e.slice(),n=t[0].getNumberFromTypeField();return t[9]=n,t}function vn(e){let t,n,i,s,a,m,f,g,h,v,w,x,y,k,_=e[0].field.name+"";function I(t){e[5](t)}g=new Te({props:{caption:"Выбрать полсе",clickHandler:e[4]}});let S={items:e[0].getConditionFromField(),onSelect:e[3]};void 0!==e[0].condition&&(S.selected=e[0].condition),v=new St({props:S}),G.push((()=>ue(v,"selected",I)));let N=e[0].condition&&bn($n(e));return{c(){t=c("div"),n=u("Если "),i=c("span"),s=u('"'),a=u(_),m=u('"'),f=d(),de(g.$$.fragment),h=d(),de(v.$$.fragment),x=d(),N&&N.c(),y=p(),$(i,"class","field-name svelte-h17tq8"),$(t,"class","start-condition svelte-h17tq8")},m(e,r){l(e,t,r),o(t,n),o(t,i),o(i,s),o(i,a),o(i,m),o(t,f),pe(g,t,null),l(e,h,r),pe(v,e,r),l(e,x,r),N&&N.m(e,r),l(e,y,r),k=!0},p(e,t){(!k||1&t)&&_!==(_=e[0].field.name+"")&&b(a,_);const n={};1&t&&(n.items=e[0].getConditionFromField()),!w&&1&t&&(w=!0,n.selected=e[0].condition,Q((()=>w=!1))),v.$set(n),e[0].condition?N?(N.p($n(e),t),1&t&&oe(N,1)):(N=bn($n(e)),N.c(),oe(N,1),N.m(y.parentNode,y)):N&&(ne(),se(N,1,1,(()=>{N=null})),ie())},i(e){k||(oe(g.$$.fragment,e),oe(v.$$.fragment,e),oe(N),k=!0)},o(e){se(g.$$.fragment,e),se(v.$$.fragment,e),se(N),k=!1},d(e){e&&(r(t),r(h),r(x),r(y)),me(g),me(v,e),N&&N.d(e)}}}function bn(e){let t,n,i,o;const s=[xn,wn],c=[];function a(e,t){return e[9]===_e.enum?0:1}return t=a(e),n=c[t]=s[t](e),{c(){n.c(),i=p()},m(e,n){c[t].m(e,n),l(e,i,n),o=!0},p(e,o){let l=t;t=a(e),t===l?c[t].p(e,o):(ne(),se(c[l],1,1,(()=>{c[l]=null})),ie(),n=c[t],n?n.p(e,o):(n=c[t]=s[t](e),n.c()),oe(n,1),n.m(i.parentNode,i))},i(e){o||(oe(n),o=!0)},o(e){se(n),o=!1},d(e){e&&r(i),c[t].d(e)}}}function wn(e){let t,n,i;function o(t){e[8](t)}let s={typeInput:e[9]};return void 0!==e[0].value&&(s.value=e[0].value),t=new et({props:s}),G.push((()=>ue(t,"value",o))),{c(){de(t.$$.fragment)},m(e,n){pe(t,e,n),i=!0},p(e,i){const o={};1&i&&(o.typeInput=e[9]),!n&&1&i&&(n=!0,o.value=e[0].value,Q((()=>n=!1))),t.$set(o)},i(e){i||(oe(t.$$.fragment,e),i=!0)},o(e){se(t.$$.fragment,e),i=!1},d(e){me(t,e)}}}function xn(e){let t,n,i,o;const s=[kn,yn],c=[];function a(e,t){return e[2]?0:1}return t=a(e),n=c[t]=s[t](e),{c(){n.c(),i=p()},m(e,n){c[t].m(e,n),l(e,i,n),o=!0},p(e,o){let l=t;t=a(e),t===l?c[t].p(e,o):(ne(),se(c[l],1,1,(()=>{c[l]=null})),ie(),n=c[t],n?n.p(e,o):(n=c[t]=s[t](e),n.c()),oe(n,1),n.m(i.parentNode,i))},i(e){o||(oe(n),o=!0)},o(e){se(n),o=!1},d(e){e&&r(i),c[t].d(e)}}}function yn(e){let t,n,i;function o(t){e[7](t)}let s={items:e[0].getContextField()};return void 0!==e[0].value&&(s.selected=e[0].value),t=new gn({props:s}),G.push((()=>ue(t,"selected",o))),{c(){de(t.$$.fragment)},m(e,n){pe(t,e,n),i=!0},p(e,i){const o={};1&i&&(o.items=e[0].getContextField()),!n&&1&i&&(n=!0,o.selected=e[0].value,Q((()=>n=!1))),t.$set(o)},i(e){i||(oe(t.$$.fragment,e),i=!0)},o(e){se(t.$$.fragment,e),i=!1},d(e){me(t,e)}}}function kn(e){let t,n,i;function o(t){e[6](t)}let s={items:e[0].getContextField()};return void 0!==e[0].value&&(s.selected=e[0].value),t=new St({props:s}),G.push((()=>ue(t,"selected",o))),{c(){de(t.$$.fragment)},m(e,n){pe(t,e,n),i=!0},p(e,i){const o={};1&i&&(o.items=e[0].getContextField()),!n&&1&i&&(n=!0,o.selected=e[0].value,Q((()=>n=!1))),t.$set(o)},i(e){i||(oe(t.$$.fragment,e),i=!0)},o(e){se(t.$$.fragment,e),i=!1},d(e){me(t,e)}}}function _n(e){let t,n,i=e[0].field&&!1===e[1]&&vn(e);return{c(){i&&i.c(),t=p()},m(e,o){i&&i.m(e,o),l(e,t,o),n=!0},p(e,[n]){e[0].field&&!1===e[1]?i?(i.p(e,n),3&n&&oe(i,1)):(i=vn(e),i.c(),oe(i,1),i.m(t.parentNode,t)):i&&(ne(),se(i,1,1,(()=>{i=null})),ie())},i(e){n||(oe(i),n=!0)},o(e){se(i),n=!1},d(e){e&&r(t),i&&i.d(e)}}}function In(e,t,n){let{conditionItem:i}=t,{isShowLastPathItem:o=!1}=t,s=!1;return D((()=>{i.field&&n(1,o=!1)})),e.$$set=e=>{"conditionItem"in e&&n(0,i=e.conditionItem),"isShowLastPathItem"in e&&n(1,o=e.isShowLastPathItem)},[i,o,s,function(){"OneOf"===i.condition||"None"===i.condition?(n(2,s=!1),n(0,i.value=[],i)):(n(2,s=!0),n(0,i.value="",i)),n(0,i),console.log(i)},function(){n(1,o=!0),n(0,i.value="",i),n(0,i.condition="",i),n(0,i)},function(t){e.$$.not_equal(i.condition,t)&&(i.condition=t,n(0,i))},function(t){e.$$.not_equal(i.value,t)&&(i.value=t,n(0,i))},function(t){e.$$.not_equal(i.value,t)&&(i.value=t,n(0,i))},function(t){e.$$.not_equal(i.value,t)&&(i.value=t,n(0,i))}]}var Sn=class extends he{constructor(e){super(),fe(this,e,In,_n,M,{conditionItem:0,isShowLastPathItem:1},hn)}};function Nn(e){s(e,"svelte-1rmpqip",".condition-item.svelte-1rmpqip{display:flex;flex-direction:column}.condition-field.svelte-1rmpqip{flex:1}")}function Mn(e,t,n){const i=e.slice();return i[11]=t[n],i[12]=t,i[13]=n,i}function Cn(e){let t,n,i;function o(){return e[6](e[13])}function s(t){e[7](t,e[13])}let l={items:e[11].items?vt.getAppitems(e[11]):[],onSelect:o};return void 0!==e[0].path[e[13]+1]&&(l.selected=e[0].path[e[13]+1]),t=new St({props:l}),G.push((()=>ue(t,"selected",s))),{c(){de(t.$$.fragment)},m(e,n){pe(t,e,n),i=!0},p(i,s){e=i;const l={};1&s&&(l.items=e[11].items?vt.getAppitems(e[11]):[]),1&s&&(l.onSelect=o),!n&&1&s&&(n=!0,l.selected=e[0].path[e[13]+1],Q((()=>n=!1))),t.$set(l)},i(e){i||(oe(t.$$.fragment,e),i=!0)},o(e){se(t.$$.fragment,e),i=!1},d(e){me(t,e)}}}function An(e,t){let n,i,o,s=(t[0].path.length-1!==t[13]||!0===t[2])&&Cn(t);return{key:e,first:null,c(){n=p(),s&&s.c(),i=p(),this.first=n},m(e,t){l(e,n,t),s&&s.m(e,t),l(e,i,t),o=!0},p(e,n){(t=e)[0].path.length-1!==t[13]||!0===t[2]?s?(s.p(t,n),5&n&&oe(s,1)):(s=Cn(t),s.c(),oe(s,1),s.m(i.parentNode,i)):s&&(ne(),se(s,1,1,(()=>{s=null})),ie())},i(e){o||(oe(s),o=!0)},o(e){se(s),o=!1},d(e){e&&(r(n),r(i)),s&&s.d(e)}}}function jn(e){let t,n,i,s,a,u,p,m,f,g,h=[],v=new Map;function b(t){e[5](t)}let w={items:vt.getAppitems(e[1]),onSelect:e[4]};void 0!==e[0].path[0]&&(w.selected=e[0].path[0]),n=new St({props:w}),G.push((()=>ue(n,"selected",b)));let x=le(e[0].path);const y=e=>e[13];for(let t=0;t<x.length;t+=1){let n=Mn(e,x,t),i=y(n);v.set(i,h[t]=An(i,n))}function k(t){e[8](t)}function _(t){e[9](t)}let I={};return void 0!==e[0]&&(I.conditionItem=e[0]),void 0!==e[2]&&(I.isShowLastPathItem=e[2]),p=new Sn({props:I}),G.push((()=>ue(p,"conditionItem",k))),G.push((()=>ue(p,"isShowLastPathItem",_))),{c(){t=c("div"),de(n.$$.fragment),s=d(),a=c("div");for(let e=0;e<h.length;e+=1)h[e].c();u=d(),de(p.$$.fragment),$(a,"class","condition-field svelte-1rmpqip"),$(t,"class","condition-item svelte-1rmpqip")},m(e,i){l(e,t,i),pe(n,t,null),o(t,s),o(t,a);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(a,null);o(a,u),pe(p,a,null),g=!0},p(e,[t]){const o={};2&t&&(o.items=vt.getAppitems(e[1])),1&t&&(o.onSelect=e[4]),!i&&1&t&&(i=!0,o.selected=e[0].path[0],Q((()=>i=!1))),n.$set(o),13&t&&(x=le(e[0].path),ne(),h=ae(h,t,y,1,e,x,v,a,ce,An,u,Mn),ie());const s={};!m&&1&t&&(m=!0,s.conditionItem=e[0],Q((()=>m=!1))),!f&&4&t&&(f=!0,s.isShowLastPathItem=e[2],Q((()=>f=!1))),p.$set(s)},i(e){if(!g){oe(n.$$.fragment,e);for(let e=0;e<x.length;e+=1)oe(h[e]);oe(p.$$.fragment,e),g=!0}},o(e){se(n.$$.fragment,e);for(let e=0;e<h.length;e+=1)se(h[e]);se(p.$$.fragment,e),g=!1},d(e){e&&r(t),me(n);for(let e=0;e<h.length;e+=1)h[e].d();me(p)}}}function En(e,t,n){let{conditionItem:i}=t,{mainApp:o}=t,s=!0;async function l(e,t){e||n(0,i.path=[...i.path.filter(((e,n)=>t>=n&&e))],i),e instanceof nt&&(await e.getItems(),n(0,i.path=[...i.path.filter(((e,n)=>t>=n&&e))],i)),i.clearField(),e instanceof tt&&(n(0,i.field=e,i),n(0,i.path=[...i.path.filter(((e,n)=>t-1>=n&&e))],i),n(2,s=!1)),n(0,i),console.log(i)}return e.$$set=e=>{"conditionItem"in e&&n(0,i=e.conditionItem),"mainApp"in e&&n(1,o=e.mainApp)},[i,o,s,l,async()=>{await l(i.path[0],0)},function(t){e.$$.not_equal(i.path[0],t)&&(i.path[0]=t,n(0,i))},async e=>{await l(i.path[e+1],e+1)},function(t,o){e.$$.not_equal(i.path[o+1],t)&&(i.path[o+1]=t,n(0,i))},function(e){i=e,n(0,i)},function(e){s=e,n(2,s)}]}var Ln=class extends he{constructor(e){super(),fe(this,e,En,jn,M,{conditionItem:0,mainApp:1},Nn)}};function Tn(e){s(e,"svelte-utl1gd",".condition-constructor-container.svelte-utl1gd{padding:10px}.button-container-bottom.svelte-utl1gd,.button-container-top.svelte-utl1gd{padding:15px 5px}.button-container-top.svelte-utl1gd{border-bottom:1px solid rgb(190, 196, 196)}.button-container-bottom.svelte-utl1gd{border-top:1px solid rgb(190, 196, 196)}.condition-item-body.svelte-utl1gd{background-color:rgb(190, 196, 196);margin-bottom:5px;padding:5px 10px}.condition-item-name.svelte-utl1gd{font-weight:bold;margin:10px 0px}")}function On(e,t,n){const i=e.slice();return i[14]=t[n],i[15]=t,i[16]=n,i}function zn(e,t,n){const i=e.slice();return i[17]=t[n],i[18]=t,i[19]=n,i}function Dn(e){let t,n,i,s,a,u,p,m,f,g,h,v,b=[],w=new Map,x=1===e[1].length&&0!==e[1][0].conditions.length&&0===e[1][0].conditions.filter(Yn).length;i=new Te({props:{caption:"Назад",clickHandler:e[6]}}),a=new Te({props:{caption:"Добавить условие",clickHandler:e[2]}});let y=le(e[1]);const k=e=>e[16];for(let t=0;t<y.length;t+=1){let n=On(e,y,t),i=k(n);w.set(i,b[t]=Pn(i,n))}g=new Te({props:{caption:"Добавить условие",clickHandler:e[2]}});let _=x&&Gn(e);return{c(){t=c("div"),n=c("div"),de(i.$$.fragment),s=d(),de(a.$$.fragment),u=d(),p=c("div");for(let e=0;e<b.length;e+=1)b[e].c();m=d(),f=c("div"),de(g.$$.fragment),h=d(),_&&_.c(),$(n,"class","button-container-top svelte-utl1gd"),$(p,"class","conditions-body"),$(f,"class","button-container-bottom svelte-utl1gd"),$(t,"class","condition-constructor-container svelte-utl1gd")},m(e,r){l(e,t,r),o(t,n),pe(i,n,null),o(n,s),pe(a,n,null),o(t,u),o(t,p);for(let e=0;e<b.length;e+=1)b[e]&&b[e].m(p,null);o(t,m),o(t,f),pe(g,f,null),o(f,h),_&&_.m(f,null),v=!0},p(e,t){const n={};1&t&&(n.clickHandler=e[6]),i.$set(n),10&t&&(y=le(e[1]),ne(),b=ae(b,t,k,1,e,y,w,p,ce,Pn,null,On),ie()),2&t&&(x=1===e[1].length&&0!==e[1][0].conditions.length&&0===e[1][0].conditions.filter(Yn).length),x?_?(_.p(e,t),2&t&&oe(_,1)):(_=Gn(e),_.c(),oe(_,1),_.m(f,null)):_&&(ne(),se(_,1,1,(()=>{_=null})),ie())},i(e){if(!v){oe(i.$$.fragment,e),oe(a.$$.fragment,e);for(let e=0;e<y.length;e+=1)oe(b[e]);oe(g.$$.fragment,e),oe(_),v=!0}},o(e){se(i.$$.fragment,e),se(a.$$.fragment,e);for(let e=0;e<b.length;e+=1)se(b[e]);se(g.$$.fragment,e),se(_),v=!1},d(e){e&&r(t),me(i),me(a);for(let e=0;e<b.length;e+=1)b[e].d();me(g),_&&_.d()}}}function qn(e){let t,n,i;function o(t){e[9](t,e[17])}let s={items:Ce};return void 0!==e[17].betweenConditions&&(s.selected=e[17].betweenConditions),t=new St({props:s}),G.push((()=>ue(t,"selected",o))),{c(){de(t.$$.fragment)},m(e,n){pe(t,e,n),i=!0},p(i,o){e=i;const s={};!n&&2&o&&(n=!0,s.selected=e[17].betweenConditions,Q((()=>n=!1))),t.$set(s)},i(e){i||(oe(t.$$.fragment,e),i=!0)},o(e){se(t.$$.fragment,e),i=!1},d(e){me(t,e)}}}function Fn(e,t){let n,i,s,a,u,p,m,f,g,h;function v(e){t[7](e,t[17],t[18],t[19])}function b(e){t[8](e,t[14])}let w={};void 0!==t[17]&&(w.conditionItem=t[17]),void 0!==t[14].mainApp&&(w.mainApp=t[14].mainApp),i=new Ln({props:w}),G.push((()=>ue(i,"conditionItem",v))),G.push((()=>ue(i,"mainApp",b)));let x=t[14].conditions.length>1&&t[19]!==t[14].conditions.length-1&&qn(t);function y(){return t[10](t[19])}return f=new Te({props:{caption:"Удалить условие",clickHandler:y,style:"margin-top:10px;"}}),{key:e,first:null,c(){n=c("div"),de(i.$$.fragment),u=d(),p=c("div"),x&&x.c(),m=d(),de(f.$$.fragment),g=d(),$(p,"class","button-container-bottom svelte-utl1gd"),$(n,"class","condition-item-body svelte-utl1gd"),this.first=n},m(e,t){l(e,n,t),pe(i,n,null),o(n,u),o(n,p),x&&x.m(p,null),o(p,m),pe(f,p,null),o(n,g),h=!0},p(e,n){t=e;const o={};!s&&2&n&&(s=!0,o.conditionItem=t[17],Q((()=>s=!1))),!a&&2&n&&(a=!0,o.mainApp=t[14].mainApp,Q((()=>a=!1))),i.$set(o),t[14].conditions.length>1&&t[19]!==t[14].conditions.length-1?x?(x.p(t,n),2&n&&oe(x,1)):(x=qn(t),x.c(),oe(x,1),x.m(p,m)):x&&(ne(),se(x,1,1,(()=>{x=null})),ie());const l={};2&n&&(l.clickHandler=y),f.$set(l)},i(e){h||(oe(i.$$.fragment,e),oe(x),oe(f.$$.fragment,e),h=!0)},o(e){se(i.$$.fragment,e),se(x),se(f.$$.fragment,e),h=!1},d(e){e&&r(n),me(i),x&&x.d(),me(f)}}}function Pn(e,t){let n,i,s,a,p,m,f,g=t[14].mainApp.name+"",h=[],v=new Map,w=le(t[14].conditions);const x=e=>e[19];for(let e=0;e<w.length;e+=1){let n=zn(t,w,e),i=x(n);v.set(i,h[e]=Fn(i,n))}return{key:e,first:null,c(){n=c("div"),i=c("div"),s=u(g),a=d(),p=c("div");for(let e=0;e<h.length;e+=1)h[e].c();m=d(),$(i,"class","condition-item-name svelte-utl1gd"),$(p,"class","condition-items-body"),$(n,"class","condition-item"),this.first=n},m(e,t){l(e,n,t),o(n,i),o(i,s),o(n,a),o(n,p);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(p,null);o(n,m),f=!0},p(e,n){t=e,(!f||2&n)&&g!==(g=t[14].mainApp.name+"")&&b(s,g),10&n&&(w=le(t[14].conditions),ne(),h=ae(h,n,x,1,t,w,v,p,ce,Fn,null,zn),ie())},i(e){if(!f){for(let e=0;e<w.length;e+=1)oe(h[e]);f=!0}},o(e){for(let e=0;e<h.length;e+=1)se(h[e]);f=!1},d(e){e&&r(n);for(let e=0;e<h.length;e+=1)h[e].d()}}}function Gn(e){let t,n;return t=new Te({props:{caption:"Вставить условие",clickHandler:e[11]}}),{c(){de(t.$$.fragment)},m(e,i){pe(t,e,i),n=!0},p(e,n){const i={};2&n&&(i.clickHandler=e[11]),t.$set(i)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){se(t.$$.fragment,e),n=!1},d(e){me(t,e)}}}function Zn(e){let t,n,i=e[0]&&Dn(e);return{c(){i&&i.c(),t=p()},m(e,o){i&&i.m(e,o),l(e,t,o),n=!0},p(e,[n]){e[0]?i?(i.p(e,n),1&n&&oe(i,1)):(i=Dn(e),i.c(),oe(i,1),i.m(t.parentNode,t)):i&&(ne(),se(i,1,1,(()=>{i=null})),ie())},i(e){n||(oe(i),n=!0)},o(e){se(i),n=!1},d(e){e&&r(t),i&&i.d(e)}}}const Yn=e=>""===e.value;function Hn(e,t,n){let{mainApp:i}=t,{isVisible:o=!1}=t,s=[];function l(){vt.conditions=[...vt.conditions],n(1,s=[...vt.conditions.filter((e=>e.mainApp.id===i.id))])}function r(e){vt.deleteConditionItems(i,e),l()}async function c(e){ot(await vt.getConditionString(e))}return D((()=>{n(1,s=vt.conditions.filter((e=>e.mainApp.id===i.id))),rt(300)})),q((()=>{if(s.length>0){const e=s[s.length-1];if(e.conditions.length>0){const t=e.conditions[e.conditions.length-1];ct(`${t.field?.getSource()}.${t.field?.id}`)}}})),e.$$set=e=>{"mainApp"in e&&n(5,i=e.mainApp),"isVisible"in e&&n(0,o=e.isVisible)},[o,s,function(){vt.createNewConditions(i,[]),l()},r,c,i,()=>n(0,o=!o),function(e,t,i,o){i[o]=e,n(1,s)},function(t,i){e.$$.not_equal(i.mainApp,t)&&(i.mainApp=t,n(1,s))},function(t,i){e.$$.not_equal(i.betweenConditions,t)&&(i.betweenConditions=t,n(1,s))},e=>r(e),()=>c(s[0].mainApp)]}var Un=class extends he{constructor(e){super(),fe(this,e,Hn,Zn,M,{mainApp:5,isVisible:0},Tn)}};function Rn(e){s(e,"svelte-wwje96",".argument-body.svelte-wwje96{padding:10px 15px;display:flex;align-items:center;justify-content:space-between}.required.svelte-wwje96{color:red;font-weight:bold}.argument-values.svelte-wwje96{flex:1 1 75%}.argument-name.svelte-wwje96{flex:1 1 25%;padding:5px 10px}")}function Jn(e){let t,n,i;function o(t){e[2](t)}let s={placeholder:"Значение"};return void 0!==e[0].value&&(s.value=e[0].value),t=new et({props:s}),G.push((()=>ue(t,"value",o))),{c(){de(t.$$.fragment)},m(e,n){pe(t,e,n),i=!0},p(e,i){const o={};!n&&1&i&&(n=!0,o.value=e[0].value,Q((()=>n=!1))),t.$set(o)},i(e){i||(oe(t.$$.fragment,e),i=!0)},o(e){se(t.$$.fragment,e),i=!1},d(e){me(t,e)}}}function Qn(e){let t,n,i;function o(t){e[1](t)}let s={items:e[0].values.map(Bn)};return void 0!==e[0].value&&(s.selected=e[0].value),t=new St({props:s}),G.push((()=>ue(t,"selected",o))),{c(){de(t.$$.fragment)},m(e,n){pe(t,e,n),i=!0},p(e,i){const o={};1&i&&(o.items=e[0].values.map(Bn)),!n&&1&i&&(n=!0,o.selected=e[0].value,Q((()=>n=!1))),t.$set(o)},i(e){i||(oe(t.$$.fragment,e),i=!0)},o(e){se(t.$$.fragment,e),i=!1},d(e){me(t,e)}}}function Wn(e){let t,n,i,s,a,p,m,f,g,h,v=e[0].name+"",w=e[0].required?"*":"";const x=[Qn,Jn],k=[];function _(e,t){return e[0].values?.length>0?0:1}return f=_(e),g=k[f]=x[f](e),{c(){t=c("div"),n=c("div"),i=u(v),s=d(),a=u(w),p=d(),m=c("div"),g.c(),$(n,"class","argument-name svelte-wwje96"),y(n,"required",e[0].required),$(m,"class","argument-values svelte-wwje96"),$(t,"class","argument-body svelte-wwje96")},m(e,r){l(e,t,r),o(t,n),o(n,i),o(n,s),o(n,a),o(t,p),o(t,m),k[f].m(m,null),h=!0},p(e,[t]){(!h||1&t)&&v!==(v=e[0].name+"")&&b(i,v),(!h||1&t)&&w!==(w=e[0].required?"*":"")&&b(a,w),(!h||1&t)&&y(n,"required",e[0].required);let o=f;f=_(e),f===o?k[f].p(e,t):(ne(),se(k[o],1,1,(()=>{k[o]=null})),ie(),g=k[f],g?g.p(e,t):(g=k[f]=x[f](e),g.c()),oe(g,1),g.m(m,null))},i(e){h||(oe(g),h=!0)},o(e){se(g),h=!1},d(e){e&&r(t),k[f].d()}}}const Bn=e=>({id:e.value,value:e.description?e.description:e.value});function Vn(e,t,n){let{argumentDescription:i}=t;return e.$$set=e=>{"argumentDescription"in e&&n(0,i=e.argumentDescription)},[i,function(t){e.$$.not_equal(i.value,t)&&(i.value=t,n(0,i))},function(t){e.$$.not_equal(i.value,t)&&(i.value=t,n(0,i))}]}var Xn=class extends he{constructor(e){super(),fe(this,e,Vn,Wn,M,{argumentDescription:0},Rn)}};function Kn(e){s(e,"svelte-srjry5",".item__name-body.svelte-srjry5{display:flex;justify-content:space-between;align-items:center}.item__name.svelte-srjry5{font-weight:bold}.item__description.svelte-srjry5,.item__exaple.svelte-srjry5{padding:0px 0px 0px 10px}.modifiers-body.svelte-srjry5{padding:5px 15px}.mod-item-body.svelte-srjry5{padding:5px 10px;border:1px solid #dbd7d7;border-radius:3px;margin-bottom:5px;transition:background-color 0.3s}.mod-item-body.svelte-srjry5:nth-child(odd){background-color:#ece5e5}.mod-item-body.svelte-srjry5:hover{background-color:#d4cbcb}.item__static.svelte-srjry5{display:flex;align-items:flex-start}")}function ei(e,t,n){const i=e.slice();return i[20]=t[n],i[22]=n,i}function ti(e,t,n){const i=e.slice();return i[23]=t[n],i[24]=t,i[25]=n,i}function ni(e){let t,n,i,s=e[0]&&ii(e),a=e[2].length>0&&oi(e);return{c(){t=c("div"),s&&s.c(),n=d(),a&&a.c(),$(t,"class","modifiers-body svelte-srjry5"),$(t,"id","modifiers-body-id")},m(e,r){l(e,t,r),s&&s.m(t,null),o(t,n),a&&a.m(t,null),i=!0},p(e,i){e[0]?s?(s.p(e,i),1&i&&oe(s,1)):(s=ii(e),s.c(),oe(s,1),s.m(t,n)):s&&(ne(),se(s,1,1,(()=>{s=null})),ie()),e[2].length>0?a?(a.p(e,i),4&i&&oe(a,1)):(a=oi(e),a.c(),oe(a,1),a.m(t,null)):a&&(ne(),se(a,1,1,(()=>{a=null})),ie())},i(e){i||(oe(s),oe(a),i=!0)},o(e){se(s),se(a),i=!1},d(e){e&&r(t),s&&s.d(),a&&a.d()}}}function ii(e){let t,n,i,s,a,p,m,f,g,h,v=e[0].name+"";function w(t){e[10](t)}a=new Te({props:{caption:"Назад",clickHandler:e[7],style:"margin-bottom: 10px;"}});let y={placeholder:"Поиск модификатора...",inputHndlr:e[5]};return void 0!==e[3]&&(y.value=e[3]),f=new et({props:y}),G.push((()=>ue(f,"value",w))),{c(){t=c("div"),n=u("Для поля: "),i=u(v),s=d(),de(a.$$.fragment),p=d(),m=c("div"),de(f.$$.fragment),$(t,"class","item__name svelte-srjry5"),x(t,"margin-bottom","10px"),$(m,"class","search-container")},m(e,r){l(e,t,r),o(t,n),o(t,i),l(e,s,r),pe(a,e,r),l(e,p,r),l(e,m,r),pe(f,m,null),h=!0},p(e,t){(!h||1&t)&&v!==(v=e[0].name+"")&&b(i,v);const n={};!g&&8&t&&(g=!0,n.value=e[3],Q((()=>g=!1))),f.$set(n)},i(e){h||(oe(a.$$.fragment,e),oe(f.$$.fragment,e),h=!0)},o(e){se(a.$$.fragment,e),se(f.$$.fragment,e),h=!1},d(e){e&&(r(t),r(s),r(p),r(m)),me(a,e),me(f)}}}function oi(e){let t,n,i=[],o=new Map,s=le(e[2]);const c=e=>e[22];for(let t=0;t<s.length;t+=1){let n=ei(e,s,t),l=c(n);o.set(l,i[t]=ui(l,n))}return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=p()},m(e,o){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,o);l(e,t,o),n=!0},p(e,n){341&n&&(s=le(e[2]),ne(),i=ae(i,n,c,1,e,s,o,t.parentNode,ce,ui,t,ei),ie())},i(e){if(!n){for(let e=0;e<s.length;e+=1)oe(i[e]);n=!0}},o(e){for(let e=0;e<i.length;e+=1)se(i[e]);n=!1},d(e){e&&r(t);for(let t=0;t<i.length;t+=1)i[t].d(e)}}}function si(e){let t,n;return t=new Qt({props:{menuItems:e[4],arg:e[22]}}),{c(){de(t.$$.fragment)},m(e,i){pe(t,e,i),n=!0},p(e,n){const i={};4&n&&(i.arg=e[22]),t.$set(i)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){se(t.$$.fragment,e),n=!1},d(e){me(t,e)}}}function li(e){let t,n,i=e[20].arguments_description?.length>0&&ri(e);return{c(){t=c("div"),i&&i.c(),$(t,"class","item__arguments_description")},m(e,o){l(e,t,o),i&&i.m(t,null),n=!0},p(e,n){e[20].arguments_description?.length>0?i?(i.p(e,n),4&n&&oe(i,1)):(i=ri(e),i.c(),oe(i,1),i.m(t,null)):i&&(ne(),se(i,1,1,(()=>{i=null})),ie())},i(e){n||(oe(i),n=!0)},o(e){se(i),n=!1},d(e){e&&r(t),i&&i.d()}}}function ri(e){let t,n,i,o,s=[],a=new Map,u=le(e[20].arguments_description);const p=e=>e[25];for(let t=0;t<u.length;t+=1){let n=ti(e,u,t),i=p(n);a.set(i,s[t]=ci(i,n))}function m(){return e[12](e[20])}return i=new Te({props:{caption:"Применить модификатор",clickHandler:m}}),{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=d(),n=c("div"),de(i.$$.fragment),$(n,"class","control-button")},m(e,r){for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,r);l(e,t,r),l(e,n,r),pe(i,n,null),o=!0},p(n,o){e=n,4&o&&(u=le(e[20].arguments_description),ne(),s=ae(s,o,p,1,e,u,a,t.parentNode,ce,ci,t,ti),ie());const l={};4&o&&(l.clickHandler=m),i.$set(l)},i(e){if(!o){for(let e=0;e<u.length;e+=1)oe(s[e]);oe(i.$$.fragment,e),o=!0}},o(e){for(let e=0;e<s.length;e+=1)se(s[e]);se(i.$$.fragment,e),o=!1},d(e){e&&(r(t),r(n));for(let t=0;t<s.length;t+=1)s[t].d(e);me(i)}}}function ci(e,t){let n,i,o,s;function c(e){t[11](e,t[23],t[24],t[25])}let a={};return void 0!==t[23]&&(a.argumentDescription=t[23]),i=new Xn({props:a}),G.push((()=>ue(i,"argumentDescription",c))),{key:e,first:null,c(){n=p(),de(i.$$.fragment),this.first=n},m(e,t){l(e,n,t),pe(i,e,t),s=!0},p(e,n){t=e;const s={};!o&&4&n&&(o=!0,s.argumentDescription=t[23],Q((()=>o=!1))),i.$set(s)},i(e){s||(oe(i.$$.fragment,e),s=!0)},o(e){se(i.$$.fragment,e),s=!1},d(e){e&&r(n),me(i,e)}}}function ai(e){let t,n,i;function o(){return e[13](e[20])}return n=new Te({props:{caption:"Удалить модификатор",clickHandler:o}}),{c(){t=c("div"),de(n.$$.fragment),$(t,"class","control-button"),x(t,"margin-top","5px"),x(t,"margin-botton","5px")},m(e,o){l(e,t,o),pe(n,t,null),i=!0},p(t,i){e=t;const s={};4&i&&(s.clickHandler=o),n.$set(s)},i(e){i||(oe(n.$$.fragment,e),i=!0)},o(e){se(n.$$.fragment,e),i=!1},d(e){e&&r(t),me(n)}}}function ui(e,t){let n,i,s,a,p,m,f,g,h,v,w,y,k,_,I,S,N,M,C,A,j,E,L,T,O,z=t[20].name+"",D=t[20].id+"",q=t[20].modifier_description+"",F=t[20].usage_example+"",P=t[20].static?"Статичный":"Динамичный",G=t[0]?._modificators?.find(Z);function Z(...e){return t[9](t[20],...e)}let Y=t[0]&&si(t),H=!0===t[20].showArguments&&!1===t[20].static&&li(t),U=G&&ai(t);return{key:e,first:null,c(){n=c("div"),i=c("div"),s=c("div"),a=u(z),p=u(" ("),m=u(D),f=u(")"),g=d(),Y&&Y.c(),h=d(),v=c("div"),w=c("p"),y=u(q),k=d(),_=c("div"),I=c("p"),S=u("Пример: "),N=u(F),M=d(),C=c("div"),A=c("div"),j=u(P),E=d(),H&&H.c(),L=d(),U&&U.c(),T=d(),$(s,"class","item__name svelte-srjry5"),$(i,"class","item__name-body svelte-srjry5"),$(v,"class","item__description svelte-srjry5"),$(_,"class","item__exaple svelte-srjry5"),$(A,"class","item__name svelte-srjry5"),x(A,"margin-right","5px"),$(C,"class","item__static svelte-srjry5"),$(n,"class","mod-item-body svelte-srjry5"),this.first=n},m(e,t){l(e,n,t),o(n,i),o(i,s),o(s,a),o(s,p),o(s,m),o(s,f),o(i,g),Y&&Y.m(i,null),o(n,h),o(n,v),o(v,w),o(w,y),o(n,k),o(n,_),o(_,I),o(I,S),o(I,N),o(n,M),o(n,C),o(C,A),o(A,j),o(n,E),H&&H.m(n,null),o(n,L),U&&U.m(n,null),o(n,T),O=!0},p(e,o){t=e,(!O||4&o)&&z!==(z=t[20].name+"")&&b(a,z),(!O||4&o)&&D!==(D=t[20].id+"")&&b(m,D),t[0]?Y?(Y.p(t,o),1&o&&oe(Y,1)):(Y=si(t),Y.c(),oe(Y,1),Y.m(i,null)):Y&&(ne(),se(Y,1,1,(()=>{Y=null})),ie()),(!O||4&o)&&q!==(q=t[20].modifier_description+"")&&b(y,q),(!O||4&o)&&F!==(F=t[20].usage_example+"")&&b(N,F),(!O||4&o)&&P!==(P=t[20].static?"Статичный":"Динамичный")&&b(j,P),!0===t[20].showArguments&&!1===t[20].static?H?(H.p(t,o),4&o&&oe(H,1)):(H=li(t),H.c(),oe(H,1),H.m(n,L)):H&&(ne(),se(H,1,1,(()=>{H=null})),ie()),5&o&&(G=t[0]?._modificators?.find(Z)),G?U?(U.p(t,o),5&o&&oe(U,1)):(U=ai(t),U.c(),oe(U,1),U.m(n,T)):U&&(ne(),se(U,1,1,(()=>{U=null})),ie())},i(e){O||(oe(Y),oe(H),oe(U),O=!0)},o(e){se(Y),se(H),se(U),O=!1},d(e){e&&r(n),Y&&Y.d(),H&&H.d(),U&&U.d()}}}function di(e){let t,n,i=!0===e[1]&&ni(e);return{c(){i&&i.c(),t=p()},m(e,o){i&&i.m(e,o),l(e,t,o),n=!0},p(e,[n]){!0===e[1]?i?(i.p(e,n),2&n&&oe(i,1)):(i=ni(e),i.c(),oe(i,1),i.m(t.parentNode,t)):i&&(ne(),se(i,1,1,(()=>{i=null})),ie())},i(e){n||(oe(i),n=!0)},o(e){se(i),n=!1},d(e){e&&r(t),i&&i.d(e)}}}function pi(e,t,n){let i,o;j(e,ye,(e=>n(15,i=e))),j(e,ke,(e=>n(16,o=e)));let{field:s=i}=t,{isShow:l=!0}=t,r=[],c=[],a=[{id:"apply_modifier",value:"Применить",callback:function(e){!1===c[e].static&&c[e].arguments_description?(n(2,c[e].showArguments=!c[e].showArguments,c),n(2,c)):m(r[e])}}],u="";function d(){n(2,c=r.filter((e=>e.name.toUpperCase().includes(u.toUpperCase()))))}function p(){n(2,c=[...r.filter((e=>!1===e.name.toUpperCase().includes(u.toUpperCase()))),...c]),rt(300),d()}function m(e){let t=s?._modificators.find((t=>t.id===e.id));t?t={...e}:(s?._modificators.push(e),e.showArguments=!1),p()}function f(e){e.showArguments=!1,e.arguments_description?.forEach((e=>{e.value=""})),n(0,s._modificators=[...s._modificators.filter((t=>t.id!==e.id))],s),p()}return D((async()=>{await async function(){try{const e=A(ke);if(e&&Object.keys(e)?.length>0)return e;{const e=A(be).cd.url;if(e){xe.set(!0);const t=await fetch(`${function(e){return e.startsWith("http://")?e=e.replace("http://","https://"):e.startsWith("https://")||(e="https://"+e),e.endsWith("/")&&(e=e.slice(0,-1)),e}(e)}/modifiers`,{method:"GET"});if(t.ok){const e=await t.json();return ke.set(e),xe.set(!1),A(ke)}xe.set(!1)}}}catch(e){console.log(e)}return xe.set(!1),{}}(),o&&Object.keys(o)?.length>0&&(r=[...Object.keys(o).map((e=>({id:e,name:o[e].name,arguments_description:o[e].arguments_description,modifier_description:o[e].modifier_description,usage_example:o[e].usage_example,static:o[e].static,showArguments:!!s?._modificators?.find((t=>t.id===e))?.showArguments&&s?._modificators?.find((t=>t.id===e))?.showArguments}))).sort(((e,t)=>e.static-t.static))]),d(),ct("modifiers-body-id")})),q((()=>{T(ye,i=void 0,i),s&&ct(`${s.getSource()}.${s.id}`)})),e.$$set=e=>{"field"in e&&n(0,s=e.field),"isShow"in e&&n(1,l=e.isShow)},[s,l,c,u,a,d,m,function(){n(1,l=!1)},f,(e,t)=>t.id===e.id,function(e){u=e,n(3,u)},function(e,t,i,o){i[o]=e,n(2,c)},e=>m(e),e=>f(e)]}var mi=class extends he{constructor(e){super(),fe(this,e,pi,di,M,{field:0,isShow:1},Kn)}};function fi(e){s(e,"svelte-6g1xk3",".namespace-container.svelte-6g1xk3{padding:10px}.ns-item-body.svelte-6g1xk3{display:flex;align-items:center;justify-content:space-between;padding:10px 15px;border-radius:5px;border:1px solid rgb(226, 218, 218);margin-bottom:3px;cursor:pointer;transition:background-color 0.3s}.ns-item-body.svelte-6g1xk3:hover{background-color:#e0e0e0}.button-container.svelte-6g1xk3{margin-bottom:10px}")}function gi(e,t,n){const i=e.slice();return i[35]=t[n],i[33]=n,i}function hi(e,t,n){const i=e.slice();return i[31]=t[n],i[33]=n,i}function $i(e,t,n){const i=e.slice();return i[31]=t[n],i[33]=n,i}function vi(e){let t,n,i,o;const s=[yi,xi],a=[];function u(e,t){return e[6]?0:1}return n=u(e),i=a[n]=s[n](e),{c(){t=c("div"),i.c(),$(t,"class","namespace-container svelte-6g1xk3")},m(e,i){l(e,t,i),a[n].m(t,null),o=!0},p(e,o){let l=n;n=u(e),n===l?a[n].p(e,o):(ne(),se(a[l],1,1,(()=>{a[l]=null})),ie(),i=a[n],i?i.p(e,o):(i=a[n]=s[n](e),i.c()),oe(i,1),i.m(t,null))},i(e){o||(oe(i),o=!0)},o(e){se(i),o=!1},d(e){e&&r(t),a[n].d()}}}function bi(e){let t,n,i;function o(t){e[18](t)}let s={mainApp:e[7]};return void 0!==e[8]&&(s.isVisible=e[8]),t=new Un({props:s}),G.push((()=>ue(t,"isVisible",o))),{c(){de(t.$$.fragment)},m(e,n){pe(t,e,n),i=!0},p(e,i){const o={};128&i[0]&&(o.mainApp=e[7]),!n&&256&i[0]&&(n=!0,o.isVisible=e[8],Q((()=>n=!1))),t.$set(o)},i(e){i||(oe(t.$$.fragment,e),i=!0)},o(e){se(t.$$.fragment,e),i=!1},d(e){me(t,e)}}}function wi(e){let t,n,i;function o(t){e[17](t)}let s={};return void 0!==e[9]&&(s.isShow=e[9]),t=new mi({props:s}),G.push((()=>ue(t,"isShow",o))),{c(){de(t.$$.fragment)},m(e,n){pe(t,e,n),i=!0},p(e,i){const o={};!n&&512&i[0]&&(n=!0,o.isShow=e[9],Q((()=>n=!1))),t.$set(o)},i(e){i||(oe(t.$$.fragment,e),i=!0)},o(e){se(t.$$.fragment,e),i=!1},d(e){me(t,e)}}}function xi(e){let t,n,i,o,s;function c(t){e[23](t)}let a={placeholder:"Поиск по разделам...",inputHndlr:e[10]};void 0!==e[1]&&(a.value=e[1]),t=new et({props:a}),G.push((()=>ue(t,"value",c)));let u=e[3].length&&ki(e);return{c(){de(t.$$.fragment),i=d(),u&&u.c(),o=p()},m(e,n){pe(t,e,n),l(e,i,n),u&&u.m(e,n),l(e,o,n),s=!0},p(e,i){const s={};!n&&2&i[0]&&(n=!0,s.value=e[1],Q((()=>n=!1))),t.$set(s),e[3].length?u?u.p(e,i):(u=ki(e),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){se(t.$$.fragment,e),s=!1},d(e){e&&(r(i),r(o)),me(t,e),u&&u.d(e)}}}function yi(e){let t,n,i,s,a,m,f,g,h,v,w,x,y,k=e[6].name+"",_=e[7]?` - ${e[7].name}`:"";f=new Te({props:{caption:"Назад",clickHandler:e[14]}});let I=e[7]&&Ii(e);const S=[Ni,Si],N=[];function M(e,t){return e[7]&&e[7]instanceof nt&&e[7].items.length>0?0:1}return v=M(e),w=N[v]=S[v](e),{c(){t=c("h3"),n=u(k),i=d(),s=u(_),a=d(),m=c("div"),de(f.$$.fragment),g=d(),I&&I.c(),h=d(),w.c(),x=p(),$(m,"class","button-container svelte-6g1xk3")},m(e,r){l(e,t,r),o(t,n),o(t,i),o(t,s),l(e,a,r),l(e,m,r),pe(f,m,null),o(m,g),I&&I.m(m,null),l(e,h,r),N[v].m(e,r),l(e,x,r),y=!0},p(e,t){(!y||64&t[0])&&k!==(k=e[6].name+"")&&b(n,k),(!y||128&t[0])&&_!==(_=e[7]?` - ${e[7].name}`:"")&&b(s,_),e[7]?I?(I.p(e,t),128&t[0]&&oe(I,1)):(I=Ii(e),I.c(),oe(I,1),I.m(m,null)):I&&(ne(),se(I,1,1,(()=>{I=null})),ie());let i=v;v=M(e),v===i?N[v].p(e,t):(ne(),se(N[i],1,1,(()=>{N[i]=null})),ie(),w=N[v],w?w.p(e,t):(w=N[v]=S[v](e),w.c()),oe(w,1),w.m(x.parentNode,x))},i(e){y||(oe(f.$$.fragment,e),oe(I),oe(w),y=!0)},o(e){se(f.$$.fragment,e),se(I),se(w),y=!1},d(e){e&&(r(t),r(a),r(m),r(h),r(x)),me(f),I&&I.d(),N[v].d(e)}}}function ki(e){let t,n=[],i=new Map,o=le(e[3]);const s=e=>e[33];for(let t=0;t<o.length;t+=1){let l=gi(e,o,t),r=s(l);i.set(r,n[t]=_i(r,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=p()},m(e,i){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,i);l(e,t,i)},p(e,l){4104&l[0]&&(o=le(e[3]),n=ae(n,l,s,1,e,o,i,t.parentNode,re,_i,t,gi))},d(e){e&&r(t);for(let t=0;t<n.length;t+=1)n[t].d(e)}}}function _i(e,t){let n,i,s,a,p,f,g,h,v,w=t[35].name+"",x=t[35].items?.length+"";function y(){return t[24](t[35])}return{key:e,first:null,c(){n=c("div"),i=c("div"),s=u(w),a=d(),p=c("div"),f=u(x),g=d(),$(i,"class","ns-iten-name"),$(p,"class","ns-iten-count"),$(n,"class","ns-item-body svelte-6g1xk3"),this.first=n},m(e,t){l(e,n,t),o(n,i),o(i,s),o(n,a),o(n,p),o(p,f),o(n,g),h||(v=m(n,"click",y),h=!0)},p(e,n){t=e,8&n[0]&&w!==(w=t[35].name+"")&&b(s,w),8&n[0]&&x!==(x=t[35].items?.length+"")&&b(f,x)},d(e){e&&r(n),h=!1,v()}}}function Ii(e){let t,n;return t=new Te({props:{caption:"Конструктор условий",clickHandler:e[15]}}),{c(){de(t.$$.fragment)},m(e,i){pe(t,e,i),n=!0},p:k,i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){se(t.$$.fragment,e),n=!1},d(e){me(t,e)}}}function Si(e){let t,n,i,o,s;function c(t){e[21](t)}let a={placeholder:"Поиск по приложениям...",inputHndlr:e[11]};void 0!==e[2]&&(a.value=e[2]),t=new et({props:a}),G.push((()=>ue(t,"value",c)));let u=e[4]&&e[4].length>0&&Mi(e);return{c(){de(t.$$.fragment),i=d(),u&&u.c(),o=p()},m(e,n){pe(t,e,n),l(e,i,n),u&&u.m(e,n),l(e,o,n),s=!0},p(e,i){const s={};!n&&4&i[0]&&(n=!0,s.value=e[2],Q((()=>n=!1))),t.$set(s),e[4]&&e[4].length>0?u?u.p(e,i):(u=Mi(e),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){se(t.$$.fragment,e),s=!1},d(e){e&&(r(i),r(o)),me(t,e),u&&u.d(e)}}}function Ni(e){let t,n,i,o,s,c,a=[],u=new Map;function m(t){e[19](t)}function f(t){e[20](t)}let g={};void 0!==e[7].items&&(g.input=e[7].items),void 0!==e[5]&&(g.output=e[5]),t=new Et({props:g}),G.push((()=>ue(t,"input",m))),G.push((()=>ue(t,"output",f)));let h=le(e[5]);const $=e=>e[33];for(let t=0;t<h.length;t+=1){let n=$i(e,h,t),i=$(n);u.set(i,a[t]=Ai(i,n))}return{c(){de(t.$$.fragment),o=d();for(let e=0;e<a.length;e+=1)a[e].c();s=p()},m(e,n){pe(t,e,n),l(e,o,n);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(e,n);l(e,s,n),c=!0},p(e,o){const l={};!n&&128&o[0]&&(n=!0,l.input=e[7].items,Q((()=>n=!1))),!i&&32&o[0]&&(i=!0,l.output=e[5],Q((()=>i=!1))),t.$set(l),161&o[0]&&(h=le(e[5]),ne(),a=ae(a,o,$,1,e,h,u,s.parentNode,ce,Ai,s,$i),ie())},i(e){if(!c){oe(t.$$.fragment,e);for(let e=0;e<h.length;e+=1)oe(a[e]);c=!0}},o(e){se(t.$$.fragment,e);for(let e=0;e<a.length;e+=1)se(a[e]);c=!1},d(e){e&&(r(o),r(s)),me(t,e);for(let t=0;t<a.length;t+=1)a[t].d(e)}}}function Mi(e){let t,n=[],i=new Map,o=le(e[4]);const s=e=>e[33];for(let t=0;t<o.length;t+=1){let l=hi(e,o,t),r=s(l);i.set(r,n[t]=Ci(r,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=p()},m(e,i){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,i);l(e,t,i)},p(e,l){8208&l[0]&&(o=le(e[4]),n=ae(n,l,s,1,e,o,i,t.parentNode,re,Ci,t,hi))},d(e){e&&r(t);for(let t=0;t<n.length;t+=1)n[t].d(e)}}}function Ci(e,t){let n,i,s,a,p,f,g=t[31].name+"";function h(){return t[22](t[31])}return{key:e,first:null,c(){n=c("div"),i=c("div"),s=u(g),a=d(),$(i,"class","ns-iten-name"),$(n,"class","ns-item-body svelte-6g1xk3"),this.first=n},m(e,t){l(e,n,t),o(n,i),o(i,s),o(n,a),p||(f=m(n,"click",h),p=!0)},p(e,n){t=e,16&n[0]&&g!==(g=t[31].name+"")&&b(s,g)},d(e){e&&r(n),p=!1,f()}}}function Ai(e,t){let n,i,o;return i=new on({props:{appItem:t[31],level:t[7].level+1,menuItems:t[0]}}),{key:e,first:null,c(){n=p(),de(i.$$.fragment),this.first=n},m(e,t){l(e,n,t),pe(i,e,t),o=!0},p(e,n){t=e;const o={};32&n[0]&&(o.appItem=t[31]),128&n[0]&&(o.level=t[7].level+1),1&n[0]&&(o.menuItems=t[0]),i.$set(o)},i(e){o||(oe(i.$$.fragment,e),o=!0)},o(e){se(i.$$.fragment,e),o=!1},d(e){e&&r(n),me(i,e)}}}function ji(e){let t,n,i,o;const s=[wi,bi,vi],c=[];function a(e,t){return e[9]?0:e[8]&&e[7]&&e[7]instanceof nt?1:2}return t=a(e),n=c[t]=s[t](e),{c(){n.c(),i=p()},m(e,n){c[t].m(e,n),l(e,i,n),o=!0},p(e,o){let l=t;t=a(e),t===l?c[t].p(e,o):(ne(),se(c[l],1,1,(()=>{c[l]=null})),ie(),n=c[t],n?n.p(e,o):(n=c[t]=s[t](e),n.c()),oe(n,1),n.m(i.parentNode,i))},i(e){o||(oe(n),o=!0)},o(e){se(n),o=!1},d(e){e&&r(i),c[t].d(e)}}}function Ei(e,t,n){let i;j(e,ye,(e=>n(26,i=e)));let o,s,{system:l="elma"}=t,r="",c="",a=[],u=[],d=[],p=[],m=!1,f=!1;function g(){n(4,d=o?.items?.filter((e=>e.name.toUpperCase().includes(c.toUpperCase()))))}function h(e){n(2,c=""),n(6,o=e),n(4,d=[...e.items])}async function $(e){n(7,s=e),s instanceof nt&&(s.items.length||await s.getItems(),n(5,p=[...s.items]))}function v(e){if(e instanceof tt){const t=[...e.parent.getPathToMain().filter((e=>e instanceof nt))];return vt.createNewConditions(t[1],t.slice(2),e),n(8,m=!0),[...e.parent.getPathToMain(),e]}}function b(e){e instanceof tt&&(T(ye,i=e,i),n(9,f=!0))}function w(e){e instanceof tt&&!0===e.isParentSingle()&&ot(e.getSampleString(!1,!1))}return D((async()=>{n(0,Ne[1].callback=v,Ne),n(0,Ne[2].callback=b,Ne),n(0,Ne[0].callback=w,Ne),n(7,s=void 0),await async function(){0===nt.allApps.filter((e=>e.entity===l)).length&&await nt.getBaseStructure(l),a=[...nt.allApps.filter((e=>e.items?.length>0&&e.entity===l))],n(3,u=[...a])}(),console.log(nt.allApps)})),e.$$set=e=>{"system"in e&&n(16,l=e.system)},[Ne,r,c,u,d,p,o,s,m,f,function(){n(3,u=a.filter((e=>e.entity===l&&e.name.toUpperCase().includes(r.toUpperCase()))))},g,h,$,function(){rt(200),s?(n(7,s=void 0),g()):n(6,o=void 0)},function(){n(8,m=!0)},l,function(e){f=e,n(9,f)},function(e){m=e,n(8,m)},function(t){e.$$.not_equal(s.items,t)&&(s.items=t,n(7,s))},function(e){p=e,n(5,p)},function(e){c=e,n(2,c)},e=>$(e),function(e){r=e,n(1,r)},e=>h(e)]}var Li=class extends he{constructor(e){super(),fe(this,e,Ei,ji,M,{system:16},fi,[-1,-1])}};function Ti(e){s(e,"svelte-1w18wh7",".wrap.svelte-1w18wh7{padding:14px 0px 5px 0px;margin:10px auto;height:100%;display:flex;justify-content:center;align-items:center}.sp.svelte-1w18wh7{width:16px;height:16px;top:50%;left:50%;margin-top:-8px;margin-left:-8px;display:block;z-index:101;border:solid 2px transparent;border-top-color:#158fd2;border-left-color:#158fd2;border-radius:100%;-webkit-animation:svelte-1w18wh7-load 900ms linear infinite;animation:svelte-1w18wh7-load 900ms linear infinite}@keyframes svelte-1w18wh7-load{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}")}function Oi(e){let t;return{c(){t=c("div"),t.innerHTML='<div class="sp svelte-1w18wh7"></div>',$(t,"class","wrap svelte-1w18wh7")},m(e,n){l(e,t,n)},p:k,i:k,o:k,d(e){e&&r(t)}}}function zi(e){return[]}var Di=class extends he{constructor(e){super(),fe(this,e,zi,Oi,M,{},Ti)}};function qi(e){s(e,"svelte-15esvsr",".overlay.svelte-15esvsr{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0);backdrop-filter:blur(0px);z-index:1000;transition:background-color 0.3s ease,\r\n      backdrop-filter 0.3s ease;pointer-events:none}.active.svelte-15esvsr{display:block;background-color:rgba(0, 0, 0, 0.2);backdrop-filter:blur(3px);pointer-events:auto}")}function Fi(e){let t,n,i,o;return n=new Di({}),{c(){t=c("div"),de(n.$$.fragment),$(t,"class",i="overlay "+(e[0]?"active":"")+" svelte-15esvsr")},m(e,i){l(e,t,i),pe(n,t,null),o=!0},p(e,[n]){(!o||1&n&&i!==(i="overlay "+(e[0]?"active":"")+" svelte-15esvsr"))&&$(t,"class",i)},i(e){o||(oe(n.$$.fragment,e),o=!0)},o(e){se(n.$$.fragment,e),o=!1},d(e){e&&r(t),me(n)}}}function Pi(e,t,n){let i;return j(e,xe,(e=>n(0,i=e))),[i]}var Gi=class extends he{constructor(e){super(),fe(this,e,Pi,Fi,M,{},qi)}};function Zi(e){s(e,"svelte-10424li",".main-container.svelte-10424li{background-color:#f5f5f5}")}function Yi(e){let t,n;return t=new ht({}),{c(){de(t.$$.fragment)},m(e,i){pe(t,e,i),n=!0},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){se(t.$$.fragment,e),n=!1},d(e){me(t,e)}}}function Hi(e){let t,n;return t=new Li({props:{system:"elma"}}),{c(){de(t.$$.fragment)},m(e,i){pe(t,e,i),n=!0},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){se(t.$$.fragment,e),n=!1},d(e){me(t,e)}}}function Ui(e){let t,n;return t=new mi({}),{c(){de(t.$$.fragment)},m(e,i){pe(t,e,i),n=!0},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){se(t.$$.fragment,e),n=!1},d(e){me(t,e)}}}function Ri(e){let t,n;return t=new Li({props:{system:"amoCRM"}}),{c(){de(t.$$.fragment)},m(e,i){pe(t,e,i),n=!0},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){se(t.$$.fragment,e),n=!1},d(e){me(t,e)}}}function Ji(e){let t,n,i,s,a,u,p,m,f;t=new Gi({}),s=new Ge({});let g="connect-settings"===e[0]&&Yi(),h="elmaStrings"===e[0]&&Hi(),v="modifiers"===e[0]&&Ui(),b="amoCrmStrings"===e[0]&&Ri();return{c(){de(t.$$.fragment),n=d(),i=c("div"),de(s.$$.fragment),a=d(),g&&g.c(),u=d(),h&&h.c(),p=d(),v&&v.c(),m=d(),b&&b.c(),$(i,"class","main-container svelte-10424li")},m(e,r){pe(t,e,r),l(e,n,r),l(e,i,r),pe(s,i,null),o(i,a),g&&g.m(i,null),o(i,u),h&&h.m(i,null),o(i,p),v&&v.m(i,null),o(i,m),b&&b.m(i,null),f=!0},p(e,[t]){"connect-settings"===e[0]?g?1&t&&oe(g,1):(g=Yi(),g.c(),oe(g,1),g.m(i,u)):g&&(ne(),se(g,1,1,(()=>{g=null})),ie()),"elmaStrings"===e[0]?h?1&t&&oe(h,1):(h=Hi(),h.c(),oe(h,1),h.m(i,p)):h&&(ne(),se(h,1,1,(()=>{h=null})),ie()),"modifiers"===e[0]?v?1&t&&oe(v,1):(v=Ui(),v.c(),oe(v,1),v.m(i,m)):v&&(ne(),se(v,1,1,(()=>{v=null})),ie()),"amoCrmStrings"===e[0]?b?1&t&&oe(b,1):(b=Ri(),b.c(),oe(b,1),b.m(i,null)):b&&(ne(),se(b,1,1,(()=>{b=null})),ie())},i(e){f||(oe(t.$$.fragment,e),oe(s.$$.fragment,e),oe(g),oe(h),oe(v),oe(b),f=!0)},o(e){se(t.$$.fragment,e),se(s.$$.fragment,e),se(g),se(h),se(v),se(b),f=!1},d(e){e&&(r(n),r(i)),me(t,e),me(s),g&&g.d(),h&&h.d(),v&&v.d(),b&&b.d()}}}function Qi(e,t,n){let i;return j(e,we,(e=>n(0,i=e))),D((()=>{})),[i]}var Wi=class extends he{constructor(e){super(),fe(this,e,Qi,Ji,M,{},Zi)}};Office.onReady((()=>{new Wi({target:document.getElementById("app-start")})}))}(),new URL(n(58394),n.b)}();
//# sourceMappingURL=taskpane.js.map