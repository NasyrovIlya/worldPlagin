!function(){"use strict";var e={58394:function(e,t,n){e.exports=n.p+"52722ae811405bdf8f27.css"}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var o=i.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=i[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),n.b=document.baseURI||self.location.href,function(){new Set;const e="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;class t{_listeners="WeakMap"in e?new WeakMap:void 0;_observer=void 0;options;constructor(e){this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver((e=>{for(const n of e)t.entries.set(n.target,n),this._listeners.get(n.target)?.(n)})))}}t.entries="WeakMap"in e?new WeakMap:void 0;let n,i=!1;function o(e,t){e.appendChild(t)}function s(e,t,n){const i=function(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}(e);if(!i.getElementById(t)){const e=c("style");e.id=t,e.textContent=n,function(e,t){o(e.head||e,t),t.sheet}(i,e)}}function l(e,t,n){e.insertBefore(t,n||null)}function r(e){e.parentNode&&e.parentNode.removeChild(e)}function c(e){return document.createElement(e)}function a(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function u(e){return document.createTextNode(e)}function d(){return u(" ")}function p(){return u("")}function f(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function m(e){return function(t){return t.preventDefault(),e.call(this,t)}}function g(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function h(e){return function(t){t.target===this&&e.call(this,t)}}function v(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $(e){return""===e?null:+e}function b(e,t){t=""+t,e.data!==t&&(e.data=t)}function x(e,t){e.value=null==t?"":t}function w(e,t,n){e.classList.toggle(t,!!n)}function y(){}function k(e){return e()}function I(){return Object.create(null)}function S(e){e.forEach(k)}function _(e){return"function"==typeof e}function N(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function A(e,...t){if(null==e){for(const e of t)e(void 0);return y}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function C(e){let t;return A(e,(e=>t=e))(),t}function M(e,t,n){e.$$.on_destroy.push(A(t,n))}function E(e,t,n,i){return e[1]&&i?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](i(t))):n.ctx}function L(e){return null==e?"":e}function T(e,t,n){return e.set(n),t}function O(e){n=e}function z(e){(function(){if(!n)throw new Error("Function called outside component initialization");return n})().$$.on_mount.push(e)}function j(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}new Map;const D=[],P=[];let F=[];const q=[],H=Promise.resolve();let Z=!1;function U(){Z||(Z=!0,H.then(J))}function G(e){F.push(e)}function Q(e){q.push(e)}const R=new Set;let B=0;function J(){if(0!==B)return;const e=n;do{try{for(;B<D.length;){const e=D[B];B++,O(e),V(e.$$)}}catch(e){throw D.length=0,B=0,e}for(O(null),D.length=0,B=0;P.length;)P.pop()();for(let e=0;e<F.length;e+=1){const t=F[e];R.has(t)||(R.add(t),t())}F.length=0}while(D.length);for(;q.length;)q.pop()();Z=!1,R.clear(),O(e)}function V(e){if(null!==e.fragment){e.update(),S(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(G)}}const Y=new Set;let W,X;function K(){W={r:0,c:[],p:W}}function ee(){W.r||S(W.c),W=W.p}function te(e,t){e&&e.i&&(Y.delete(e),e.i(t))}function ne(e,t,n,i){if(e&&e.o){if(Y.has(e))return;Y.add(e),W.c.push((()=>{Y.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}else i&&i()}function ie(e){return void 0!==e?.length?e:Array.from(e)}function oe(e,t){e.d(1),t.delete(e.key)}function se(e,t){ne(e,1,1,(()=>{t.delete(e.key)}))}function le(e,t,n,i,o,s,l,r,c,a,u,d){let p=e.length,f=s.length,m=p;const g={};for(;m--;)g[e[m].key]=m;const h=[],v=new Map,$=new Map,b=[];for(m=f;m--;){const e=d(o,s,m),r=n(e);let c=l.get(r);c?i&&b.push((()=>c.p(e,t))):(c=a(r,e),c.c()),v.set(r,h[m]=c),r in g&&$.set(r,Math.abs(m-g[r]))}const x=new Set,w=new Set;function y(e){te(e,1),e.m(r,u),l.set(e.key,e),u=e.first,f--}for(;p&&f;){const t=h[f-1],n=e[p-1],i=t.key,o=n.key;t===n?(u=t.first,p--,f--):v.has(o)?!l.has(i)||x.has(i)?y(t):w.has(o)?p--:$.get(i)>$.get(o)?(w.add(i),y(t)):(x.add(o),p--):(c(n,l),p--)}for(;p--;){const t=e[p];v.has(t.key)||c(t,l)}for(;f;)y(h[f-1]);return S(b),h}function re(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function ce(e){e&&e.c()}function ae(e,t,n){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),G((()=>{const t=e.$$.on_mount.map(k).filter(_);e.$$.on_destroy?e.$$.on_destroy.push(...t):S(t),e.$$.on_mount=[]})),o.forEach(G)}function ue(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];F.forEach((i=>-1===e.indexOf(i)?t.push(i):n.push(i))),n.forEach((e=>e())),F=t}(n.after_update),S(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function de(e,t,o,s,l,c,a=null,u=[-1]){const d=n;O(e);const p=e.$$={fragment:null,ctx:[],props:c,update:y,not_equal:l,bound:I(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:I(),dirty:u,skip_bound:!1,root:t.target||d.$$.root};a&&a(p.root);let f=!1;if(p.ctx=o?o(e,t.props||{},((t,n,...i)=>{const o=i.length?i[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),f&&function(e,t){-1===e.$$.dirty[0]&&(D.push(e),U(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],p.update(),f=!0,S(p.before_update),p.fragment=!!s&&s(p.ctx),t.target){if(t.hydrate){i=!0;const e=(m=t.target,Array.from(m.childNodes));p.fragment&&p.fragment.l(e),e.forEach(r)}else p.fragment&&p.fragment.c();t.intro&&te(e.$$.fragment),ae(e,t.target,t.anchor),i=!1,J()}var m;O(d)}function pe(e,t,n,i){const o=n[e]?.type;if(t="Boolean"===o&&"boolean"!=typeof t?null!=t:t,!i||!n[e])return t;if("toAttribute"===i)switch(o){case"Object":case"Array":return null==t?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return null==t?null:t;default:return t}else switch(o){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":default:return t;case"Number":return null!=t?+t:t}}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(X=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(e,t,n){super(),this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const n=this.$$c.$on(e,t);this.$$l_u.set(t,n)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const e=this.$$l_u.get(t);e&&(e(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){if(await Promise.resolve(),!this.$$cn||this.$$c)return;function e(e){return()=>{let t;return{c:function(){t=c("slot"),"default"!==e&&v(t,"name",e)},m:function(e,n){l(e,t,n)},d:function(e){e&&r(t)}}}}const t={},n=function(e){const t={};return e.childNodes.forEach((e=>{t[e.slot||"default"]=!0})),t}(this);for(const o of this.$$s)o in n&&(t[o]=[e(o)]);for(const s of this.attributes){const a=this.$$g_p(s.name);a in this.$$d||(this.$$d[a]=pe(a,s.value,this.$$p_d,"toProp"))}for(const u in this.$$p_d)u in this.$$d||void 0===this[u]||(this.$$d[u]=this[u],delete this[u]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});const i=()=>{this.$$r=!0;for(const e in this.$$p_d)if(this.$$d[e]=this.$$c.$$.ctx[this.$$c.$$.props[e]],this.$$p_d[e].reflect){const t=pe(e,this.$$d[e],this.$$p_d,"toAttribute");null==t?this.removeAttribute(this.$$p_d[e].attribute||e):this.setAttribute(this.$$p_d[e].attribute||e,t)}this.$$r=!1};this.$$c.$$.after_update.push(i),i();for(const d in this.$$l)for(const p of this.$$l[d]){const f=this.$$c.$on(d,p);this.$$l_u.set(p,f)}this.$$l={}}}attributeChangedCallback(e,t,n){this.$$r||(e=this.$$g_p(e),this.$$d[e]=pe(e,n,this.$$p_d,"toProp"),this.$$c?.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then((()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)}))}$$g_p(e){return Object.keys(this.$$p_d).find((t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e))||e}});class fe{$$=void 0;$$set=void 0;$destroy(){ue(this,1),this.$destroy=y}$on(e,t){if(!_(t))return y;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const me=[];function ge(e,t=y){let n;const i=new Set;function o(t){if(N(e,t)&&(e=t,n)){const t=!me.length;for(const t of i)t[1](),me.push(t,e);if(t){for(let e=0;e<me.length;e+=2)me[e][0](me[e+1]);me.length=0}}}function s(t){o(t(e))}return{set:o,update:s,subscribe:function(l,r=y){const c=[l,r];return i.add(c),1===i.size&&(n=t(o,s)||y),l(e),()=>{i.delete(c),0===i.size&&n&&(n(),n=null)}}}}const he=ge({elma:{idIntegration:"",url:"",getStructureApp:"",getFieldsApp:""},amo:{url:""}}),ve=ge("connect-settings");let $e=ge(!1);function be(e){s(e,"svelte-16suk8p",".custom-button.svelte-16suk8p{padding:10px 15px;background-color:#007bff;color:white;border:none;border-radius:5px;cursor:pointer;font-size:16px;background-repeat:no-repeat}.custom-button.svelte-16suk8p:hover{background-color:#0056b3}")}function xe(e){let t,n,i,s;return{c(){t=c("button"),n=u(e[1]),v(t,"class","custom-button svelte-16suk8p"),v(t,"style",e[2])},m(r,c){l(r,t,c),o(t,n),i||(s=f(t,"click",(function(){_(e[0])&&e[0].apply(this,arguments)})),i=!0)},p(i,[o]){e=i,2&o&&b(n,e[1]),4&o&&v(t,"style",e[2])},i:y,o:y,d(e){e&&r(t),i=!1,s()}}}function we(e,t,n){let{clickHandler:i=e=>{}}=t,{caption:o=""}=t,{style:s=""}=t;return e.$$set=e=>{"clickHandler"in e&&n(0,i=e.clickHandler),"caption"in e&&n(1,o=e.caption),"style"in e&&n(2,s=e.style)},[i,o,s]}var ye=class extends fe{constructor(e){super(),de(this,e,we,xe,N,{clickHandler:0,caption:1,style:2},be)}};function ke(e){s(e,"svelte-gb6wft",".menu-container.svelte-gb6wft{display:flex;align-items:center;justify-content:space-between;position:relative;padding:10px 10px}.take-item-menu.svelte-gb6wft{margin-left:15px;margin-bottom:10px;font-weight:bold}.menu.svelte-gb6wft{width:250px;background-color:#f7f7f7;border:1px solid #ddd;border-radius:5px;padding:10px;box-shadow:0 2px 5px rgba(0, 0, 0, 0.1);position:absolute;top:42px;right:0;z-index:1}.option.svelte-gb6wft{padding:10px;cursor:pointer;border-radius:3px;transition:background-color 0.3s}.option.svelte-gb6wft:hover{background-color:#e0e0e0}.active.svelte-gb6wft{background-color:#d0e9ff;font-weight:bold}")}function Ie(e,t,n){const i=e.slice();return i[8]=t[n],i}function Se(e){let t,n=ie(e[2]),i=[];for(let t=0;t<n.length;t+=1)i[t]=_e(Ie(e,n,t));return{c(){t=c("div");for(let e=0;e<i.length;e+=1)i[e].c();v(t,"class","menu svelte-gb6wft")},m(e,n){l(e,t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,o){if(14&o){let s;for(n=ie(e[2]),s=0;s<n.length;s+=1){const l=Ie(e,n,s);i[s]?i[s].p(l,o):(i[s]=_e(l),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(e){e&&r(t),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(i,e)}}}function _e(e){let t,n,i,s,a,p,m=e[8].label+"";function g(){return e[6](e[8])}return{c(){t=c("div"),n=u(m),i=d(),v(t,"class",s="option "+(e[8].value===e[1]?"active":"")+" svelte-gb6wft")},m(e,s){l(e,t,s),o(t,n),o(t,i),a||(p=f(t,"click",g),a=!0)},p(n,i){e=n,2&i&&s!==(s="option "+(e[8].value===e[1]?"active":"")+" svelte-gb6wft")&&v(t,"class",s)},d(e){e&&r(t),a=!1,p()}}}function Ne(e){let t,n,i,s,a,p,f,m=e[2].find(e[5])?.label+"";a=new ye({props:{clickHandler:e[4],caption:"Меню"}});let g=e[0]&&Se(e);return{c(){t=c("div"),n=c("div"),i=u(m),s=d(),ce(a.$$.fragment),p=d(),g&&g.c(),v(n,"class","take-item-menu svelte-gb6wft"),v(t,"class","menu-container svelte-gb6wft")},m(e,r){l(e,t,r),o(t,n),o(n,i),o(t,s),ae(a,t,null),o(t,p),g&&g.m(t,null),f=!0},p(e,[n]){(!f||2&n)&&m!==(m=e[2].find(e[5])?.label+"")&&b(i,m),e[0]?g?g.p(e,n):(g=Se(e),g.c(),g.m(t,null)):g&&(g.d(1),g=null)},i(e){f||(te(a.$$.fragment,e),f=!0)},o(e){ne(a.$$.fragment,e),f=!1},d(e){e&&r(t),ue(a),g&&g.d()}}}function Ae(e,t,n){let i;M(e,ve,(e=>n(1,i=e)));let o=!1;function s(e){ve.set(e.value),n(0,o=!1)}function l(e){e.target.closest(".menu")||n(0,o=!1)}return z((()=>{const e=document.querySelector(".main-container");e&&(e.removeEventListener("click",l,!0),e.addEventListener("click",l,!0))})),[o,i,[{label:"Настройки соединения",value:"connect-settings"},{label:"Шаблонные строки из amoCRM",value:"amoCrmStrings"},{label:"Шаблонные строки из Elma",value:"elmaStrings"}],s,function(){n(0,o=!o)},e=>e.value===i,e=>s(e)]}var Ce=class extends fe{constructor(e){super(),de(this,e,Ae,Ne,N,{},ke)}};let Me=function(e){return e[e.string=1]="string",e[e.number=2]="number",e[e.date=3]="date",e[e.enum=4]="enum",e[e.boolean=5]="boolean",e}({});function Ee(e){s(e,"svelte-30nqfm",".label.svelte-30nqfm.svelte-30nqfm{display:flex;align-items:center;cursor:pointer}.label.disabled.svelte-30nqfm.svelte-30nqfm{opacity:0.65;cursor:default}.wrap.svelte-30nqfm.svelte-30nqfm{padding:0;margin:0;margin-right:7px}.real-checkbox.svelte-30nqfm.svelte-30nqfm{position:absolute;opacity:0;width:20px;height:20px}.checkbox.svelte-30nqfm.svelte-30nqfm{position:relative;width:18px;height:18px;display:inline-flex;background-color:#fff;border:1px solid #e8e8e8;border-radius:3px;background-repeat:no-repeat}.real-checkbox.svelte-30nqfm:disabled~.wrap .checkbox.svelte-30nqfm{background-color:#f1f1f1}.real-checkbox.svelte-30nqfm:checked~.wrap .checkbox.svelte-30nqfm:not(.minus){background-image:url(data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJfeDIwMTRfX0l0ZW1fMV8iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMXB4IiB2aWV3Qm94PSIwIDAgMTIgMTEiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEyIDExIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJjaGVjay5zdmciPg0KCTxnPg0KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzJFMzY0MCIgZD0iTTExLjQ3NiwwLjE1MWMtMC4zNzctMC4yOTYtMC45OTctMC4xMzktMS4zNTksMC4zMjRMNS4xNTMsNi41Mw0KCQkJQzUuMDc3LDYuNjI0LDQuODg0LDYuNjU3LDQuNzg1LDYuNTk1TDEuNzIzLDQuNjg4QzEuMjQsNC4zNDIsMC42MjQsNC4zNjYsMC4zNDksNC43NTNjLTAuMjY4LDAuMzc4LTAuMTgsMC45OTQsMC4yMDksMS40NjQNCgkJCWwzLjUwOSw0LjIzNEM0LjM2MSwxMC44MDUsNC43NDIsMTEsNS4xNCwxMWMwLjQ2NSwwLDAuODk1LTAuMjY2LDEuMTc3LTAuNzI4bDUuMjY0LTguNjE1QzExLjkxNiwxLjEwOSwxMS44NzEsMC40NjIsMTEuNDc2LDAuMTUxDQoJCQl6Ii8+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=);background-size:70%;background-position:center}.checkbox.minus.svelte-30nqfm.svelte-30nqfm{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gDTwhLS0gR2VuZXJhdGVkIGJ5IExheWVyaGVybyBTVkcgRXhwb3J0ZXI6IGh0dHA6Ly93d3cubGF5ZXJoZXJvLmNvbS9waG90b3Nob3Atc3ZnLWV4cG9ydGVyIC0tPg08IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPg08c3ZnIHZlcnNpb249IjEuMSIgYmFzZVByb2ZpbGU9ImZ1bGwiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmV2PSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHMiIHdpZHRoPSIxMCIgaGVpZ2h0PSI0IiB2aWV3Qm94PSIwIDAgMTAgNCI+DTxnIHRyYW5zZm9ybT0ic2NhbGUoTmFOKSIgPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgIGZpbGw9InJnYiggNDYsIDU0LCA2NCApIg0gZD0iTS0wLjQ0NCwwLjExMSBDLTAuNDQ0LDAuMTExIDEuODA5LC0wLjEzOSA0LjA0NiwtMC4xMzkgQzYuMjUzLC0wLjEzOSA4LjQ0NSwwLjExMSA4LjQ0NSwwLjExMSBDOC40NDUsMC4xMTEgOC40NDUsMS41ODMgOC40NDUsMS41ODMgQzguNDQ1LDEuNTgzIDYuMzA1LDIuMDU2IDQuMTI1LDIuMDU2IEMxLjg2MiwyLjA1NiAtMC40NDQsMS41ODMgLTAuNDQ0LDEuNTgzIEMtMC40NDQsMS41ODMgLTAuNDQ0LDAuMTExIC0wLjQ0NCwwLjExMSBaIi8+DTwvZz48L3N2Zz4N);background-size:75%;background-position:75% 60%}")}function Le(e){let t,n,i,s,a,u,p,m,g,h,$;const b=e[6].default,x=function(e,t,n){if(e){const i=E(e,t,n,null);return e[0](i)}}(b,e,e[5]);return{c(){t=c("label"),n=c("input"),i=d(),s=c("div"),a=c("span"),u=d(),p=c("div"),x&&x.c(),v(n,"class","real-checkbox svelte-30nqfm"),n.disabled=e[1],v(n,"type","checkbox"),v(a,"class","checkbox svelte-30nqfm"),w(a,"minus",e[2]),v(s,"class","wrap svelte-30nqfm"),v(t,"class",m="label "+e[3]+" svelte-30nqfm"),w(t,"disabled",e[1])},m(r,c){l(r,t,c),o(t,n),n.checked=e[0],o(t,i),o(t,s),o(s,a),o(t,u),o(t,p),x&&x.m(p,null),g=!0,h||($=[f(n,"change",e[7]),f(n,"change",e[8]),f(n,"change",e[9])],h=!0)},p(e,[i]){(!g||2&i)&&(n.disabled=e[1]),1&i&&(n.checked=e[0]),(!g||4&i)&&w(a,"minus",e[2]),x&&x.p&&(!g||32&i)&&function(e,t,n,i,o,s){if(o){const l=E(t,n,i,s);e.p(l,o)}}(x,b,e,e[5],g?function(e,t,n,i){if(e[2]&&i){const o=e[2](i(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|o[i];return e}return t.dirty|o}return t.dirty}(b,e[5],i,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[5]),null),(!g||8&i&&m!==(m="label "+e[3]+" svelte-30nqfm"))&&v(t,"class",m),(!g||10&i)&&w(t,"disabled",e[1])},i(e){g||(te(x,e),g=!0)},o(e){ne(x,e),g=!1},d(e){e&&r(t),x&&x.d(e),h=!1,S($)}}}function Te(e,t,n){let{$$slots:i={},$$scope:o}=t,{disabled:s=!1}=t,{checked:l=!1}=t,{minus:r=!1}=t,{classes:c=""}=t,{onChange:a=null}=t;return e.$$set=e=>{"disabled"in e&&n(1,s=e.disabled),"checked"in e&&n(0,l=e.checked),"minus"in e&&n(2,r=e.minus),"classes"in e&&n(3,c=e.classes),"onChange"in e&&n(4,a=e.onChange),"$$scope"in e&&n(5,o=e.$$scope)},[l,s,r,c,a,o,i,function(t){j.call(this,e,t)},()=>a&&setTimeout((()=>a(l)),0),function(){l=this.checked,n(0,l)}]}var Oe=class extends fe{constructor(e){super(),de(this,e,Te,Le,N,{disabled:1,checked:0,minus:2,classes:3,onChange:4},Ee)}};function ze(e){s(e,"svelte-ney06a",".input-custom.svelte-ney06a{width:95%;border-radius:0.4rem;border:1px solid #d9d9d9;display:block;padding:10px;background-color:#fff;background-image:none;background-clip:padding-box;color:#252525;line-height:normal;transition:background 0.15s linear,\r\n      box-shadow 0.15s linear;outline:none;margin-bottom:5px}")}function je(e){let t,n,i;return{c(){t=c("input"),v(t,"type","text"),v(t,"class","input-custom svelte-ney06a"),v(t,"title",e[1]),v(t,"placeholder",e[1])},m(o,s){l(o,t,s),x(t,e[0]),n||(i=[f(t,"input",e[6]),f(t,"input",(function(){_(e[2])&&e[2].apply(this,arguments)}))],n=!0)},p(n,i){e=n,2&i&&v(t,"title",e[1]),2&i&&v(t,"placeholder",e[1]),1&i&&t.value!==e[0]&&x(t,e[0])},d(e){e&&r(t),n=!1,S(i)}}}function De(e){let t,n,i;return{c(){t=c("input"),v(t,"type","number"),v(t,"class","input-custom svelte-ney06a"),v(t,"title",e[1]),v(t,"placeholder",e[1])},m(o,s){l(o,t,s),x(t,e[0]),n||(i=[f(t,"input",e[7]),f(t,"input",(function(){_(e[2])&&e[2].apply(this,arguments)}))],n=!0)},p(n,i){e=n,2&i&&v(t,"title",e[1]),2&i&&v(t,"placeholder",e[1]),1&i&&$(t.value)!==e[0]&&x(t,e[0])},d(e){e&&r(t),n=!1,S(i)}}}function Pe(e){let t,n,i;return{c(){t=c("input"),v(t,"type","date"),v(t,"class","input-custom svelte-ney06a"),v(t,"title",e[1]),v(t,"placeholder",e[1])},m(o,s){l(o,t,s),x(t,e[4]),n||(i=[f(t,"input",e[8]),f(t,"input",e[5])],n=!0)},p(e,n){2&n&&v(t,"title",e[1]),2&n&&v(t,"placeholder",e[1]),16&n&&x(t,e[4])},d(e){e&&r(t),n=!1,S(i)}}}function Fe(e){let t,n,i,o,s;function c(t){e[9](t)}let a={};return void 0!==e[0]&&(a.checked=e[0]),i=new Oe({props:a}),P.push((()=>re(i,"checked",c))),{c(){t=u(e[1]),n=d(),ce(i.$$.fragment)},m(e,o){l(e,t,o),l(e,n,o),ae(i,e,o),s=!0},p(e,n){(!s||2&n)&&b(t,e[1]);const l={};!o&&1&n&&(o=!0,l.checked=e[0],Q((()=>o=!1))),i.$set(l)},i(e){s||(te(i.$$.fragment,e),s=!0)},o(e){ne(i.$$.fragment,e),s=!1},d(e){e&&(r(t),r(n)),ue(i,e)}}}function qe(e){let t,n,i,o,s,c=e[3]===Me.string&&je(e),a=e[3]===Me.number&&De(e),u=e[3]===Me.date&&Pe(e),f=e[3]===Me.boolean&&Fe(e);return{c(){c&&c.c(),t=d(),a&&a.c(),n=d(),u&&u.c(),i=d(),f&&f.c(),o=p()},m(e,r){c&&c.m(e,r),l(e,t,r),a&&a.m(e,r),l(e,n,r),u&&u.m(e,r),l(e,i,r),f&&f.m(e,r),l(e,o,r),s=!0},p(e,[s]){e[3]===Me.string?c?c.p(e,s):(c=je(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),e[3]===Me.number?a?a.p(e,s):(a=De(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),e[3]===Me.date?u?u.p(e,s):(u=Pe(e),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null),e[3]===Me.boolean?f?(f.p(e,s),8&s&&te(f,1)):(f=Fe(e),f.c(),te(f,1),f.m(o.parentNode,o)):f&&(K(),ne(f,1,1,(()=>{f=null})),ee())},i(e){s||(te(f),s=!0)},o(e){ne(f),s=!1},d(e){e&&(r(t),r(n),r(i),r(o)),c&&c.d(e),a&&a.d(e),u&&u.d(e),f&&f.d(e)}}}function He(e){if(void 0===e||""===e.trim())return"";const t=e.split("-");if(3!==t.length)return"";const[n,i,o]=t;return 4!==n.length||2!==i.length||2!==o.length?"":`${o}.${i}.${n}`}function Ze(e,t,n){let{placeholder:i=""}=t,{value:o=""}=t,{inputHndlr:s=e=>{}}=t,{typeInput:l=Me.string}=t,r=o;return e.$$set=e=>{"placeholder"in e&&n(1,i=e.placeholder),"value"in e&&n(0,o=e.value),"inputHndlr"in e&&n(2,s=e.inputHndlr),"typeInput"in e&&n(3,l=e.typeInput)},e.$$.update=()=>{25&e.$$.dirty&&l===Me.date&&""===o&&n(0,o=He(r))},[o,i,s,l,r,function(e){n(0,o=He(r)),s(e)},function(){o=this.value,n(0,o),n(3,l),n(4,r)},function(){o=$(this.value),n(0,o),n(3,l),n(4,r)},function(){r=this.value,n(4,r)},function(e){o=e,n(0,o),n(3,l),n(4,r)}]}var Ue=class extends fe{constructor(e){super(),de(this,e,Ze,qe,N,{placeholder:1,value:0,inputHndlr:2,typeInput:3},ze)}};class Ge{id="";name="";type="STRING";single=!0;_checked=!1;_path="";constructor(e,t,n,i,o,s){this.id=e,this.name=t,this.type=n,this.single=i,this.parent=o,this.context=s}async getChildFields(){return[]}static async getFieldsFromApp(e,t,n){const i=[],{elma:o}=C(he);$e.set(!0);const s=await fetch(`${o.url}api/extensions/${o.idIntegration}/script/${o.getFieldsApp}`,{method:"POST",body:JSON.stringify({ns:e,app:t})});if(s.ok){const e=await s.json();if(e.success){const t=[...(l=[...e.body],l.filter((e=>["__id","__name","__status","__file","__createdAt"].includes(e.id)||!e.id.startsWith("__"))))];t.length>0&&t.forEach((e=>{i.push(Ke(e,n))}))}}var l;return $e.set(!1),i}getSampleString(e=!1,t=!0){let n=this.id,i=this.parent;const o=[];for(;i;){if(i){const e=Xe(i.id);Array.isArray(e)?(n=`${e[2]}.${n}`,o.unshift(e[2])):(n=`${i.id}.${n}`,o.unshift(i.id))}i=i.parent}return o.push(this.id),t?e?o.join("."):`{{ ${o.join(".")} }}`:e?o.splice(1).join("."):`{{ ${o.splice(1).join(".")} }}`}isParentSingle(){let e=this.parent;for(;e;){if(e&&!1===e.single)return!1;e=e.parent}return!0}getId(){return Array.isArray(Xe(this.id))?Xe(this.id)[2]:this.id}getSource(){let e="";const t=this.parent,n=t?.getPathToMain();if(n&&n.length>0)for(let t=0;t<n.length;t++){const i=n[t];e=i.single&&e?`${e}.${i.getId()}`:i.getId()}return e}}const Qe=["SYS_COLLECTION","TABLE","STATUS","SYS_USER","FULL_NAME"],Re={id:"constractionId",value:"Создавть условие с полем",callback:function(e){return e}},Be=[{id:"Equals",value:"Равняется",type:[Me.string,Me.number,Me.date,Me.enum,Me.boolean]},{id:"NoEquals",value:"Не равняется",type:[Me.string,Me.number,Me.date,Me.enum,Me.boolean]},{id:"OneOf",value:"Хотя бы один",type:[Me.enum]},{id:"None",value:"Ни один",type:[Me.enum]},{id:"More",value:"Больше",type:[Me.number,Me.date]},{id:"Less",value:"Меньше",type:[Me.number,Me.date]},{id:"GreateOrEqual",value:"Больше или равно",type:[Me.number,Me.date]},{id:"LessOrEqual",value:"Меньше ли равно",type:[Me.number,Me.date]}],Je=[{id:"and",value:"И"},{id:"or",value:"Или"},{id:"elif",value:"Иначе если"}];class Ve{id="";name="";items=[];isOpen=!1;parent=void 0;entity="elma";type="SYS_COLLECTION";single=!0;level=0;_checked=!1;constructor(e,t,n,i=[],o=void 0,s="SYS_COLLECTION",l=!0,r=1){this.id=e,this.name=t,this.items=i,this.parent=o,this.entity=n,this.type=s,this.single=l,this.level=r}static allApps=[];static async getBaseStructure(e){if("elma"===e)try{const{elma:e}=C(he);Ve.allApps=[],$e.set(!0);const t=await fetch(`${e.url}api/extensions/${e.idIntegration}/script/${e.getStructureApp}`);if(t.ok){const e=(await t.json()).body;if(e&&e.length)for(let t=0;t<e.length;t++){const n=e[t],i=new Ve(n.id,n.value,"elma");n.applications?.length>0&&n.applications.forEach((e=>{const t=new Ve(e.id,e.value,"elma",[],i);t.level=i.level+1,i.items.push(t)})),Ve.allApps.push(i)}}else console.error("Fetch error:",t.statusText);$e.set(!1)}catch(e){console.error("Error in getElmaStructure:",e),$e.set(!1)}}async getItems(){if("elma"===this.entity){if(this.items.length>0)return this.items;if(this.parent){const e=Xe(this.id);if(3===e.length){$e.set(!0);const t=await Ge.getFieldsFromApp(e[0],e[1],this);return $e.set(!1),this.items=[...t],this.items}const t=await Ge.getFieldsFromApp(this.parent.id,this.id,this);return this.items=[...t],this.items}return[]}return this.items}isParentSingle(){let e=this.parent;for(;e;){if(e&&!1===e.single)return!1;e=e.parent}return!0}getId(){return Array.isArray(Xe(this.id))?Xe(this.id)[2]:this.id}getSampleString(){let e=this.getId(),t=this.parent;for(;t;){if(t){const n=Xe(t.id);e=Array.isArray(n)?`${n[2]}.${e}`:`${t.id}.${e}`}t=t.parent}return e}getPathToMain(){let e=[this];if(!this.parent)return e;let t=this.parent;for(e.unshift(t);t?.parent;)t=t.parent,e.unshift(t);return e}checked(){this._checked=this.items.filter((e=>e._checked)).length>0}getSource(){let e="";const t=this.parent,n=t?.getPathToMain();if(n&&n.length>0)for(let t=0;t<n.length;t++){const i=n[t];e=i.single&&e?`${e}.${i.getId()}`:i.getId()}return e}getStringForApp(){let e="";const t=this.getSource(),n=this.getId(),i=this.items.filter((e=>e instanceof Ge&&e._checked)),o=this.items.filter((e=>e instanceof Ve&&e.isOpen)).filter((e=>e instanceof Ve));return(i?.length>0||o?.length>0)&&(this.single?(e=i.map((e=>`{{ ${t}.${n}.${e.getId()} }}`)).join(" "),e=`${e} ${o.map((e=>e.getStringForApp())).join(" ")}`):e=` \n            {% for ${n} in ${t}.${n} %}\n              ${i.map((e=>`{{ ${n}.${e.getId()} }}`)).join(" ")}\n              ${o.map((e=>e.getStringForApp())).join(" ")}\n            {% endfor %}`),e}_getStringFor(){let e="";return"elma"===this.entity&&(e=this.getPathToMain()[1].getStringForApp()),e}getStringFor(e="",t=!0){if(t)return this.getPathToMain()[1].getStringFor("",!1);let n="",i=[];const o=e||this.getSampleString(),s=this.getId(),l=this.items.filter((e=>e._checked)).map((e=>e.id));return this.items.filter((e=>e instanceof Ve)).filter((e=>e.isOpen&&Qe.includes(e.type))).filter((e=>e.items.filter((e=>e._checked)))).forEach((e=>{e.single?e.items.filter((e=>e._checked)).forEach((t=>{const n=e.getId();i.push(`{{ ${s}.${n}.${t.id} }} `)})):i.push(e.getStringFor(s,!1))})),l.length>0&&(n=`\n          {% for ${s} in ${o}${e?`.${s}`:""} %}\n        ${l.map((e=>`{{ ${s}.${e} }}`)).join(" ")}\n        ${i.map((e=>e)).join(" ")}\n          {% endfor %} `),n}checkAll(){this.items.forEach((e=>{!1===Qe.includes(e.type)&&(e._checked=!0)}))}clearAll(){this.items.forEach((e=>{e._checked=!1}))}}const Ye=[{id:"STRING",value:"Строка"},{id:"ENUM",value:"Категория"},{id:"SYS_COLLECTION",value:"Приложение"},{id:"FLOAT",value:"Число"},{id:"BOOLEAN",value:"Да/Нет"},{id:"FILE",value:"Файл"},{id:"DATETIME",value:"Дата"},{id:"STATUS",value:"Статус"},{id:"SYS_USER",value:"Пользователь"},{id:"EMAIL",value:"Почта"},{id:"PHONE",value:"Телефон"},{id:"FULL_NAME",value:"ФИО"},{id:"JSON",value:"JSON"},{id:"MONEY",value:"Деньги"},{id:"TABLE",value:"Таблица"}];async function We(e){return Word.run((async t=>{try{const n=t.document.getSelection();n.insertText(e,Word.InsertLocation.replace),n.getRange("After").select(),$e.set(!0),await t.sync(),$e.set(!1)}catch(e){console.log("Error: "+e),e instanceof OfficeExtension.Error&&console.log("Debug info: "+JSON.stringify(e.debugInfo)),$e.set(!1)}}))}function Xe(e){return e.includes(".")?e.split("."):e}function Ke(e,t){switch(e.type){case"SYS_COLLECTION":return new Ve(`${e.parents.ns}.${e.parents.code}.${e.id}`,e.name,"elma",[],t,e.type,e.single,t.level+1);case"TABLE":const n=e.context?e.context:[];if(n.length>0){const i=new Ve(`${e.id}`,e.name,"elma",[],t,e.type,!1,t.level+1);for(let e=0;e<n.length;e++){const t=n[e];i.items.push(Ke(t,i))}return i}return new Ge(e.id,e.name,e.type,e.single,t,e.context);case"SYS_USER":const i=new Ve(`${e.id}`,e.name,"elma",[],t,e.type,e.single,t.level+1);return i.items.push(new Ge("name","ФИО","STRING",e.single,i,e.context)),i.items.push(new Ge("positions","Должность","STRING",e.single,i,e.context)),i;case"STATUS":const o=new Ve(`${e.id}`,e.name,"elma",[],t,e.type,e.single,t.level+1);return o.items.push(new Ge("code","Код","STRING",e.single,o,e.context)),o.items.push(new Ge("name","Имя","STRING",e.single,o,e.context)),o;default:return new Ge(e.id,e.name,e.type,e.single,t,e.context)}}function et(e=300){$e.set(!0),setTimeout((()=>{$e.set(!1)}),e)}function tt(e){s(e,"svelte-15g5lt6",".setting-connect-container.svelte-15g5lt6{padding:10px}.setting-elma.svelte-15g5lt6{margin-bottom:15px}")}function nt(e){let t,n,i,s,a,u,p,f,m,g,h,$,b,x,w,y,k,I,S,_,N,A,C,M,E,L,T;function O(t){e[2](t)}let z={placeholder:"ID интеграции"};function j(t){e[3](t)}void 0!==e[0].elma.idIntegration&&(z.value=e[0].elma.idIntegration),a=new Ue({props:z}),P.push((()=>re(a,"value",O)));let D={placeholder:"Ссылка (url)"};function F(t){e[4](t)}void 0!==e[0].elma.url&&(D.value=e[0].elma.url),f=new Ue({props:D}),P.push((()=>re(f,"value",j)));let q={placeholder:"Функция получения Структуры (getStructureApp)"};function H(t){e[5](t)}void 0!==e[0].elma.getStructureApp&&(q.value=e[0].elma.getStructureApp),h=new Ue({props:q}),P.push((()=>re(h,"value",F)));let Z={placeholder:"Функция получения Полей (getFieldsApp)"};return void 0!==e[0].elma.getFieldsApp&&(Z.value=e[0].elma.getFieldsApp),x=new Ue({props:Z}),P.push((()=>re(x,"value",H))),k=new ye({props:{clickHandler:e[1],caption:"Перейти"}}),A=new Ue({props:{placeholder:"ID интеграции"}}),M=new Ue({props:{placeholder:"Ссылка (url)"}}),L=new ye({props:{clickHandler:it,caption:"Проверить"}}),{c(){t=c("div"),n=c("div"),i=c("h2"),i.textContent="Настройки соединения Elma",s=d(),ce(a.$$.fragment),p=d(),ce(f.$$.fragment),g=d(),ce(h.$$.fragment),b=d(),ce(x.$$.fragment),y=d(),ce(k.$$.fragment),I=d(),S=c("div"),_=c("h2"),_.textContent="Настройки соединения amoCrm",N=d(),ce(A.$$.fragment),C=d(),ce(M.$$.fragment),E=d(),ce(L.$$.fragment),v(n,"class","setting-elma svelte-15g5lt6"),v(S,"class","setting-amo"),v(t,"class","setting-connect-container svelte-15g5lt6")},m(e,r){l(e,t,r),o(t,n),o(n,i),o(n,s),ae(a,n,null),o(n,p),ae(f,n,null),o(n,g),ae(h,n,null),o(n,b),ae(x,n,null),o(n,y),ae(k,n,null),o(t,I),o(t,S),o(S,_),o(S,N),ae(A,S,null),o(S,C),ae(M,S,null),o(S,E),ae(L,S,null),T=!0},p(e,[t]){const n={};!u&&1&t&&(u=!0,n.value=e[0].elma.idIntegration,Q((()=>u=!1))),a.$set(n);const i={};!m&&1&t&&(m=!0,i.value=e[0].elma.url,Q((()=>m=!1))),f.$set(i);const o={};!$&&1&t&&($=!0,o.value=e[0].elma.getStructureApp,Q((()=>$=!1))),h.$set(o);const s={};!w&&1&t&&(w=!0,s.value=e[0].elma.getFieldsApp,Q((()=>w=!1))),x.$set(s)},i(e){T||(te(a.$$.fragment,e),te(f.$$.fragment,e),te(h.$$.fragment,e),te(x.$$.fragment,e),te(k.$$.fragment,e),te(A.$$.fragment,e),te(M.$$.fragment,e),te(L.$$.fragment,e),T=!0)},o(e){ne(a.$$.fragment,e),ne(f.$$.fragment,e),ne(h.$$.fragment,e),ne(x.$$.fragment,e),ne(k.$$.fragment,e),ne(A.$$.fragment,e),ne(M.$$.fragment,e),ne(L.$$.fragment,e),T=!1},d(e){e&&r(t),ue(a),ue(f),ue(h),ue(x),ue(k),ue(A),ue(M),ue(L)}}}function it(){}function ot(e,t,n){let i;return M(e,he,(e=>n(0,i=e))),z((()=>{et()})),[i,function(){T(he,i.elma.getFieldsApp="getFieldsApp",i),T(he,i.elma.getStructureApp="getStructureApp",i),T(he,i.elma.idIntegration="7c1dbebe-2d99-4939-965e-d1134b12b37c",i),T(he,i.elma.url="https://elma-dev.certit.ru/",i),ve.set("elmaStrings")},function(t){e.$$.not_equal(i.elma.idIntegration,t)&&(i.elma.idIntegration=t,he.set(i))},function(t){e.$$.not_equal(i.elma.url,t)&&(i.elma.url=t,he.set(i))},function(t){e.$$.not_equal(i.elma.getStructureApp,t)&&(i.elma.getStructureApp=t,he.set(i))},function(t){e.$$.not_equal(i.elma.getFieldsApp,t)&&(i.elma.getFieldsApp=t,he.set(i))}]}var st=class extends fe{constructor(e){super(),de(this,e,ot,nt,N,{},tt)}};function lt(e){s(e,"svelte-16o16ew",".wrapper.svelte-16o16ew{width:95%;margin:0;padding:0;position:relative;background-color:white;--border-color:#dadadb;font-size:15px;line-height:20px}input.svelte-16o16ew{border-radius:0.4rem;border:1px solid #d9d9d9;display:block;width:100%;padding:10px;background-color:#fff;background-image:none;background-clip:padding-box;color:#252525;line-height:normal;transition:background 0.15s linear,\n      box-shadow 0.15s linear;outline:none}.collapse-state-btn.svelte-16o16ew{position:absolute;right:15px;width:1rem;height:1rem;transform:rotate(45deg) scale(0.65);cursor:text;--collapse-state-btn-border-color:#303030}.clear-state-btn.svelte-16o16ew{position:absolute;bottom:14px;right:17px;width:1rem;height:1rem;cursor:pointer;color:red}.collapse-state-btn.opened.svelte-16o16ew{top:14px;right:0px;border-top:1px solid var(--collapse-state-btn-border-color);border-left:1px solid var(--collapse-state-btn-border-color)}.collapse-state-btn.closed.svelte-16o16ew{top:7px;right:0px;border-right:1px solid var(--collapse-state-btn-border-color);border-bottom:1px solid var(--collapse-state-btn-border-color)}.suggests-list.svelte-16o16ew{position:absolute;left:0;width:100%;border:1px solid var(--border-color);border-radius:5px;list-style:none;user-select:none;cursor:pointer;z-index:99999;background-color:white;max-height:200px;overflow:auto}.suggests-list.svelte-16o16ew::-webkit-scrollbar{width:6px;background-color:transparent}.suggests-list.svelte-16o16ew::-webkit-scrollbar-track{background-color:transparent}.suggests-list.svelte-16o16ew::-webkit-scrollbar-thumb{background-color:rgb(161, 161, 161);border-top-left-radius:5px;border-bottom-left-radius:5px}li.svelte-16o16ew{padding:5px}li.svelte-16o16ew:hover{background-color:rgb(200, 200, 200)}li.hide.svelte-16o16ew{display:none}")}function rt(e,t,n){const i=e.slice();return i[22]=t[n],i}function ct(e){let t,n,i;return{c(){t=c("div"),t.textContent="X",v(t,"class","clear-state-btn svelte-16o16ew")},m(o,s){l(o,t,s),n||(i=f(t,"click",e[9]),n=!0)},p:y,d(e){e&&r(t),n=!1,i()}}}function at(e){let t,n=[],i=new Map,o=ie(e[4]);const s=e=>e[22]._key;for(let t=0;t<o.length;t+=1){let l=rt(e,o,t),r=s(l);i.set(r,n[t]=ut(r,l))}return{c(){t=c("ul");for(let e=0;e<n.length;e+=1)n[e].c();v(t,"class","suggests-list svelte-16o16ew")},m(e,i){l(e,t,i);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,l){1040&l&&(o=ie(e[4]),n=le(n,l,s,1,e,o,i,t,oe,ut,null,rt))},d(e){e&&r(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function ut(e,t){let n,i,s,a,p,m=t[22].value+"";function g(){return t[16](t[22])}return{key:e,first:null,c(){n=c("li"),i=u(m),s=d(),v(n,"class","svelte-16o16ew"),w(n,"hide",t[22]._hide),this.first=n},m(e,t){l(e,n,t),o(n,i),o(n,s),a||(p=f(n,"click",g),a=!0)},p(e,o){t=e,16&o&&m!==(m=t[22].value+"")&&b(i,m),16&o&&w(n,"hide",t[22]._hide)},d(e){e&&r(n),a=!1,p()}}}function dt(e){let t,n,i,s,a,u,p,m,g,h,$,b=e[0]&&ct(e),w=e[6]&&!e[7]&&at(e);return{c(){t=d(),n=c("div"),i=c("input"),s=d(),b&&b.c(),a=d(),u=c("div"),m=d(),w&&w.c(),v(i,"placeholder",e[1]),i.disabled=e[3],v(i,"type","text"),v(i,"class","svelte-16o16ew"),v(u,"class",p="collapse-state-btn "+(e[6]?"opened":"closed")+" svelte-16o16ew"),v(n,"class",g="wrapper "+e[2]+" svelte-16o16ew")},m(r,c){l(r,t,c),l(r,n,c),o(n,i),x(i,e[5]),o(n,s),b&&b.m(n,null),o(n,a),o(n,u),o(n,m),w&&w.m(n,null),e[17](n),h||($=[f(document.body,"click",e[11]),f(i,"focusin",e[12]),f(i,"input",e[15]),f(u,"click",e[12])],h=!0)},p(e,[t]){2&t&&v(i,"placeholder",e[1]),8&t&&(i.disabled=e[3]),32&t&&i.value!==e[5]&&x(i,e[5]),e[0]?b?b.p(e,t):(b=ct(e),b.c(),b.m(n,a)):b&&(b.d(1),b=null),64&t&&p!==(p="collapse-state-btn "+(e[6]?"opened":"closed")+" svelte-16o16ew")&&v(u,"class",p),e[6]&&!e[7]?w?w.p(e,t):(w=at(e),w.c(),w.m(n,null)):w&&(w.d(1),w=null),4&t&&g!==(g="wrapper "+e[2]+" svelte-16o16ew")&&v(n,"class",g)},i:y,o:y,d(i){i&&(r(t),r(n)),b&&b.d(),w&&w.d(),e[17](null),h=!1,S($)}}}function pt(e,t,n){let i,{items:o=[]}=t,{selected:s}=t,{placeholder:l=""}=t,{classes:r=""}=t,{onSelect:c=e=>{}}=t,{disabled:a=!1}=t,u=[],d=!1,p=s?o.find((e=>e.id==s))?.value??"":"",f=p,m=!1;function g(e){n(6,d=!1),n(0,s=e._original.id),n(5,p=e.value),f=e.value,c&&"function"==typeof c&&c(e._original)}return e.$$set=e=>{"items"in e&&n(13,o=e.items),"selected"in e&&n(0,s=e.selected),"placeholder"in e&&n(1,l=e.placeholder),"classes"in e&&n(2,r=e.classes),"onSelect"in e&&n(14,c=e.onSelect),"disabled"in e&&n(3,a=e.disabled)},e.$$.update=()=>{1&e.$$.dirty&&(void 0===s?(n(5,p=""),f=""):(n(5,p=o.find((e=>e.id==s))?.value??""),f=p)),8192&e.$$.dirty&&function(e){if("string"!=typeof p)throw"Query должен быть строкой!";n(4,u=e.map((e=>({...e,_key:crypto.randomUUID(),_hide:p.length>0&&!e.value.toLowerCase().includes(p),_original:e}))))}(o),48&e.$$.dirty&&function(e){if(n(7,m=!0),"string"!=typeof e)throw"Query должен быть строкой!";u.forEach(((t,i)=>{const o=!(e.length>0)||t.value.toLowerCase().includes(e?.toLowerCase());n(7,m=m&&!o);const s=t._hide;t._hide=!o,s!==t._hide&&n(4,u[i]={...t},u)})),n(4,u=[...u])}(p)},[s,l,r,a,u,p,d,m,i,function(){n(0,s=void 0),c(s)},g,function(e){a||e.target.closest(".wrapper")!==i&&(n(5,p=f),n(6,d=!1))},function(e){i.firstChild.focus(),n(5,p=""),n(6,d=!0)},o,c,function(){p=this.value,n(5,p)},e=>g(e),function(e){P[e?"unshift":"push"]((()=>{i=e,n(8,i)}))}]}var ft=class extends fe{constructor(e){super(),de(this,e,pt,dt,N,{items:13,selected:0,placeholder:1,classes:2,onSelect:14,disabled:3},lt)}};function mt(e){s(e,"svelte-1o8mkvb",".button-container.svelte-1o8mkvb{position:absolute;top:-44px;right:9px;cursor:pointer}.close.svelte-1o8mkvb{bottom:1px}.search-container.svelte-1o8mkvb{position:relative}.search-body.svelte-1o8mkvb{padding:3px;border:1px solid rgb(218, 215, 215);border-radius:3px;margin-bottom:5px}.close-panel.svelte-1o8mkvb{border:0px;padding:0px}")}function gt(e){let t,n,i,s,u,p,m,g,h,$=e[2]&&ht(e);return{c(){t=c("div"),n=c("div"),i=a("svg"),s=a("circle"),u=a("line"),p=d(),$&&$.c(),v(s,"cx","10"),v(s,"cy","10"),v(s,"r","7"),v(u,"x1","21"),v(u,"y1","21"),v(u,"x2","15"),v(u,"y2","15"),v(i,"xmlns","http://www.w3.org/2000/svg"),v(i,"xmlns:xlink","http://www.w3.org/1999/xlink"),v(i,"version","1.1"),v(i,"width","20"),v(i,"height","20"),v(i,"viewBox","0 0 24 24"),v(i,"fill","none"),v(i,"stroke",e[4]),v(i,"stroke-width","2"),v(i,"stroke-linecap","round"),v(i,"stroke-linejoin","round"),v(n,"class","button-container svelte-1o8mkvb"),w(n,"close",!e[2]),v(t,"class","search-container svelte-1o8mkvb"),w(t,"close-panel",!e[2])},m(r,c){l(r,t,c),o(t,n),o(n,i),o(i,s),o(i,u),o(t,p),$&&$.m(t,null),m=!0,g||(h=f(n,"click",e[5]),g=!0)},p(e,o){(!m||16&o)&&v(i,"stroke",e[4]),(!m||4&o)&&w(n,"close",!e[2]),e[2]?$?($.p(e,o),4&o&&te($,1)):($=ht(e),$.c(),te($,1),$.m(t,null)):$&&(K(),ne($,1,1,(()=>{$=null})),ee()),(!m||4&o)&&w(t,"close-panel",!e[2])},i(e){m||(te($),m=!0)},o(e){ne($),m=!1},d(e){e&&r(t),$&&$.d(),g=!1,h()}}}function ht(e){let t,n,i,s,a,u=e[7]().length>1;function p(t){e[9](t)}let f={inputHndlr:e[6],placeholder:"Поиск по полям..."};void 0!==e[0]&&(f.value=e[0]),n=new Ue({props:f}),P.push((()=>re(n,"value",p)));let m=u&&function(e){let t,n,i;function o(t){e[10](t)}let s={items:e[7](),onSelect:e[6],placeholder:"Выберите тип поля..."};return void 0!==e[3]&&(s.selected=e[3]),t=new ft({props:s}),P.push((()=>re(t,"selected",o))),{c(){ce(t.$$.fragment)},m(e,n){ae(t,e,n),i=!0},p(e,i){const o={};!n&&8&i&&(n=!0,o.selected=e[3],Q((()=>n=!1))),t.$set(o)},i(e){i||(te(t.$$.fragment,e),i=!0)},o(e){ne(t.$$.fragment,e),i=!1},d(e){ue(t,e)}}}(e);return{c(){t=c("div"),ce(n.$$.fragment),s=d(),m&&m.c(),v(t,"class","search-body svelte-1o8mkvb")},m(e,i){l(e,t,i),ae(n,t,null),o(t,s),m&&m.m(t,null),a=!0},p(e,t){const o={};!i&&1&t&&(i=!0,o.value=e[0],Q((()=>i=!1))),n.$set(o),u&&m.p(e,t)},i(e){a||(te(n.$$.fragment,e),te(m),a=!0)},o(e){ne(n.$$.fragment,e),ne(m),a=!1},d(e){e&&r(t),ue(n),m&&m.d()}}}function vt(e){let t,n,i=e[1].length>0&&gt(e);return{c(){i&&i.c(),t=p()},m(e,o){i&&i.m(e,o),l(e,t,o),n=!0},p(e,[n]){e[1].length>0?i?(i.p(e,n),2&n&&te(i,1)):(i=gt(e),i.c(),te(i,1),i.m(t.parentNode,t)):i&&(K(),ne(i,1,1,(()=>{i=null})),ee())},i(e){n||(te(i),n=!0)},o(e){ne(i),n=!1},d(e){e&&r(t),i&&i.d(e)}}}function $t(e,t,n){let i,{input:o=[]}=t,{output:s=[]}=t,{searchString:l=""}=t,r=o.length>5,c=o.length>5?"white":"black";return z((()=>{})),e.$$set=e=>{"input"in e&&n(1,o=e.input),"output"in e&&n(8,s=e.output),"searchString"in e&&n(0,l=e.searchString)},[l,o,r,i,c,function(){n(2,r=!r),n(4,c=r?"white":"black")},async function(){let e=o;i&&(e=o.filter((e=>e.type===i))),l&&(e=e.filter((e=>e.name.toUpperCase().includes(l.toUpperCase())))),n(8,s=[]),await(U(),H),n(8,s=[...e])},function(){let e=[];const t=o.map((e=>e.type));return e=[...Ye.filter((e=>t.includes(e.id)))],e},s,function(e){l=e,n(0,l)},function(e){i=e,n(3,i)}]}var bt=class extends fe{constructor(e){super(),de(this,e,$t,vt,N,{input:1,output:8,searchString:0},mt)}};function xt(e){s(e,"svelte-dhayk1",".entity_container.svelte-dhayk1{margin-left:5px;padding-bottom:5px}.app-item-container.svelte-dhayk1{margin-left:10px}.button-control-containrt.svelte-dhayk1{margin-left:10px;padding:5px 0px 5px 0px}")}function wt(e,t,n){const i=e.slice();return i[11]=t[n],i[12]=t,i[13]=n,i}function yt(e){let t,n,i,s,a,u;return{c(){t=c("div"),n=c("button"),n.textContent="Выбрать все",i=d(),s=c("button"),s.textContent="Убрать все",v(t,"class","button-control-containrt svelte-dhayk1")},m(r,c){l(r,t,c),o(t,n),o(t,i),o(t,s),a||(u=[f(n,"click",e[5]),f(s,"click",e[6])],a=!0)},p:y,d(e){e&&r(t),a=!1,S(u)}}}function kt(e,t){let n,i,o,s;function a(e){t[10](e,t[11],t[12],t[13])}let u={level:t[1],menuItems:t[3]};return void 0!==t[11]&&(u.appItem=t[11]),i=new Zt({props:u}),P.push((()=>re(i,"appItem",a))),{key:e,first:null,c(){n=c("div"),ce(i.$$.fragment),v(n,"class","app-item-container svelte-dhayk1"),this.first=n},m(e,t){l(e,n,t),ae(i,n,null),s=!0},p(e,n){t=e;const s={};2&n&&(s.level=t[1]),8&n&&(s.menuItems=t[3]),!o&&16&n&&(o=!0,s.appItem=t[11],Q((()=>o=!1))),i.$set(s)},i(e){s||(te(i.$$.fragment,e),s=!0)},o(e){ne(i.$$.fragment,e),s=!1},d(e){e&&r(n),ue(i)}}}function It(e){let t,n,i,s,a,u,p,m;return{c(){t=c("div"),n=c("button"),n.textContent="Вставить шаблонную строку",i=d(),s=c("button"),s.textContent="Выбрать все",a=d(),u=c("button"),u.textContent="Убрать все",v(t,"class","button-control-containrt svelte-dhayk1")},m(r,c){l(r,t,c),o(t,n),o(t,i),o(t,s),o(t,a),o(t,u),p||(m=[f(n,"click",e[7]),f(s,"click",e[5]),f(u,"click",e[6])],p=!0)},p:y,d(e){e&&r(t),p=!1,S(m)}}}function St(e){let t,n,i,s,a,u,p,f,m=!1===e[2]?.isParentSingle()||!1===e[2]?.single,g=[],h=new Map,$=!1===e[2]?.isParentSingle()||!1===e[2]?.single;function b(t){e[8](t)}function x(t){e[9](t)}let w={};void 0!==e[0]&&(w.input=e[0]),void 0!==e[4]&&(w.output=e[4]),n=new bt({props:w}),P.push((()=>re(n,"input",b))),P.push((()=>re(n,"output",x)));let y=m&&yt(e),k=ie(e[4]);const I=e=>e[13];for(let t=0;t<k.length;t+=1){let n=wt(e,k,t),i=I(n);h.set(i,g[t]=kt(i,n))}let S=$&&It(e);return{c(){t=c("div"),ce(n.$$.fragment),a=d(),y&&y.c(),u=d();for(let e=0;e<g.length;e+=1)g[e].c();p=d(),S&&S.c(),v(t,"class","entity_container svelte-dhayk1")},m(e,i){l(e,t,i),ae(n,t,null),o(t,a),y&&y.m(t,null),o(t,u);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(t,null);o(t,p),S&&S.m(t,null),f=!0},p(e,[o]){const l={};!i&&1&o&&(i=!0,l.input=e[0],Q((()=>i=!1))),!s&&16&o&&(s=!0,l.output=e[4],Q((()=>s=!1))),n.$set(l),4&o&&(m=!1===e[2]?.isParentSingle()||!1===e[2]?.single),m?y?y.p(e,o):(y=yt(e),y.c(),y.m(t,u)):y&&(y.d(1),y=null),26&o&&(k=ie(e[4]),K(),g=le(g,o,I,1,e,k,h,t,se,kt,p,wt),ee()),4&o&&($=!1===e[2]?.isParentSingle()||!1===e[2]?.single),$?S?S.p(e,o):(S=It(e),S.c(),S.m(t,null)):S&&(S.d(1),S=null)},i(e){if(!f){te(n.$$.fragment,e);for(let e=0;e<k.length;e+=1)te(g[e]);f=!0}},o(e){ne(n.$$.fragment,e);for(let e=0;e<g.length;e+=1)ne(g[e]);f=!1},d(e){e&&r(t),ue(n),y&&y.d();for(let e=0;e<g.length;e+=1)g[e].d();S&&S.d()}}}function _t(e,t,n){let{mainEntity:i=[]}=t,{level:o=1}=t,{parent:s}=t,{menuItems:l=[]}=t,r=i;return e.$$set=e=>{"mainEntity"in e&&n(0,i=e.mainEntity),"level"in e&&n(1,o=e.level),"parent"in e&&n(2,s=e.parent),"menuItems"in e&&n(3,l=e.menuItems)},[i,o,s,l,r,function(){s?.checkAll(),n(4,r)},function(){s?.clearAll(),n(4,r)},async function(){const e=s?._getStringFor();e&&We(e)},function(e){i=e,n(0,i)},function(e){r=e,n(4,r)},function(e,t,i,o){i[o]=e,n(4,r)}]}var Nt=class extends fe{constructor(e){super(),de(this,e,_t,St,N,{mainEntity:0,level:1,parent:2,menuItems:3},xt)}};function At(e){s(e,"svelte-g56tzt",".burger.svelte-g56tzt.svelte-g56tzt{cursor:pointer;width:15px;height:13px;display:flex;flex-direction:column;justify-content:space-between;padding:5px}.menu-burger.svelte-g56tzt.svelte-g56tzt{position:absolute;right:50px;padding:5px 10px 5px 10px;background-color:#918e8e;border-radius:5px;z-index:99999}.line.svelte-g56tzt.svelte-g56tzt{background-color:#918e8e;height:3px;transition:all 0.3s ease}.open.svelte-g56tzt .line1.svelte-g56tzt{transform:rotate(45deg) translate(5px, 5px)}.my-item-li.svelte-g56tzt.svelte-g56tzt{list-style-type:none;padding:10px 15px}.open.svelte-g56tzt .line2.svelte-g56tzt{opacity:0}.open.svelte-g56tzt .line3.svelte-g56tzt{transform:rotate(-45deg) translate(5px, -5px)}")}function Ct(e,t,n){const i=e.slice();return i[7]=t[n],i[9]=n,i}function Mt(e){let t,n,i,o,s,a=e[1]&&Et(e);return{c(){t=c("div"),t.innerHTML='<div class="line line1 svelte-g56tzt"></div> <div class="line line2 svelte-g56tzt"></div> <div class="line line3 svelte-g56tzt"></div>',n=d(),a&&a.c(),i=p(),v(t,"class","burger svelte-g56tzt"),w(t,"open",e[1])},m(r,c){l(r,t,c),l(r,n,c),a&&a.m(r,c),l(r,i,c),o||(s=f(t,"click",e[2]),o=!0)},p(e,n){2&n&&w(t,"open",e[1]),e[1]?a?a.p(e,n):(a=Et(e),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},d(e){e&&(r(t),r(n),r(i)),a&&a.d(e),o=!1,s()}}}function Et(e){let t,n,i=[],s=new Map,a=ie(e[0]);const u=e=>e[9];for(let t=0;t<a.length;t+=1){let n=Ct(e,a,t),o=u(n);s.set(o,i[t]=Lt(o,n))}return{c(){t=c("div"),n=c("ul");for(let e=0;e<i.length;e+=1)i[e].c();v(t,"class","menu-burger svelte-g56tzt")},m(e,s){l(e,t,s),o(t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(n,null)},p(e,t){9&t&&(a=ie(e[0]),i=le(i,t,u,1,e,a,s,n,oe,Lt,null,Ct))},d(e){e&&r(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function Lt(e,t){let n,i,s,a,p,m,g=t[7].value+"";function h(){return t[5](t[9])}return{key:e,first:null,c(){n=c("li"),i=c("div"),s=u(g),a=d(),v(n,"class","my-item-li svelte-g56tzt"),this.first=n},m(e,t){l(e,n,t),o(n,i),o(i,s),o(n,a),p||(m=f(i,"click",h),p=!0)},p(e,n){t=e,1&n&&g!==(g=t[7].value+"")&&b(s,g)},d(e){e&&r(n),p=!1,m()}}}function Tt(e){let t,n=e[0]?.length&&Mt(e);return{c(){n&&n.c(),t=p()},m(e,i){n&&n.m(e,i),l(e,t,i)},p(e,[i]){e[0]?.length?n?n.p(e,i):(n=Mt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:y,o:y,d(e){e&&r(t),n&&n.d(e)}}}function Ot(e,t,n){let i=!1,{menuItems:o=[]}=t,{arg:s}=t;function l(e){e.target.closest(".menu-burger")||n(1,i=!1)}function r(e){o[e].callback(s),n(1,i=!1)}return z((()=>{const e=document.querySelector("#app-start");e&&(e.removeEventListener("click",l,!0),e.addEventListener("click",l,!0))})),e.$$set=e=>{"menuItems"in e&&n(0,o=e.menuItems),"arg"in e&&n(4,s=e.arg)},[o,i,function(){n(1,i=!i)},r,s,e=>{r(e)}]}var zt=class extends fe{constructor(e){super(),de(this,e,Ot,Tt,N,{menuItems:0,arg:4},At)}};function jt(e){s(e,"svelte-xfva3w",".app_item_container.svelte-xfva3w{border-radius:5px;border:1px solid rgb(226, 218, 218);margin-bottom:5px}.app_item_name.svelte-xfva3w{display:flex;align-items:center;padding:10px 15px;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:background-color 0.3s}.app_item_name.svelte-xfva3w:hover{color:white;background-color:#e0e0e0}.is-open.svelte-xfva3w{color:white;background-color:#d8caca;border-radius:3px;margin-bottom:10px}.label.svelte-xfva3w{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.custom-check.svelte-xfva3w{width:20px;height:20px;background-color:white;margin-right:5px}.white-text.svelte-xfva3w{color:white}")}function Dt(e){let t,n,i;return{c(){t=c("input"),v(t,"type","checkbox"),v(t,"class","custom-check svelte-xfva3w")},m(o,s){l(o,t,s),t.checked=e[0]._checked,n||(i=[f(t,"change",e[6]),f(t,"change",e[5])],n=!0)},p(e,n){1&n&&(t.checked=e[0]._checked)},d(e){e&&r(t),n=!1,S(i)}}}function Pt(e){let t,n;return t=new zt({props:{menuItems:e[2],arg:e[0]}}),{c(){ce(t.$$.fragment)},m(e,i){ae(t,e,i),n=!0},p(e,n){const i={};4&n&&(i.menuItems=e[2]),1&n&&(i.arg=e[0]),t.$set(i)},i(e){n||(te(t.$$.fragment,e),n=!0)},o(e){ne(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function Ft(e){let t,n,i,o;function s(t){e[7](t)}function l(t){e[8](t)}let r={level:e[1]+10,menuItems:e[2]};return void 0!==e[0].items&&(r.mainEntity=e[0].items),void 0!==e[0]&&(r.parent=e[0]),t=new Nt({props:r}),P.push((()=>re(t,"mainEntity",s))),P.push((()=>re(t,"parent",l))),{c(){ce(t.$$.fragment)},m(e,n){ae(t,e,n),o=!0},p(e,o){const s={};2&o&&(s.level=e[1]+10),4&o&&(s.menuItems=e[2]),!n&&1&o&&(n=!0,s.mainEntity=e[0].items,Q((()=>n=!1))),!i&&1&o&&(i=!0,s.parent=e[0],Q((()=>i=!1))),t.$set(s)},i(e){o||(te(t.$$.fragment,e),o=!0)},o(e){ne(t.$$.fragment,e),o=!1},d(e){ue(t,e)}}}function qt(e){let t,n,i,s,a,p,m,g,h,$,x,y,k,I=!1===e[0].isParentSingle()&&!1===Qe.includes(e[0].type),S=e[0].name+"",_=e[4]()+"",N=I&&Dt(e),A=e[0]instanceof Ve==0&&Pt(e),C=e[0]instanceof Ve&&e[0].isOpen&&Ft(e);return{c(){t=c("div"),n=c("div"),N&&N.c(),i=d(),s=c("div"),a=u(S),p=d(),m=u(_),g=d(),A&&A.c(),$=d(),C&&C.c(),v(s,"class","label svelte-xfva3w"),w(s,"white-text",e[1]>=67),v(n,"class","app_item_name svelte-xfva3w"),v(n,"title",h=e[0].id+" "+e[4]()),w(n,"is-open",!!(e[0]instanceof Ve&&e[0].isOpen)),v(t,"class","app_item_container svelte-xfva3w")},m(r,c){l(r,t,c),o(t,n),N&&N.m(n,null),o(n,i),o(n,s),o(s,a),o(s,p),o(s,m),o(n,g),A&&A.m(n,null),o(t,$),C&&C.m(t,null),x=!0,y||(k=f(s,"click",e[3]),y=!0)},p(e,[o]){1&o&&(I=!1===e[0].isParentSingle()&&!1===Qe.includes(e[0].type)),I?N?N.p(e,o):(N=Dt(e),N.c(),N.m(n,i)):N&&(N.d(1),N=null),(!x||1&o)&&S!==(S=e[0].name+"")&&b(a,S),(!x||2&o)&&w(s,"white-text",e[1]>=67),e[0]instanceof Ve==0?A?(A.p(e,o),1&o&&te(A,1)):(A=Pt(e),A.c(),te(A,1),A.m(n,null)):A&&(K(),ne(A,1,1,(()=>{A=null})),ee()),(!x||1&o&&h!==(h=e[0].id+" "+e[4]()))&&v(n,"title",h),(!x||1&o)&&w(n,"is-open",!!(e[0]instanceof Ve&&e[0].isOpen)),e[0]instanceof Ve&&e[0].isOpen?C?(C.p(e,o),1&o&&te(C,1)):(C=Ft(e),C.c(),te(C,1),C.m(t,null)):C&&(K(),ne(C,1,1,(()=>{C=null})),ee())},i(e){x||(te(A),te(C),x=!0)},o(e){ne(A),ne(C),x=!1},d(e){e&&r(t),N&&N.d(),A&&A.d(),C&&C.d(),y=!1,k()}}}function Ht(e,t,n){let{appItem:i}=t,{level:o=1}=t,{menuItems:s=[]}=t;return z((()=>{})),e.$$set=e=>{"appItem"in e&&n(0,i=e.appItem),"level"in e&&n(1,o=e.level),"menuItems"in e&&n(2,s=e.menuItems)},[i,o,s,async function(){i instanceof Ge?!0===i.isParentSingle()&&We(i.getSampleString(!1,!1)):(await i.getItems(),n(0,i.isOpen=!i.isOpen,i))},function(){return`(${function(e){let t=Ye.find((t=>t.id===e))?.value;return t||""}(i.type)})`},function(){i instanceof Ge&&console.log(i.getSource()),i.parent?.checked(),console.log(i.parent)},function(){i._checked=this.checked,n(0,i)},function(t){e.$$.not_equal(i.items,t)&&(i.items=t,n(0,i))},function(e){i=e,n(0,i)}]}var Zt=class extends fe{constructor(e){super(),de(this,e,Ht,qt,N,{appItem:0,level:1,menuItems:2},jt)}};class Ut{constructor(e,t,n,i,o){this.path=e,this.condition=t,this.value=n,this.betweenConditions=o||"end",this.field=i||void 0}getConditionFromField(){const e=this.field?.type;switch(e){case"FLOAT":case"MONEY":return Be.filter((e=>e.type.includes(2)));case"STRING":case"EMAIL":case"PHONE":return Be.filter((e=>e.type.includes(1)));case"ENUM":return Be.filter((e=>e.type.includes(4)));case"BOOLEAN":return Be.filter((e=>e.type.includes(5)));case"DATETIME":return Be.filter((e=>e.type.includes(3)))}return[]}getNumberFromTypeField(){const e=this.field?.type;switch(e){case"FLOAT":case"MONEY":return Me.number;case"BOOLEAN":return Me.boolean;case"EMAIL":case"PHONE":case"STRING":default:return Me.string;case"DATETIME":return Me.date;case"ENUM":return Me.enum}}getContextField(){return this.field?.context.length?this.field?.context.map((e=>({id:e.name,value:e.name}))):[]}clearField(){this.field=void 0,this.condition="",this.value=""}getConditionObject(){const e=this.condition,t=this.field?.getSampleString(!0,!1);let n="",i="";switch(e){case"Equals":n="==",i=`${t} ${n} "${this.value}"`;break;case"GreateOrEqual":n=">=",i=`${t} ${n} "${this.value}"`;break;case"Less":n="<",i=`${t} ${n} "${this.value}"`;break;case"LessOrEqual":n="<=",i=`${t} ${n} "${this.value}"`;break;case"More":n=">",i=`${t} ${n} "${this.value}"`;break;case"NoEquals":n="!=",i=`${t} ${n} "${this.value}"`;break;case"None":n="not in",i=`${t} ${n} "${this.value}"`;break;case"OneOf":n="in",i=`${t} ${n} [${this.value.map((e=>`"${e}"`)).join(", ")}]`;break;default:n="==",i=`${t} ${n} [${this.value.map((e=>`"${e}"`)).join(", ")}]`}return{fieldPath:t,conditionIcon:n,value:this.value,betweenConditions:this.betweenConditions,conditionString:i}}}class Gt{static conditions=[];static getAppitems(e){return e instanceof Ve?e.items.map((e=>({id:e,value:e.name}))):[]}static createNewConditions(e,t,n){const i=Gt.conditions.find((t=>t.mainApp.id===e.id));i?(i.conditions.push(new Ut(t,"","",n)),i.conditions.forEach(((e,t)=>{"end"===e.betweenConditions&&t!==i.conditions.length-1&&(e.betweenConditions="and")}))):Gt.conditions.push({mainApp:e,conditions:[new Ut(t,"","",n)]})}static deleteConditionItems(e,t){const n=Gt.conditions.find((t=>t.mainApp.id===e.id));n&&(n.conditions=n?.conditions.filter(((e,n)=>n!==t&&e)),n.conditions.length&&(n.conditions[n.conditions.length-1].betweenConditions="end"))}static async selectFieldFromApp(e){return e instanceof Ve&&0===e.items.length?(await e.getItems(),e.items):[]}static async getConditionString(e){console.log(Gt.validateConditions(e));let t="";const n=Gt.conditions.filter((t=>t.mainApp.id===e.id));return n&&n.forEach((e=>{e.conditions.map((e=>e.getConditionObject())).forEach((e=>{t=`${t} ${e.conditionString}`,"end"!==e.betweenConditions&&(t="elif"===e.betweenConditions?`${t} %}введите свой текст{% ${e.betweenConditions}`:`${t} ${e.betweenConditions}`)}))})),t=`{% if ${t} %}Введите необходимый текст{% endif %}`,console.log(t),t}static validateConditions(e){let t=!0;const n=Gt.conditions.filter((t=>t.mainApp.id===e.id));return n&&n.forEach((e=>{1!==e.conditions.map((e=>e.betweenConditions)).filter((e=>"end"===e)).length&&(t=!1)})),t}}const{document:Qt}=e;function Rt(e){s(e,"svelte-100xnsd",'.wrapper.svelte-100xnsd.svelte-100xnsd{margin:0;padding:0;position:relative;background-color:white;--border-color:#dadadb;font-size:15px;line-height:20px}.front-drop-down-button.svelte-100xnsd.svelte-100xnsd,.drop-down-group.svelte-100xnsd.svelte-100xnsd{padding:10px;position:relative;border:1px solid var(--border-color);border-radius:0.4rem;user-select:none;cursor:pointer;display:flex;align-items:center;gap:5px}label.svelte-100xnsd.svelte-100xnsd{width:1.1rem;min-width:1.1rem;height:1.1rem;border:1px solid black;border-radius:3px;display:flex;justify-content:center;align-items:center;cursor:pointer}input[type="checkbox"].svelte-100xnsd.svelte-100xnsd{display:none}label.svelte-100xnsd span.some-selected.svelte-100xnsd{width:50%;outline:1px solid black}label.svelte-100xnsd span.all-selected.svelte-100xnsd{width:80%;height:80%;background-image:url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128.411 128.411"><polygon points="127.526,15.294 45.665,78.216 0.863,42.861 0,59.255 44.479,113.117 128.411,31.666 %09%09"/></svg>\');background-position:center;background-repeat:no-repeat;background-size:contain}.collapse-state-btn.svelte-100xnsd.svelte-100xnsd{position:absolute;right:0.25rem;width:1rem;height:1rem;transform:rotate(45deg) scale(0.65);cursor:pointer;--collapse-state-btn-border-color:#303030}.collapse-state-btn.opened.svelte-100xnsd.svelte-100xnsd{top:14px;right:18px;border-top:1px solid var(--collapse-state-btn-border-color);border-left:1px solid var(--collapse-state-btn-border-color)}.collapse-state-btn.closed.svelte-100xnsd.svelte-100xnsd{top:9px;right:18px;border-right:1px solid var(--collapse-state-btn-border-color);border-bottom:1px solid var(--collapse-state-btn-border-color)}.drop-down-list.svelte-100xnsd.svelte-100xnsd{position:absolute;left:0;width:100%;border:1px solid var(--border-color);border-radius:0.4rem;list-style:none;user-select:none;cursor:pointer;z-index:99999;background-color:white;max-height:200px;overflow:auto}.drop-down-list.svelte-100xnsd.svelte-100xnsd::-webkit-scrollbar{width:10px;background-color:transparent}.drop-down-list.svelte-100xnsd.svelte-100xnsd::-webkit-scrollbar-track{background-color:transparent}.drop-down-list.svelte-100xnsd.svelte-100xnsd::-webkit-scrollbar-thumb{background-color:rgb(161, 161, 161);border-top-left-radius:5px;border-bottom-left-radius:5px}.drop-down-group.svelte-100xnsd.svelte-100xnsd{border:none;border-radius:0;box-shadow:0 0px 3px 2px #cfcfcf;cursor:auto}li.svelte-100xnsd.svelte-100xnsd{padding:5px;display:flex;align-items:center;gap:5px;cursor:auto}li.svelte-100xnsd>span.svelte-100xnsd{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}li.svelte-100xnsd div.svelte-100xnsd:first-child{display:none}.hidden.svelte-100xnsd.svelte-100xnsd{display:none !important}.group-spacing.svelte-100xnsd.svelte-100xnsd{display:block !important;width:10%;max-width:20px;height:100%}')}function Bt(e,t,n){const i=e.slice();return i[31]=t[n],i}function Jt(e,t,n){const i=e.slice();return i[34]=t[n],i[36]=n,i}function Vt(e){let t,n=[],i=new Map,o=ie(Object.values(e[4]));const s=e=>e[31].id;for(let t=0;t<o.length;t+=1){let l=Bt(e,o,t),r=s(l);i.set(r,n[t]=Xt(r,l))}return{c(){t=c("ul");for(let e=0;e<n.length;e+=1)n[e].c();v(t,"class","drop-down-list svelte-100xnsd")},m(e,i){l(e,t,i);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,l){23128&l[0]&&(o=ie(Object.values(e[4])),n=le(n,l,s,1,e,o,i,t,oe,Xt,null,Bt))},d(e){e&&r(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Yt(e){let t,n=[],i=new Map,o=ie(e[3][e[31].id]);const s=e=>e[34]._key;for(let t=0;t<o.length;t+=1){let l=Jt(e,o,t),r=s(l);i.set(r,n[t]=Wt(r,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=p()},m(e,i){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,i);l(e,t,i)},p(e,l){4184&l[0]&&(o=ie(e[3][e[31].id]),n=le(n,l,s,1,e,o,i,t.parentNode,oe,Wt,t,Jt))},d(e){e&&r(t);for(let t=0;t<n.length;t+=1)n[t].d(e)}}}function Wt(e,t){let n,i,s,a,p,h,$,x,y,k,I,S,_,N,A=t[34].value+"";function C(){return t[20](t[34],t[31],t[36])}return{key:e,first:null,c(){n=c("li"),i=c("div"),s=d(),a=c("label"),p=c("input"),h=d(),$=c("span"),x=d(),y=c("span"),k=u(A),I=d(),v(i,"class","svelte-100xnsd"),w(i,"group-spacing",t[6]),v(p,"type","checkbox"),v(p,"class","svelte-100xnsd"),v($,"class","svelte-100xnsd"),w($,"all-selected",t[34]._checked),v(a,"class","svelte-100xnsd"),v(y,"class","svelte-100xnsd"),v(n,"class","drop-down-item svelte-100xnsd"),v(n,"title",S=t[34].value),this.first=n},m(e,t){l(e,n,t),o(n,i),o(n,s),o(n,a),o(a,p),o(a,h),o(a,$),o(n,x),o(n,y),o(y,k),o(n,I),_||(N=f(p,"change",g(m(C))),_=!0)},p(e,o){t=e,64&o[0]&&w(i,"group-spacing",t[6]),24&o[0]&&w($,"all-selected",t[34]._checked),24&o[0]&&A!==(A=t[34].value+"")&&b(k,A),24&o[0]&&S!==(S=t[34].value)&&v(n,"title",S)},d(e){e&&r(n),_=!1,N()}}}function Xt(e,t){let n,i,s,a,$,x,y,k,I,_,N,A,C,M,E,T,O,z=t[31].value+"";function j(){return t[18](t[31])}function D(){return t[19](t[31])}let P=t[31]._showed&&Yt(t);return{key:e,first:null,c(){n=c("li"),i=c("label"),s=c("input"),a=d(),$=c("span"),y=d(),k=c("span"),I=u(z),_=d(),N=c("div"),M=d(),P&&P.c(),E=p(),v(s,"type","checkbox"),v(s,"class","svelte-100xnsd"),v($,"class",x=L(t[14](t[31]))+" svelte-100xnsd"),v(i,"class","svelte-100xnsd"),v(k,"class","svelte-100xnsd"),v(N,"class",A="collapse-state-btn "+(t[31]._showed?"opened":"closed")+" svelte-100xnsd"),v(n,"class","drop-down-group svelte-100xnsd"),v(n,"title",C=t[31].value),w(n,"hidden",!t[6]||!t[3][t[31].id].length),this.first=n},m(e,t){l(e,n,t),o(n,i),o(i,s),o(i,a),o(i,$),o(n,y),o(n,k),o(k,I),o(n,_),o(n,N),l(e,M,t),P&&P.m(e,t),l(e,E,t),T||(O=[f(s,"change",g(m(j))),f(N,"click",h(D))],T=!0)},p(e,i){t=e,16&i[0]&&x!==(x=L(t[14](t[31]))+" svelte-100xnsd")&&v($,"class",x),16&i[0]&&z!==(z=t[31].value+"")&&b(I,z),16&i[0]&&A!==(A="collapse-state-btn "+(t[31]._showed?"opened":"closed")+" svelte-100xnsd")&&v(N,"class",A),16&i[0]&&C!==(C=t[31].value)&&v(n,"title",C),88&i[0]&&w(n,"hidden",!t[6]||!t[3][t[31].id].length),t[31]._showed?P?P.p(t,i):(P=Yt(t),P.c(),P.m(E.parentNode,E)):P&&(P.d(1),P=null)},d(e){e&&(r(n),r(M),r(E)),P&&P.d(e),T=!1,S(O)}}}function Kt(e){let t,n,i,s,a,p,$,x,w,k,I,_,N,A,C,M,E,T,O=e[1]?"Все":`Выбрано: ${e[5].length}`,z=e[1]&&Vt(e);return{c(){t=d(),n=c("div"),i=c("div"),s=c("label"),a=c("input"),p=d(),$=c("span"),w=d(),k=c("span"),I=u(O),_=d(),N=c("div"),C=d(),z&&z.c(),v(a,"type","checkbox"),v(a,"class","svelte-100xnsd"),v($,"class",x=L(e[13](e[5].length))+" svelte-100xnsd"),v(s,"class","svelte-100xnsd"),v(N,"class",A="collapse-state-btn "+(e[1]?"opened":"closed")+" svelte-100xnsd"),v(i,"class","front-drop-down-button svelte-100xnsd"),v(n,"class",M="wrapper "+e[0]+" svelte-100xnsd")},m(r,c){l(r,t,c),l(r,n,c),o(n,i),o(i,s),o(s,a),o(s,p),o(s,$),o(i,w),o(i,k),o(k,I),o(i,_),o(i,N),o(n,C),z&&z.m(n,null),e[21](n),E||(T=[f(Qt.body,"click",e[8]),f(a,"change",g(m(e[10]))),f(k,"click",h(e[7])),f(N,"click",h(e[7])),f(i,"click",h(e[7]))],E=!0)},p(e,t){32&t[0]&&x!==(x=L(e[13](e[5].length))+" svelte-100xnsd")&&v($,"class",x),34&t[0]&&O!==(O=e[1]?"Все":`Выбрано: ${e[5].length}`)&&b(I,O),2&t[0]&&A!==(A="collapse-state-btn "+(e[1]?"opened":"closed")+" svelte-100xnsd")&&v(N,"class",A),e[1]?z?z.p(e,t):(z=Vt(e),z.c(),z.m(n,null)):z&&(z.d(1),z=null),1&t[0]&&M!==(M="wrapper "+e[0]+" svelte-100xnsd")&&v(n,"class",M)},i:y,o:y,d(i){i&&(r(t),r(n)),z&&z.d(),e[21](null),E=!1,S(T)}}}function en(e,t,n){let{items:i=[]}=t,{selected:o=[]}=t,{classes:s=""}=t,{onSelect:l=(e,t)=>{}}=t;const r=crypto.randomUUID();let c,a=!1,u={[r]:[]},d={[r]:{id:r,value:"Без группы",_checkedCount:0,_showed:!0}},p=[],f=!1,m=!1,g=!1;function h(){n(15,o=p.map((e=>e.id)))}function v(){n(1,a=!1)}function $(e){e._showed?e._showed=!1:e._showed=!0,n(4,d[e.id]={...e},d)}function b(e){m=!0,e._checkedCount?u[e.id].forEach(((t,n)=>{t._checked&&x(t,e,n)})):u[e.id].forEach(((t,n)=>x(t,e,n))),g||(h(),l(p)),m=!1}function x(e,t,i){e._checked?(e._checked=!1,t._checkedCount-=1,n(5,p=p.filter((t=>t!==e._original)))):(e._checked=!0,t._checkedCount+=1,n(5,p=[...p,e._original])),n(3,u[t.id][i]={...e},u),n(4,d[t.id]={...t},d),m||(h(),l(p,e._original))}return e.$$set=e=>{"items"in e&&n(16,i=e.items),"selected"in e&&n(15,o=e.selected),"classes"in e&&n(0,s=e.classes),"onSelect"in e&&n(17,l=e.onSelect)},e.$$.update=()=>{98304&e.$$.dirty[0]&&n(5,p=o.map((e=>i.find((t=>{let n=!0;return t.id!=e&&(n=!1),n})))).filter((e=>e))),98304&e.$$.dirty[0]&&(n(3,u={[r]:[]}),n(4,d={[r]:{id:r,value:"Без группы",_checkedCount:0,_showed:!0}}),i.forEach((e=>{e.group&&!d[e.group.id]&&(n(4,d[e.group.id]={...e.group,_checkedCount:0,_showed:!0},d),n(3,u[e.group.id]=[],u))})),n(6,f=Object.keys(u).length>1),i.forEach((e=>{const t=e.group?d[e.group.id]:d[r],i=p.includes(e),o={...e,group:t,_key:crypto.randomUUID(),_original:e,_checked:i};u[o.group.id].push(o),n(4,d[o.group.id]._checkedCount+=Number(i),d)})))},[s,a,c,u,d,p,f,function(){a?v():n(1,a=!0)},function e(t){if(!document.body.contains(c))return document.body.removeEventListener("click",e),!0;c.contains(t.target)||v()},$,function(e){g=!0,p.length?Object.values(d).forEach((e=>{e._checkedCount&&b(e)})):Object.values(d).forEach((e=>b(e))),h(),l(p),g=!1},b,x,function(e){return 0===e?"":e<i.length?"some-selected":"all-selected"},function(e){return 0===e._checkedCount?"":e._checkedCount<u[e.id].length?"some-selected":"all-selected"},o,i,l,e=>b(e),e=>$(e),(e,t,n)=>x(e,t,n),function(e){P[e?"unshift":"push"]((()=>{c=e,n(2,c)}))}]}var tn=class extends fe{constructor(e){super(),de(this,e,en,Kt,N,{items:16,selected:15,classes:0,onSelect:17},Rt,[-1,-1])}};function nn(e){s(e,"svelte-h17tq8",".field-name.svelte-h17tq8{font-weight:bold;font-size:medium}.start-condition.svelte-h17tq8{padding-top:10px;padding-bottom:10px}")}function on(e){const t=e.slice(),n=t[0].getNumberFromTypeField();return t[9]=n,t}function sn(e){let t,n,i,s,a,f,m,g,h,$,x,w,y,k,I=e[0].field.name+"";function S(t){e[5](t)}g=new ye({props:{caption:"Выбрать полсе",clickHandler:e[4]}});let _={items:e[0].getConditionFromField(),onSelect:e[3]};void 0!==e[0].condition&&(_.selected=e[0].condition),$=new ft({props:_}),P.push((()=>re($,"selected",S)));let N=e[0].condition&&ln(on(e));return{c(){t=c("div"),n=u("Если "),i=c("span"),s=u('"'),a=u(I),f=u('"'),m=d(),ce(g.$$.fragment),h=d(),ce($.$$.fragment),w=d(),N&&N.c(),y=p(),v(i,"class","field-name svelte-h17tq8"),v(t,"class","start-condition svelte-h17tq8")},m(e,r){l(e,t,r),o(t,n),o(t,i),o(i,s),o(i,a),o(i,f),o(t,m),ae(g,t,null),l(e,h,r),ae($,e,r),l(e,w,r),N&&N.m(e,r),l(e,y,r),k=!0},p(e,t){(!k||1&t)&&I!==(I=e[0].field.name+"")&&b(a,I);const n={};1&t&&(n.items=e[0].getConditionFromField()),!x&&1&t&&(x=!0,n.selected=e[0].condition,Q((()=>x=!1))),$.$set(n),e[0].condition?N?(N.p(on(e),t),1&t&&te(N,1)):(N=ln(on(e)),N.c(),te(N,1),N.m(y.parentNode,y)):N&&(K(),ne(N,1,1,(()=>{N=null})),ee())},i(e){k||(te(g.$$.fragment,e),te($.$$.fragment,e),te(N),k=!0)},o(e){ne(g.$$.fragment,e),ne($.$$.fragment,e),ne(N),k=!1},d(e){e&&(r(t),r(h),r(w),r(y)),ue(g),ue($,e),N&&N.d(e)}}}function ln(e){let t,n,i,o;const s=[cn,rn],c=[];function a(e,t){return e[9]===Me.enum?0:1}return t=a(e),n=c[t]=s[t](e),{c(){n.c(),i=p()},m(e,n){c[t].m(e,n),l(e,i,n),o=!0},p(e,o){let l=t;t=a(e),t===l?c[t].p(e,o):(K(),ne(c[l],1,1,(()=>{c[l]=null})),ee(),n=c[t],n?n.p(e,o):(n=c[t]=s[t](e),n.c()),te(n,1),n.m(i.parentNode,i))},i(e){o||(te(n),o=!0)},o(e){ne(n),o=!1},d(e){e&&r(i),c[t].d(e)}}}function rn(e){let t,n,i;function o(t){e[8](t)}let s={typeInput:e[9]};return void 0!==e[0].value&&(s.value=e[0].value),t=new Ue({props:s}),P.push((()=>re(t,"value",o))),{c(){ce(t.$$.fragment)},m(e,n){ae(t,e,n),i=!0},p(e,i){const o={};1&i&&(o.typeInput=e[9]),!n&&1&i&&(n=!0,o.value=e[0].value,Q((()=>n=!1))),t.$set(o)},i(e){i||(te(t.$$.fragment,e),i=!0)},o(e){ne(t.$$.fragment,e),i=!1},d(e){ue(t,e)}}}function cn(e){let t,n,i,o;const s=[un,an],c=[];function a(e,t){return e[2]?0:1}return t=a(e),n=c[t]=s[t](e),{c(){n.c(),i=p()},m(e,n){c[t].m(e,n),l(e,i,n),o=!0},p(e,o){let l=t;t=a(e),t===l?c[t].p(e,o):(K(),ne(c[l],1,1,(()=>{c[l]=null})),ee(),n=c[t],n?n.p(e,o):(n=c[t]=s[t](e),n.c()),te(n,1),n.m(i.parentNode,i))},i(e){o||(te(n),o=!0)},o(e){ne(n),o=!1},d(e){e&&r(i),c[t].d(e)}}}function an(e){let t,n,i;function o(t){e[7](t)}let s={items:e[0].getContextField()};return void 0!==e[0].value&&(s.selected=e[0].value),t=new tn({props:s}),P.push((()=>re(t,"selected",o))),{c(){ce(t.$$.fragment)},m(e,n){ae(t,e,n),i=!0},p(e,i){const o={};1&i&&(o.items=e[0].getContextField()),!n&&1&i&&(n=!0,o.selected=e[0].value,Q((()=>n=!1))),t.$set(o)},i(e){i||(te(t.$$.fragment,e),i=!0)},o(e){ne(t.$$.fragment,e),i=!1},d(e){ue(t,e)}}}function un(e){let t,n,i;function o(t){e[6](t)}let s={items:e[0].getContextField()};return void 0!==e[0].value&&(s.selected=e[0].value),t=new ft({props:s}),P.push((()=>re(t,"selected",o))),{c(){ce(t.$$.fragment)},m(e,n){ae(t,e,n),i=!0},p(e,i){const o={};1&i&&(o.items=e[0].getContextField()),!n&&1&i&&(n=!0,o.selected=e[0].value,Q((()=>n=!1))),t.$set(o)},i(e){i||(te(t.$$.fragment,e),i=!0)},o(e){ne(t.$$.fragment,e),i=!1},d(e){ue(t,e)}}}function dn(e){let t,n,i=e[0].field&&!1===e[1]&&sn(e);return{c(){i&&i.c(),t=p()},m(e,o){i&&i.m(e,o),l(e,t,o),n=!0},p(e,[n]){e[0].field&&!1===e[1]?i?(i.p(e,n),3&n&&te(i,1)):(i=sn(e),i.c(),te(i,1),i.m(t.parentNode,t)):i&&(K(),ne(i,1,1,(()=>{i=null})),ee())},i(e){n||(te(i),n=!0)},o(e){ne(i),n=!1},d(e){e&&r(t),i&&i.d(e)}}}function pn(e,t,n){let{conditionItem:i}=t,{isShowLastPathItem:o=!1}=t,s=!1;return z((()=>{i.field&&n(1,o=!1)})),e.$$set=e=>{"conditionItem"in e&&n(0,i=e.conditionItem),"isShowLastPathItem"in e&&n(1,o=e.isShowLastPathItem)},[i,o,s,function(){"OneOf"===i.condition||"None"===i.condition?(n(2,s=!1),n(0,i.value=[],i)):(n(2,s=!0),n(0,i.value="",i)),n(0,i),console.log(i)},function(){n(1,o=!0),n(0,i.value="",i),n(0,i.condition="",i),n(0,i)},function(t){e.$$.not_equal(i.condition,t)&&(i.condition=t,n(0,i))},function(t){e.$$.not_equal(i.value,t)&&(i.value=t,n(0,i))},function(t){e.$$.not_equal(i.value,t)&&(i.value=t,n(0,i))},function(t){e.$$.not_equal(i.value,t)&&(i.value=t,n(0,i))}]}var fn=class extends fe{constructor(e){super(),de(this,e,pn,dn,N,{conditionItem:0,isShowLastPathItem:1},nn)}};function mn(e){s(e,"svelte-1rmpqip",".condition-item.svelte-1rmpqip{display:flex;flex-direction:column}.condition-field.svelte-1rmpqip{flex:1}")}function gn(e,t,n){const i=e.slice();return i[11]=t[n],i[12]=t,i[13]=n,i}function hn(e){let t,n,i;function o(){return e[6](e[13])}function s(t){e[7](t,e[13])}let l={items:e[11].items?Gt.getAppitems(e[11]):[],onSelect:o};return void 0!==e[0].path[e[13]+1]&&(l.selected=e[0].path[e[13]+1]),t=new ft({props:l}),P.push((()=>re(t,"selected",s))),{c(){ce(t.$$.fragment)},m(e,n){ae(t,e,n),i=!0},p(i,s){e=i;const l={};1&s&&(l.items=e[11].items?Gt.getAppitems(e[11]):[]),1&s&&(l.onSelect=o),!n&&1&s&&(n=!0,l.selected=e[0].path[e[13]+1],Q((()=>n=!1))),t.$set(l)},i(e){i||(te(t.$$.fragment,e),i=!0)},o(e){ne(t.$$.fragment,e),i=!1},d(e){ue(t,e)}}}function vn(e,t){let n,i,o,s=(t[0].path.length-1!==t[13]||!0===t[2])&&hn(t);return{key:e,first:null,c(){n=p(),s&&s.c(),i=p(),this.first=n},m(e,t){l(e,n,t),s&&s.m(e,t),l(e,i,t),o=!0},p(e,n){(t=e)[0].path.length-1!==t[13]||!0===t[2]?s?(s.p(t,n),5&n&&te(s,1)):(s=hn(t),s.c(),te(s,1),s.m(i.parentNode,i)):s&&(K(),ne(s,1,1,(()=>{s=null})),ee())},i(e){o||(te(s),o=!0)},o(e){ne(s),o=!1},d(e){e&&(r(n),r(i)),s&&s.d(e)}}}function $n(e){let t,n,i,s,a,u,p,f,m,g,h=[],$=new Map;function b(t){e[5](t)}let x={items:Gt.getAppitems(e[1]),onSelect:e[4]};void 0!==e[0].path[0]&&(x.selected=e[0].path[0]),n=new ft({props:x}),P.push((()=>re(n,"selected",b)));let w=ie(e[0].path);const y=e=>e[13];for(let t=0;t<w.length;t+=1){let n=gn(e,w,t),i=y(n);$.set(i,h[t]=vn(i,n))}function k(t){e[8](t)}function I(t){e[9](t)}let S={};return void 0!==e[0]&&(S.conditionItem=e[0]),void 0!==e[2]&&(S.isShowLastPathItem=e[2]),p=new fn({props:S}),P.push((()=>re(p,"conditionItem",k))),P.push((()=>re(p,"isShowLastPathItem",I))),{c(){t=c("div"),ce(n.$$.fragment),s=d(),a=c("div");for(let e=0;e<h.length;e+=1)h[e].c();u=d(),ce(p.$$.fragment),v(a,"class","condition-field svelte-1rmpqip"),v(t,"class","condition-item svelte-1rmpqip")},m(e,i){l(e,t,i),ae(n,t,null),o(t,s),o(t,a);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(a,null);o(a,u),ae(p,a,null),g=!0},p(e,[t]){const o={};2&t&&(o.items=Gt.getAppitems(e[1])),1&t&&(o.onSelect=e[4]),!i&&1&t&&(i=!0,o.selected=e[0].path[0],Q((()=>i=!1))),n.$set(o),13&t&&(w=ie(e[0].path),K(),h=le(h,t,y,1,e,w,$,a,se,vn,u,gn),ee());const s={};!f&&1&t&&(f=!0,s.conditionItem=e[0],Q((()=>f=!1))),!m&&4&t&&(m=!0,s.isShowLastPathItem=e[2],Q((()=>m=!1))),p.$set(s)},i(e){if(!g){te(n.$$.fragment,e);for(let e=0;e<w.length;e+=1)te(h[e]);te(p.$$.fragment,e),g=!0}},o(e){ne(n.$$.fragment,e);for(let e=0;e<h.length;e+=1)ne(h[e]);ne(p.$$.fragment,e),g=!1},d(e){e&&r(t),ue(n);for(let e=0;e<h.length;e+=1)h[e].d();ue(p)}}}function bn(e,t,n){let{conditionItem:i}=t,{mainApp:o}=t,s=!0;async function l(e,t){e||n(0,i.path=[...i.path.filter(((e,n)=>t>=n&&e))],i),e instanceof Ve&&(await e.getItems(),n(0,i.path=[...i.path.filter(((e,n)=>t>=n&&e))],i)),i.clearField(),e instanceof Ge&&(n(0,i.field=e,i),n(0,i.path=[...i.path.filter(((e,n)=>t-1>=n&&e))],i),n(2,s=!1)),n(0,i),console.log(i)}return e.$$set=e=>{"conditionItem"in e&&n(0,i=e.conditionItem),"mainApp"in e&&n(1,o=e.mainApp)},[i,o,s,l,async()=>{await l(i.path[0],0)},function(t){e.$$.not_equal(i.path[0],t)&&(i.path[0]=t,n(0,i))},async e=>{await l(i.path[e+1],e+1)},function(t,o){e.$$.not_equal(i.path[o+1],t)&&(i.path[o+1]=t,n(0,i))},function(e){i=e,n(0,i)},function(e){s=e,n(2,s)}]}var xn=class extends fe{constructor(e){super(),de(this,e,bn,$n,N,{conditionItem:0,mainApp:1},mn)}};function wn(e){s(e,"svelte-utl1gd",".condition-constructor-container.svelte-utl1gd{padding:10px}.button-container-bottom.svelte-utl1gd,.button-container-top.svelte-utl1gd{padding:15px 5px}.button-container-top.svelte-utl1gd{border-bottom:1px solid rgb(190, 196, 196)}.button-container-bottom.svelte-utl1gd{border-top:1px solid rgb(190, 196, 196)}.condition-item-body.svelte-utl1gd{background-color:rgb(190, 196, 196);margin-bottom:5px;padding:5px 10px}.condition-item-name.svelte-utl1gd{font-weight:bold;margin:10px 0px}")}function yn(e,t,n){const i=e.slice();return i[14]=t[n],i[15]=t,i[16]=n,i}function kn(e,t,n){const i=e.slice();return i[17]=t[n],i[18]=t,i[19]=n,i}function In(e){let t,n,i,s,a,u,p,f,m,g,h,$,b=[],x=new Map,w=1===e[1].length&&0!==e[1][0].conditions.length&&0===e[1][0].conditions.filter(Mn).length;i=new ye({props:{caption:"Назад",clickHandler:e[6]}}),a=new ye({props:{caption:"Добавить условие",clickHandler:e[2]}});let y=ie(e[1]);const k=e=>e[16];for(let t=0;t<y.length;t+=1){let n=yn(e,y,t),i=k(n);x.set(i,b[t]=Nn(i,n))}g=new ye({props:{caption:"Добавить условие",clickHandler:e[2]}});let I=w&&An(e);return{c(){t=c("div"),n=c("div"),ce(i.$$.fragment),s=d(),ce(a.$$.fragment),u=d(),p=c("div");for(let e=0;e<b.length;e+=1)b[e].c();f=d(),m=c("div"),ce(g.$$.fragment),h=d(),I&&I.c(),v(n,"class","button-container-top svelte-utl1gd"),v(p,"class","conditions-body"),v(m,"class","button-container-bottom svelte-utl1gd"),v(t,"class","condition-constructor-container svelte-utl1gd")},m(e,r){l(e,t,r),o(t,n),ae(i,n,null),o(n,s),ae(a,n,null),o(t,u),o(t,p);for(let e=0;e<b.length;e+=1)b[e]&&b[e].m(p,null);o(t,f),o(t,m),ae(g,m,null),o(m,h),I&&I.m(m,null),$=!0},p(e,t){const n={};1&t&&(n.clickHandler=e[6]),i.$set(n),10&t&&(y=ie(e[1]),K(),b=le(b,t,k,1,e,y,x,p,se,Nn,null,yn),ee()),2&t&&(w=1===e[1].length&&0!==e[1][0].conditions.length&&0===e[1][0].conditions.filter(Mn).length),w?I?(I.p(e,t),2&t&&te(I,1)):(I=An(e),I.c(),te(I,1),I.m(m,null)):I&&(K(),ne(I,1,1,(()=>{I=null})),ee())},i(e){if(!$){te(i.$$.fragment,e),te(a.$$.fragment,e);for(let e=0;e<y.length;e+=1)te(b[e]);te(g.$$.fragment,e),te(I),$=!0}},o(e){ne(i.$$.fragment,e),ne(a.$$.fragment,e);for(let e=0;e<b.length;e+=1)ne(b[e]);ne(g.$$.fragment,e),ne(I),$=!1},d(e){e&&r(t),ue(i),ue(a);for(let e=0;e<b.length;e+=1)b[e].d();ue(g),I&&I.d()}}}function Sn(e){let t,n,i;function o(t){e[9](t,e[17])}let s={items:Je};return void 0!==e[17].betweenConditions&&(s.selected=e[17].betweenConditions),t=new ft({props:s}),P.push((()=>re(t,"selected",o))),{c(){ce(t.$$.fragment)},m(e,n){ae(t,e,n),i=!0},p(i,o){e=i;const s={};!n&&2&o&&(n=!0,s.selected=e[17].betweenConditions,Q((()=>n=!1))),t.$set(s)},i(e){i||(te(t.$$.fragment,e),i=!0)},o(e){ne(t.$$.fragment,e),i=!1},d(e){ue(t,e)}}}function _n(e,t){let n,i,s,a,u,p,f,m,g,h;function $(e){t[7](e,t[17],t[18],t[19])}function b(e){t[8](e,t[14])}let x={};void 0!==t[17]&&(x.conditionItem=t[17]),void 0!==t[14].mainApp&&(x.mainApp=t[14].mainApp),i=new xn({props:x}),P.push((()=>re(i,"conditionItem",$))),P.push((()=>re(i,"mainApp",b)));let w=t[14].conditions.length>1&&t[19]!==t[14].conditions.length-1&&Sn(t);function y(){return t[10](t[19])}return m=new ye({props:{caption:"Удалить условие",clickHandler:y,style:"margin-top:10px;"}}),{key:e,first:null,c(){n=c("div"),ce(i.$$.fragment),u=d(),p=c("div"),w&&w.c(),f=d(),ce(m.$$.fragment),g=d(),v(p,"class","button-container-bottom svelte-utl1gd"),v(n,"class","condition-item-body svelte-utl1gd"),this.first=n},m(e,t){l(e,n,t),ae(i,n,null),o(n,u),o(n,p),w&&w.m(p,null),o(p,f),ae(m,p,null),o(n,g),h=!0},p(e,n){t=e;const o={};!s&&2&n&&(s=!0,o.conditionItem=t[17],Q((()=>s=!1))),!a&&2&n&&(a=!0,o.mainApp=t[14].mainApp,Q((()=>a=!1))),i.$set(o),t[14].conditions.length>1&&t[19]!==t[14].conditions.length-1?w?(w.p(t,n),2&n&&te(w,1)):(w=Sn(t),w.c(),te(w,1),w.m(p,f)):w&&(K(),ne(w,1,1,(()=>{w=null})),ee());const l={};2&n&&(l.clickHandler=y),m.$set(l)},i(e){h||(te(i.$$.fragment,e),te(w),te(m.$$.fragment,e),h=!0)},o(e){ne(i.$$.fragment,e),ne(w),ne(m.$$.fragment,e),h=!1},d(e){e&&r(n),ue(i),w&&w.d(),ue(m)}}}function Nn(e,t){let n,i,s,a,p,f,m,g=t[14].mainApp.name+"",h=[],$=new Map,x=ie(t[14].conditions);const w=e=>e[19];for(let e=0;e<x.length;e+=1){let n=kn(t,x,e),i=w(n);$.set(i,h[e]=_n(i,n))}return{key:e,first:null,c(){n=c("div"),i=c("div"),s=u(g),a=d(),p=c("div");for(let e=0;e<h.length;e+=1)h[e].c();f=d(),v(i,"class","condition-item-name svelte-utl1gd"),v(p,"class","condition-items-body"),v(n,"class","condition-item"),this.first=n},m(e,t){l(e,n,t),o(n,i),o(i,s),o(n,a),o(n,p);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(p,null);o(n,f),m=!0},p(e,n){t=e,(!m||2&n)&&g!==(g=t[14].mainApp.name+"")&&b(s,g),10&n&&(x=ie(t[14].conditions),K(),h=le(h,n,w,1,t,x,$,p,se,_n,null,kn),ee())},i(e){if(!m){for(let e=0;e<x.length;e+=1)te(h[e]);m=!0}},o(e){for(let e=0;e<h.length;e+=1)ne(h[e]);m=!1},d(e){e&&r(n);for(let e=0;e<h.length;e+=1)h[e].d()}}}function An(e){let t,n;return t=new ye({props:{caption:"Вставить условие",clickHandler:e[11]}}),{c(){ce(t.$$.fragment)},m(e,i){ae(t,e,i),n=!0},p(e,n){const i={};2&n&&(i.clickHandler=e[11]),t.$set(i)},i(e){n||(te(t.$$.fragment,e),n=!0)},o(e){ne(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function Cn(e){let t,n,i=e[0]&&In(e);return{c(){i&&i.c(),t=p()},m(e,o){i&&i.m(e,o),l(e,t,o),n=!0},p(e,[n]){e[0]?i?(i.p(e,n),1&n&&te(i,1)):(i=In(e),i.c(),te(i,1),i.m(t.parentNode,t)):i&&(K(),ne(i,1,1,(()=>{i=null})),ee())},i(e){n||(te(i),n=!0)},o(e){ne(i),n=!1},d(e){e&&r(t),i&&i.d(e)}}}const Mn=e=>""===e.value;function En(e,t,n){let{mainApp:i}=t,{isVisible:o=!1}=t,s=[];function l(){Gt.conditions=[...Gt.conditions],n(1,s=[...Gt.conditions.filter((e=>e.mainApp.id===i.id))])}function r(e){Gt.deleteConditionItems(i,e),l()}async function c(e){We(await Gt.getConditionString(e))}return z((()=>{n(1,s=Gt.conditions.filter((e=>e.mainApp.id===i.id))),et(300)})),e.$$set=e=>{"mainApp"in e&&n(5,i=e.mainApp),"isVisible"in e&&n(0,o=e.isVisible)},[o,s,function(){Gt.createNewConditions(i,[]),l()},r,c,i,()=>n(0,o=!o),function(e,t,i,o){i[o]=e,n(1,s)},function(t,i){e.$$.not_equal(i.mainApp,t)&&(i.mainApp=t,n(1,s))},function(t,i){e.$$.not_equal(i.betweenConditions,t)&&(i.betweenConditions=t,n(1,s))},e=>r(e),()=>c(s[0].mainApp)]}var Ln=class extends fe{constructor(e){super(),de(this,e,En,Cn,N,{mainApp:5,isVisible:0},wn)}};function Tn(e){s(e,"svelte-6g1xk3",".namespace-container.svelte-6g1xk3{padding:10px}.ns-item-body.svelte-6g1xk3{display:flex;align-items:center;justify-content:space-between;padding:10px 15px;border-radius:5px;border:1px solid rgb(226, 218, 218);margin-bottom:3px;cursor:pointer;transition:background-color 0.3s}.ns-item-body.svelte-6g1xk3:hover{background-color:#e0e0e0}.button-container.svelte-6g1xk3{margin-bottom:10px}")}function On(e,t,n){const i=e.slice();return i[29]=t[n],i[27]=n,i}function zn(e,t,n){const i=e.slice();return i[25]=t[n],i[27]=n,i}function jn(e,t,n){const i=e.slice();return i[25]=t[n],i[27]=n,i}function Dn(e){let t,n,i,o;const s=[qn,Fn],a=[];function u(e,t){return e[6]?0:1}return n=u(e),i=a[n]=s[n](e),{c(){t=c("div"),i.c(),v(t,"class","namespace-container svelte-6g1xk3")},m(e,i){l(e,t,i),a[n].m(t,null),o=!0},p(e,o){let l=n;n=u(e),n===l?a[n].p(e,o):(K(),ne(a[l],1,1,(()=>{a[l]=null})),ee(),i=a[n],i?i.p(e,o):(i=a[n]=s[n](e),i.c()),te(i,1),i.m(t,null))},i(e){o||(te(i),o=!0)},o(e){ne(i),o=!1},d(e){e&&r(t),a[n].d()}}}function Pn(e){let t,n,i;function o(t){e[15](t)}let s={mainApp:e[7]};return void 0!==e[8]&&(s.isVisible=e[8]),t=new Ln({props:s}),P.push((()=>re(t,"isVisible",o))),{c(){ce(t.$$.fragment)},m(e,n){ae(t,e,n),i=!0},p(e,i){const o={};128&i&&(o.mainApp=e[7]),!n&&256&i&&(n=!0,o.isVisible=e[8],Q((()=>n=!1))),t.$set(o)},i(e){i||(te(t.$$.fragment,e),i=!0)},o(e){ne(t.$$.fragment,e),i=!1},d(e){ue(t,e)}}}function Fn(e){let t,n,i,o,s;function c(t){e[20](t)}let a={placeholder:"Поиск по разделам...",inputHndlr:e[9]};void 0!==e[1]&&(a.value=e[1]),t=new Ue({props:a}),P.push((()=>re(t,"value",c)));let u=e[3].length&&Hn(e);return{c(){ce(t.$$.fragment),i=d(),u&&u.c(),o=p()},m(e,n){ae(t,e,n),l(e,i,n),u&&u.m(e,n),l(e,o,n),s=!0},p(e,i){const s={};!n&&2&i&&(n=!0,s.value=e[1],Q((()=>n=!1))),t.$set(s),e[3].length?u?u.p(e,i):(u=Hn(e),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i(e){s||(te(t.$$.fragment,e),s=!0)},o(e){ne(t.$$.fragment,e),s=!1},d(e){e&&(r(i),r(o)),ue(t,e),u&&u.d(e)}}}function qn(e){let t,n,i,s,a,f,m,g,h,$,x,w,y,k=e[6].name+"",I=e[7]?` - ${e[7].name}`:"";m=new ye({props:{caption:"Назад",clickHandler:e[13]}});let S=e[7]&&Un(e);const _=[Qn,Gn],N=[];function A(e,t){return e[7]&&e[7]instanceof Ve&&e[7].items.length>0?0:1}return $=A(e),x=N[$]=_[$](e),{c(){t=c("h3"),n=u(k),i=d(),s=u(I),a=d(),f=c("div"),ce(m.$$.fragment),g=d(),S&&S.c(),h=d(),x.c(),w=p(),v(f,"class","button-container svelte-6g1xk3")},m(e,r){l(e,t,r),o(t,n),o(t,i),o(t,s),l(e,a,r),l(e,f,r),ae(m,f,null),o(f,g),S&&S.m(f,null),l(e,h,r),N[$].m(e,r),l(e,w,r),y=!0},p(e,t){(!y||64&t)&&k!==(k=e[6].name+"")&&b(n,k),(!y||128&t)&&I!==(I=e[7]?` - ${e[7].name}`:"")&&b(s,I),e[7]?S?(S.p(e,t),128&t&&te(S,1)):(S=Un(e),S.c(),te(S,1),S.m(f,null)):S&&(K(),ne(S,1,1,(()=>{S=null})),ee());let i=$;$=A(e),$===i?N[$].p(e,t):(K(),ne(N[i],1,1,(()=>{N[i]=null})),ee(),x=N[$],x?x.p(e,t):(x=N[$]=_[$](e),x.c()),te(x,1),x.m(w.parentNode,w))},i(e){y||(te(m.$$.fragment,e),te(S),te(x),y=!0)},o(e){ne(m.$$.fragment,e),ne(S),ne(x),y=!1},d(e){e&&(r(t),r(a),r(f),r(h),r(w)),ue(m),S&&S.d(),N[$].d(e)}}}function Hn(e){let t,n=[],i=new Map,o=ie(e[3]);const s=e=>e[27];for(let t=0;t<o.length;t+=1){let l=On(e,o,t),r=s(l);i.set(r,n[t]=Zn(r,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=p()},m(e,i){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,i);l(e,t,i)},p(e,l){2056&l&&(o=ie(e[3]),n=le(n,l,s,1,e,o,i,t.parentNode,oe,Zn,t,On))},d(e){e&&r(t);for(let t=0;t<n.length;t+=1)n[t].d(e)}}}function Zn(e,t){let n,i,s,a,p,m,g,h,$,x=t[29].name+"",w=t[29].items?.length+"";function y(){return t[21](t[29])}return{key:e,first:null,c(){n=c("div"),i=c("div"),s=u(x),a=d(),p=c("div"),m=u(w),g=d(),v(i,"class","ns-iten-name"),v(p,"class","ns-iten-count"),v(n,"class","ns-item-body svelte-6g1xk3"),this.first=n},m(e,t){l(e,n,t),o(n,i),o(i,s),o(n,a),o(n,p),o(p,m),o(n,g),h||($=f(n,"click",y),h=!0)},p(e,n){t=e,8&n&&x!==(x=t[29].name+"")&&b(s,x),8&n&&w!==(w=t[29].items?.length+"")&&b(m,w)},d(e){e&&r(n),h=!1,$()}}}function Un(e){let t,n;return t=new ye({props:{caption:"Конструктор условий",clickHandler:e[14]}}),{c(){ce(t.$$.fragment)},m(e,i){ae(t,e,i),n=!0},p:y,i(e){n||(te(t.$$.fragment,e),n=!0)},o(e){ne(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function Gn(e){let t,n,i,o,s;function c(t){e[18](t)}let a={placeholder:"Поиск по приложениям...",inputHndlr:e[10]};void 0!==e[2]&&(a.value=e[2]),t=new Ue({props:a}),P.push((()=>re(t,"value",c)));let u=e[4]&&e[4].length>0&&Rn(e);return{c(){ce(t.$$.fragment),i=d(),u&&u.c(),o=p()},m(e,n){ae(t,e,n),l(e,i,n),u&&u.m(e,n),l(e,o,n),s=!0},p(e,i){const s={};!n&&4&i&&(n=!0,s.value=e[2],Q((()=>n=!1))),t.$set(s),e[4]&&e[4].length>0?u?u.p(e,i):(u=Rn(e),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i(e){s||(te(t.$$.fragment,e),s=!0)},o(e){ne(t.$$.fragment,e),s=!1},d(e){e&&(r(i),r(o)),ue(t,e),u&&u.d(e)}}}function Qn(e){let t,n,i,o,s,c,a=[],u=new Map;function f(t){e[16](t)}function m(t){e[17](t)}let g={};void 0!==e[7].items&&(g.input=e[7].items),void 0!==e[5]&&(g.output=e[5]),t=new bt({props:g}),P.push((()=>re(t,"input",f))),P.push((()=>re(t,"output",m)));let h=ie(e[5]);const v=e=>e[27];for(let t=0;t<h.length;t+=1){let n=jn(e,h,t),i=v(n);u.set(i,a[t]=Jn(i,n))}return{c(){ce(t.$$.fragment),o=d();for(let e=0;e<a.length;e+=1)a[e].c();s=p()},m(e,n){ae(t,e,n),l(e,o,n);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(e,n);l(e,s,n),c=!0},p(e,o){const l={};!n&&128&o&&(n=!0,l.input=e[7].items,Q((()=>n=!1))),!i&&32&o&&(i=!0,l.output=e[5],Q((()=>i=!1))),t.$set(l),161&o&&(h=ie(e[5]),K(),a=le(a,o,v,1,e,h,u,s.parentNode,se,Jn,s,jn),ee())},i(e){if(!c){te(t.$$.fragment,e);for(let e=0;e<h.length;e+=1)te(a[e]);c=!0}},o(e){ne(t.$$.fragment,e);for(let e=0;e<a.length;e+=1)ne(a[e]);c=!1},d(e){e&&(r(o),r(s)),ue(t,e);for(let t=0;t<a.length;t+=1)a[t].d(e)}}}function Rn(e){let t,n=[],i=new Map,o=ie(e[4]);const s=e=>e[27];for(let t=0;t<o.length;t+=1){let l=zn(e,o,t),r=s(l);i.set(r,n[t]=Bn(r,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=p()},m(e,i){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,i);l(e,t,i)},p(e,l){4112&l&&(o=ie(e[4]),n=le(n,l,s,1,e,o,i,t.parentNode,oe,Bn,t,zn))},d(e){e&&r(t);for(let t=0;t<n.length;t+=1)n[t].d(e)}}}function Bn(e,t){let n,i,s,a,p,m,g=t[25].name+"";function h(){return t[19](t[25])}return{key:e,first:null,c(){n=c("div"),i=c("div"),s=u(g),a=d(),v(i,"class","ns-iten-name"),v(n,"class","ns-item-body svelte-6g1xk3"),this.first=n},m(e,t){l(e,n,t),o(n,i),o(i,s),o(n,a),p||(m=f(n,"click",h),p=!0)},p(e,n){t=e,16&n&&g!==(g=t[25].name+"")&&b(s,g)},d(e){e&&r(n),p=!1,m()}}}function Jn(e,t){let n,i,o;return i=new Zt({props:{appItem:t[25],level:t[7].level+1,menuItems:[t[0]]}}),{key:e,first:null,c(){n=p(),ce(i.$$.fragment),this.first=n},m(e,t){l(e,n,t),ae(i,e,t),o=!0},p(e,n){t=e;const o={};32&n&&(o.appItem=t[25]),128&n&&(o.level=t[7].level+1),1&n&&(o.menuItems=[t[0]]),i.$set(o)},i(e){o||(te(i.$$.fragment,e),o=!0)},o(e){ne(i.$$.fragment,e),o=!1},d(e){e&&r(n),ue(i,e)}}}function Vn(e){let t,n,i,o;const s=[Pn,Dn],c=[];function a(e,t){return e[8]&&e[7]&&e[7]instanceof Ve?0:1}return t=a(e),n=c[t]=s[t](e),{c(){n.c(),i=p()},m(e,n){c[t].m(e,n),l(e,i,n),o=!0},p(e,[o]){let l=t;t=a(e),t===l?c[t].p(e,o):(K(),ne(c[l],1,1,(()=>{c[l]=null})),ee(),n=c[t],n?n.p(e,o):(n=c[t]=s[t](e),n.c()),te(n,1),n.m(i.parentNode,i))},i(e){o||(te(n),o=!0)},o(e){ne(n),o=!1},d(e){e&&r(i),c[t].d(e)}}}function Yn(e,t,n){let i,o,s="",l="",r=[],c=[],a=[],u=[],d=!1;function p(){n(4,a=i?.items?.filter((e=>e.name.toUpperCase().includes(l.toUpperCase()))))}function f(e){n(2,l=""),n(6,i=e),n(4,a=[...e.items])}async function m(e){n(7,o=e),o instanceof Ve&&(o.items.length||await o.getItems(),n(5,u=[...o.items]))}function g(e){if(e instanceof Ge){const t=[...e.parent.getPathToMain().filter((e=>e instanceof Ve))];return Gt.createNewConditions(t[1],t.slice(2),e),n(8,d=!0),[...e.parent.getPathToMain(),e]}}return z((()=>{n(0,Re.callback=g,Re),n(6,i=void 0),n(7,o=void 0),async function(){0===Ve.allApps.length&&await Ve.getBaseStructure("elma"),r=[...Ve.allApps.filter((e=>e.items?.length>0))],n(3,c=[...r])}()})),[Re,s,l,c,a,u,i,o,d,function(){n(3,c=r.filter((e=>e.name.toUpperCase().includes(s.toUpperCase()))))},p,f,m,function(){et(200),o?(n(7,o=void 0),p()):n(6,i=void 0)},function(){n(8,d=!0)},function(e){d=e,n(8,d)},function(t){e.$$.not_equal(o.items,t)&&(o.items=t,n(7,o))},function(e){u=e,n(5,u)},function(e){l=e,n(2,l)},e=>m(e),function(e){s=e,n(1,s)},e=>f(e)]}var Wn=class extends fe{constructor(e){super(),de(this,e,Yn,Vn,N,{},Tn)}};function Xn(e){s(e,"svelte-1w18wh7",".wrap.svelte-1w18wh7{padding:14px 0px 5px 0px;margin:10px auto;height:100%;display:flex;justify-content:center;align-items:center}.sp.svelte-1w18wh7{width:16px;height:16px;top:50%;left:50%;margin-top:-8px;margin-left:-8px;display:block;z-index:101;border:solid 2px transparent;border-top-color:#158fd2;border-left-color:#158fd2;border-radius:100%;-webkit-animation:svelte-1w18wh7-load 900ms linear infinite;animation:svelte-1w18wh7-load 900ms linear infinite}@keyframes svelte-1w18wh7-load{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}")}function Kn(e){let t;return{c(){t=c("div"),t.innerHTML='<div class="sp svelte-1w18wh7"></div>',v(t,"class","wrap svelte-1w18wh7")},m(e,n){l(e,t,n)},p:y,i:y,o:y,d(e){e&&r(t)}}}function ei(e){return[]}var ti=class extends fe{constructor(e){super(),de(this,e,ei,Kn,N,{},Xn)}};function ni(e){s(e,"svelte-15esvsr",".overlay.svelte-15esvsr{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0);backdrop-filter:blur(0px);z-index:1000;transition:background-color 0.3s ease,\r\n      backdrop-filter 0.3s ease;pointer-events:none}.active.svelte-15esvsr{display:block;background-color:rgba(0, 0, 0, 0.2);backdrop-filter:blur(3px);pointer-events:auto}")}function ii(e){let t,n,i,o;return n=new ti({}),{c(){t=c("div"),ce(n.$$.fragment),v(t,"class",i="overlay "+(e[0]?"active":"")+" svelte-15esvsr")},m(e,i){l(e,t,i),ae(n,t,null),o=!0},p(e,[n]){(!o||1&n&&i!==(i="overlay "+(e[0]?"active":"")+" svelte-15esvsr"))&&v(t,"class",i)},i(e){o||(te(n.$$.fragment,e),o=!0)},o(e){ne(n.$$.fragment,e),o=!1},d(e){e&&r(t),ue(n)}}}function oi(e,t,n){let i;return M(e,$e,(e=>n(0,i=e))),[i]}var si=class extends fe{constructor(e){super(),de(this,e,oi,ii,N,{},ni)}};function li(e){s(e,"svelte-10424li",".main-container.svelte-10424li{background-color:#f5f5f5}")}function ri(e){let t,n;return t=new st({}),{c(){ce(t.$$.fragment)},m(e,i){ae(t,e,i),n=!0},i(e){n||(te(t.$$.fragment,e),n=!0)},o(e){ne(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function ci(e){let t,n;return t=new Wn({}),{c(){ce(t.$$.fragment)},m(e,i){ae(t,e,i),n=!0},i(e){n||(te(t.$$.fragment,e),n=!0)},o(e){ne(t.$$.fragment,e),n=!1},d(e){ue(t,e)}}}function ai(e){let t,n,i,s,a,u,p;t=new si({}),s=new Ce({});let f="connect-settings"===e[0]&&ri(),m="elmaStrings"===e[0]&&ci();return{c(){ce(t.$$.fragment),n=d(),i=c("div"),ce(s.$$.fragment),a=d(),f&&f.c(),u=d(),m&&m.c(),v(i,"class","main-container svelte-10424li")},m(e,r){ae(t,e,r),l(e,n,r),l(e,i,r),ae(s,i,null),o(i,a),f&&f.m(i,null),o(i,u),m&&m.m(i,null),p=!0},p(e,[t]){"connect-settings"===e[0]?f?1&t&&te(f,1):(f=ri(),f.c(),te(f,1),f.m(i,u)):f&&(K(),ne(f,1,1,(()=>{f=null})),ee()),"elmaStrings"===e[0]?m?1&t&&te(m,1):(m=ci(),m.c(),te(m,1),m.m(i,null)):m&&(K(),ne(m,1,1,(()=>{m=null})),ee())},i(e){p||(te(t.$$.fragment,e),te(s.$$.fragment,e),te(f),te(m),p=!0)},o(e){ne(t.$$.fragment,e),ne(s.$$.fragment,e),ne(f),ne(m),p=!1},d(e){e&&(r(n),r(i)),ue(t,e),ue(s),f&&f.d(),m&&m.d()}}}function ui(e,t,n){let i;return M(e,ve,(e=>n(0,i=e))),z((()=>{})),[i]}var di=class extends fe{constructor(e){super(),de(this,e,ui,ai,N,{},li)}};Office.onReady((()=>{new di({target:document.getElementById("app-start")})}))}(),new URL(n(58394),n.b)}();
//# sourceMappingURL=taskpane.js.map